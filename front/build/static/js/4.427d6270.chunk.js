/*! For license information please see 4.427d6270.chunk.js.LICENSE.txt */
(this["webpackJsonpreact-uniswap"]=this["webpackJsonpreact-uniswap"]||[]).push([[4],{1022:function(e,t,r){"use strict";r.r(t),function(e){r.d(t,"PhantomInjectedProvider",(function(){return V})),r.d(t,"SlopeInjectedProxyProvider",(function(){return Z})),r.d(t,"SolanaPrivateKeyProvider",(function(){return le})),r.d(t,"SolanaWallet",(function(){return he})),r.d(t,"SolflareInjectedProvider",(function(){return Y})),r.d(t,"SolletInjectedProvider",(function(){return $})),r.d(t,"TorusInjectedProvider",(function(){return ne}));var n=r(18),a=r.n(n),i=r(19),o=r.n(i),s=r(24),u=r.n(s),c=r(42),f=r.n(c),l=r(23),h=r.n(l),d=r(12),p=r.n(d),v=r(11),b=r.n(v),y=r(3),g=r.n(y),m=r(131),w=r(38),k=r(7),x=r(224),O=r(1079),S=r.n(O),E=r(33),B=r(1109),j=r(1089),I=r.n(j);function A(e){return function(t,r,n,a){return"solana_chainId"===t.method?(r.result=e,a()):n()}}function _(e){return function(t,r,n,a){return"solana_provider_config"===t.method?(r.result=e,a()):n()}}function P(e){var t=e.chainId;return Object(w.i)([A(t),_(e)])}function T(e){var t=e.rpcTarget,r=Object(m.c)({rpcTarget:t});return{networkMiddleware:Object(w.i)([P(e),r]),fetchMiddleware:r}}function C(e){var t=e.getAccounts;return Object(w.d)(function(){var e=p()(g.a.mark((function e(r,n,a){var i;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("getAccounts"===r.method){e.next=3;break}return e.abrupt("return",a());case 3:if(t){e.next=5;break}throw new Error("WalletMiddleware - opts.getAccounts not provided");case 5:return e.next=7,t(r);case 7:return i=e.sent,n.result=i,e.abrupt("return",void 0);case 10:case"end":return e.stop()}}),e)})));return function(t,r,n){return e.apply(this,arguments)}}())}function L(e){var t=e.requestAccounts;return Object(w.d)(function(){var e=p()(g.a.mark((function e(r,n,a){var i;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("requestAccounts"===r.method){e.next=3;break}return e.abrupt("return",a());case 3:if(t){e.next=5;break}throw new Error("WalletMiddleware - opts.requestAccounts not provided");case 5:return e.next=7,t(r);case 7:return i=e.sent,n.result=i,e.abrupt("return",void 0);case 10:case"end":return e.stop()}}),e)})));return function(t,r,n){return e.apply(this,arguments)}}())}function R(e,t){return Object(w.d)(function(){var r=p()(g.a.mark((function r(n,a,i){var o;return g.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(n.method===e){r.next=3;break}return r.abrupt("return",i());case 3:if(t){r.next=5;break}throw new Error("WalletMiddleware - ".concat(e," not provided"));case 5:return r.next=7,t(n);case 7:return o=r.sent,a.result=o,r.abrupt("return",void 0);case 10:case"end":return r.stop()}}),r)})));return function(e,t,n){return r.apply(this,arguments)}}())}function N(e){var t=e.getAccounts,r=e.requestAccounts,n=e.signTransaction,a=e.signAndSendTransaction,i=e.signAllTransactions,o=e.signMessage,s=e.getPrivateKey,u=e.getSecretKey;return Object(w.i)([L({requestAccounts:r}),C({getAccounts:t}),R("signTransaction",n),R("signAndSendTransaction",a),R("signAllTransactions",i),R("signMessage",o),R("solanaPrivateKey",s),R("solanaSecretKey",u)])}function U(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function q(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?U(Object(r),!0).forEach((function(t){b()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):U(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function z(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=h()(e);if(t){var a=h()(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return f()(this,r)}}var W=function(e){u()(r,e);var t=z(r);function r(e){var n=e.config,i=e.state;return a()(this,r),t.call(this,{config:{chainConfig:q(q({},n.chainConfig),{},{chainNamespace:k.CHAIN_NAMESPACES.SOLANA})},state:i})}return o()(r,[{key:"switchChain",value:function(){var e=p()(g.a.mark((function e(t){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Promise.resolve());case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"setupProvider",value:function(){var e=p()(g.a.mark((function e(t){var r,n,a,i,o,s;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=new w.a,n=this.getProviderHandlers(t),a=N(n),r.push(a),i=P(this.config.chainConfig),r.push(i),(o=this.getInjectedProviderProxy(t))&&r.push(o),s=Object(m.d)(r),this.updateProviderEngineProxy(s),e.next=12,this.lookupNetwork();case 12:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"lookupNetwork",value:function(){var e=p()(g.a.mark((function e(){var t;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.config.chainConfig,this.update({chainId:t.chainId}),e.abrupt("return",t.chainId||"");case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getInjectedProviderProxy",value:function(e){}}]),r}(x.a),H=function(e){var t={requestAccounts:function(){var t=p()(g.a.mark((function t(){return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",e.publicKey?[S.a.encode(e.publicKey.toBytes())]:[]);case 1:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),getAccounts:function(){var t=p()(g.a.mark((function t(){return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",e.publicKey?[S.a.encode(e.publicKey.toBytes())]:[]);case 1:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),getPrivateKey:function(){var e=p()(g.a.mark((function e(){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:throw E.ethErrors.rpc.methodNotSupported();case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),getSecretKey:function(){var e=p()(g.a.mark((function e(){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:throw E.ethErrors.rpc.methodNotSupported();case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),signTransaction:function(){var t=p()(g.a.mark((function t(r){var n;return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.signTransaction(r.params.message);case 2:return n=t.sent,t.abrupt("return",n);case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),signMessage:function(){var t=p()(g.a.mark((function t(r){var n;return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.signMessage(r.params.message,r.params.display);case 2:return n=t.sent,t.abrupt("return",n.signature);case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),signAllTransactions:function(){var t=p()(g.a.mark((function t(r){var n,a,i;return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(null!==(n=r.params)&&void 0!==n&&n.message&&null!==(a=r.params)&&void 0!==a&&a.message.length){t.next=2;break}throw E.ethErrors.rpc.invalidParams("message");case 2:return t.next=4,e.signAllTransactions(r.params.message);case 4:return i=t.sent,t.abrupt("return",i);case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),signAndSendTransaction:function(){var t=p()(g.a.mark((function t(r){var n;return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.signAndSendTransaction(r.params.message);case 2:return n=t.sent,t.abrupt("return",{signature:n.signature});case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()};return t};function K(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function M(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?K(Object(r),!0).forEach((function(t){b()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):K(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function D(e){return Object(w.d)(function(){var t=p()(g.a.mark((function t(r,n,a){var i;return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.request(M({},r));case 2:i=t.sent,n.result=i;case 4:case"end":return t.stop()}}),t)})));return function(e,r,n){return t.apply(this,arguments)}}())}function F(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=h()(e);if(t){var a=h()(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return f()(this,r)}}var V=function(e){u()(r,e);var t=F(r);function r(){return a()(this,r),t.apply(this,arguments)}return o()(r,[{key:"getProviderHandlers",value:function(e){return H(e)}},{key:"getInjectedProviderProxy",value:function(e){return D(e)}}]),r}(W);function G(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=h()(e);if(t){var a=h()(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return f()(this,r)}}var Z=function(t){u()(n,t);var r=G(n);function n(){return a()(this,n),r.apply(this,arguments)}return o()(n,[{key:"getProviderHandlers",value:function(t){return function(t,r){var n={requestAccounts:function(){var e=p()(g.a.mark((function e(){var r,n;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.connect();case 2:return r=e.sent,n=r.data,e.abrupt("return",[n.publicKey]);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),getAccounts:function(){var e=p()(g.a.mark((function e(){var r,n;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.connect();case 2:return r=e.sent,n=r.data,e.abrupt("return",[n.publicKey]);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),getPrivateKey:function(){var e=p()(g.a.mark((function e(){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:throw E.ethErrors.rpc.methodNotSupported();case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),getSecretKey:function(){var e=p()(g.a.mark((function e(){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:throw E.ethErrors.rpc.methodNotSupported();case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),signTransaction:function(){var r=p()(g.a.mark((function r(n){var a,i,o,s,u;return g.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(a=n.params.message){r.next=3;break}throw E.ethErrors.rpc.invalidRequest({message:"Invalid transaction message"});case 3:return r.next=5,t.signTransaction(S.a.encode(a.serializeMessage()));case 5:if(i=r.sent,(o=i.data).publicKey&&o.signature){r.next=9;break}throw new Error("Invalid signature from slope wallet");case 9:return s=new B.c(o.publicKey),u=S.a.decode(o.signature),a.addSignature(s,e.from(u)),r.abrupt("return",a);case 13:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}(),signMessage:function(){var e=p()(g.a.mark((function e(r){var n;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.signMessage(r.params.message);case 2:return n=e.sent,e.abrupt("return",S.a.decode(n.data.signature));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),signAndSendTransaction:function(){var n=p()(g.a.mark((function n(a){var i,o,s,u,c,f,l,h,d;return g.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(i=r()){n.next=3;break}throw E.ethErrors.provider.custom({message:"Provider is not initialized",code:4902});case 3:if(o=a.params.message){n.next=6;break}throw E.ethErrors.rpc.invalidRequest({message:"Invalid transaction message"});case 6:return n.next=8,t.signTransaction(S.a.encode(o.serializeMessage()));case 8:if(s=n.sent,(u=s.data).publicKey&&u.signature){n.next=12;break}throw new Error("Invalid signature from slope wallet");case 12:return c=new B.c(u.publicKey),f=S.a.decode(u.signature),o.addSignature(c,e.from(f)),n.next=17,i.request({method:"solana_provider_config",params:[]});case 17:return l=n.sent,h=new B.a(l.rpcTarget),n.next=21,h.sendRawTransaction(o.serialize());case 21:return d=n.sent,n.abrupt("return",{signature:d});case 23:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),signAllTransactions:function(){var r=p()(g.a.mark((function r(n){var a,i,o,s,u,c,f,l,h,d,p,v;return g.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(null!==(a=n.params)&&void 0!==a&&a.message&&null!==(i=n.params)&&void 0!==i&&i.message.length){r.next=2;break}throw E.ethErrors.rpc.invalidParams("message");case 2:for(s=n.params.message,u=s.length,c=[],f=0;f<u;f++)c.push(S.a.encode(n.params.message[f].serializeMessage()));return r.next=8,t.signAllTransactions(c);case 8:if(l=r.sent,h=l.msg,(d=l.data).publicKey&&(null===(o=d.signatures)||void 0===o?void 0:o.length)===u){r.next=13;break}throw new Error(h);case 13:for(p=new B.c(d.publicKey),f=0;f<u;f++)v=S.a.decode(d.signatures[f]),s[f].addSignature(p,e.from(v));return r.abrupt("return",s);case 16:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}()};return n}(t,this.getProviderEngineProxy.bind(this))}}]),n}(W);function J(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=h()(e);if(t){var a=h()(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return f()(this,r)}}var Y=function(e){u()(r,e);var t=J(r);function r(){return a()(this,r),t.apply(this,arguments)}return o()(r,[{key:"getProviderHandlers",value:function(e){return function(e,t){var r=H(e);return r.signAndSendTransaction=function(){var r=p()(g.a.mark((function r(n){var a,i,o,s,u;return g.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(a=t()){r.next=3;break}throw E.ethErrors.provider.custom({message:"Provider is not initialized",code:4902});case 3:return r.next=5,e.signTransaction(n.params.message);case 5:return i=r.sent,r.next=8,a.request({method:"solana_provider_config",params:[]});case 8:return o=r.sent,s=new B.a(o.rpcTarget),r.next=12,s.sendRawTransaction(i.serialize());case 12:return u=r.sent,r.abrupt("return",{signature:u});case 14:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}(),r}(e,this.getProviderEngineProxy.bind(this))}}]),r}(W);function X(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=h()(e);if(t){var a=h()(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return f()(this,r)}}var $=function(e){u()(r,e);var t=X(r);function r(){return a()(this,r),t.apply(this,arguments)}return o()(r,[{key:"getProviderHandlers",value:function(e){return function(e,t){var r=H(e);return r.signMessage=function(){var t=p()(g.a.mark((function t(r){var n,a;return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.sign(r.params.message,"utf8");case 2:return n=t.sent,a=n.signature,t.abrupt("return",a);case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),r.signAndSendTransaction=function(){var r=p()(g.a.mark((function r(n){var a,i,o,s,u;return g.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(a=t()){r.next=3;break}throw E.ethErrors.provider.custom({message:"Provider is not initialized",code:4902});case 3:return r.next=5,e.signTransaction(n.params.message);case 5:return i=r.sent,r.next=8,a.request({method:"solana_provider_config",params:[]});case 8:return o=r.sent,s=new B.a(o.rpcTarget),r.next=12,s.sendRawTransaction(i.serialize());case 12:return u=r.sent,r.abrupt("return",{signature:u});case 14:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}(),r}(e,this.getProviderEngineProxy.bind(this))}}]),r}(W),Q=function(e){var t={requestAccounts:function(){var t=p()(g.a.mark((function t(){var r;return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.request({method:"solana_requestAccounts",params:{}});case 2:return r=t.sent,t.abrupt("return",r);case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),getAccounts:function(){var t=p()(g.a.mark((function t(){var r;return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.request({method:"solana_requestAccounts",params:{}});case 2:return r=t.sent,t.abrupt("return",r);case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),getPrivateKey:function(){var e=p()(g.a.mark((function e(){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:throw E.ethErrors.rpc.methodNotSupported();case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),getSecretKey:function(){var e=p()(g.a.mark((function e(){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:throw E.ethErrors.rpc.methodNotSupported();case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),signMessage:function(){var t=p()(g.a.mark((function t(r){var n,a;return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(null!==(n=r.params)&&void 0!==n&&n.message){t.next=2;break}throw E.ethErrors.rpc.invalidParams("message");case 2:return t.next=4,e.signMessage(r.params.message);case 4:return a=t.sent,t.abrupt("return",a);case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),signTransaction:function(){var t=p()(g.a.mark((function t(r){var n,a,i;return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(null!==(n=r.params)&&void 0!==n&&n.message){t.next=2;break}throw E.ethErrors.rpc.invalidParams("message");case 2:return a=r.params.message,t.next=5,e.signTransaction(a);case 5:return i=t.sent,t.abrupt("return",i);case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),signAndSendTransaction:function(){var t=p()(g.a.mark((function t(r){var n,a,i;return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(null!==(n=r.params)&&void 0!==n&&n.message){t.next=2;break}throw E.ethErrors.rpc.invalidParams("message");case 2:return a=r.params.message,t.next=5,e.sendTransaction(a);case 5:return i=t.sent,t.abrupt("return",{signature:i});case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),signAllTransactions:function(){var t=p()(g.a.mark((function t(r){var n,a,i,o;return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(null!==(n=r.params)&&void 0!==n&&n.message&&null!==(a=r.params)&&void 0!==a&&a.message.length){t.next=2;break}throw E.ethErrors.rpc.invalidParams("message");case 2:return i=r.params.message,t.next=5,e.signAllTransactions(i);case 5:return o=t.sent,t.abrupt("return",o);case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()};return t};function ee(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function te(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ee(Object(r),!0).forEach((function(t){b()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ee(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function re(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=h()(e);if(t){var a=h()(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return f()(this,r)}}var ne=function(e){u()(r,e);var t=re(r);function r(e){var n=e.config,i=e.state;return a()(this,r),t.call(this,{config:{chainConfig:te(te({},n.chainConfig),{},{chainNamespace:k.CHAIN_NAMESPACES.SOLANA})},state:i})}return o()(r,[{key:"switchChain",value:function(){var e=p()(g.a.mark((function e(t){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Promise.resolve());case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"setupProvider",value:function(){var e=p()(g.a.mark((function e(t){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.handleInjectedProviderUpdate(t),e.next=3,this.setupEngine(t);case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"lookupNetwork",value:function(){var e=p()(g.a.mark((function e(){var t,r,n;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.provider){e.next=2;break}throw E.ethErrors.provider.custom({message:"Torus solana provider is not initialized",code:4902});case 2:return t=this.config.chainConfig.chainId,e.next=5,this.provider.request({method:"solana_chainId"});case 5:if(r=e.sent,n=Object(k.isHexStrict)(r.toString())?r:"0x".concat(parseInt(r,10).toString(16)),t===n){e.next=9;break}throw k.WalletInitializationError.rpcConnectionError("Invalid network, net_version is: ".concat(n,", expected: ").concat(t));case 9:return this.update({chainId:n}),this.provider.emit("connect",{chainId:this.state.chainId}),this.provider.emit("chainChanged",this.state.chainId),e.abrupt("return",this.state.chainId);case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setupEngine",value:function(){var e=p()(g.a.mark((function e(t){var r,n,a,i,o;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Q(t),n=N(r),a=D(t),(i=new w.a).push(n),i.push(a),o=Object(m.d)(i),this.updateProviderEngineProxy(o),e.next=10,this.lookupNetwork();case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"handleInjectedProviderUpdate",value:function(){var e=p()(g.a.mark((function e(t){var r=this;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.on("accountsChanged",function(){var e=p()(g.a.mark((function e(t){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r.provider.emit("accountsChanged",t);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),t.on("chainChanged",function(){var e=p()(g.a.mark((function e(n){var a;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=Object(k.isHexStrict)(n)?n:"0x".concat(parseInt(n,10).toString(16)),r.configure({chainConfig:te(te({},r.config.chainConfig),{},{chainId:a})}),e.next=4,r.setupProvider(t);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}]),r}(x.a);function ae(e,t){var r="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"===typeof e)return ie(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return ie(e,t)}(e))||t&&e&&"number"===typeof e.length){r&&(e=r);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,s=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return o=e.done,e},e:function(e){s=!0,i=e},f:function(){try{o||null==r.return||r.return()}finally{if(s)throw i}}}}function ie(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function oe(e){return se.apply(this,arguments)}function se(){return se=p()(g.a.mark((function t(r){var n,a,i,o,s;return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=r.privKey,a=r.getProviderEngineProxy,i=function(){return B.b.fromSecretKey(e.from(n,"hex"))},"string"===typeof n){t.next=4;break}throw k.WalletInitializationError.invalidParams("privKey must be a string");case 4:return o=i(),s={requestAccounts:function(){var e=p()(g.a.mark((function e(){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",[o.publicKey.toBase58()]);case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),getAccounts:function(){var e=p()(g.a.mark((function e(){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",[o.publicKey.toBase58()]);case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),getPrivateKey:function(){var e=p()(g.a.mark((function e(){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",n);case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),getSecretKey:function(){var e=p()(g.a.mark((function e(){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",S.a.encode(o.secretKey));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),signTransaction:function(){var e=p()(g.a.mark((function e(t){var r,n;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==(r=t.params)&&void 0!==r&&r.message){e.next=2;break}throw E.ethErrors.rpc.invalidParams("message");case 2:return(n=t.params.message).partialSign(o),e.abrupt("return",n);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),signMessage:function(){var e=p()(g.a.mark((function e(t){var r,n;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==(r=t.params)&&void 0!==r&&r.message){e.next=2;break}throw E.ethErrors.rpc.invalidParams("message");case 2:return n=I.a.sign.detached(t.params.message,o.secretKey),e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),signAndSendTransaction:function(){var e=p()(g.a.mark((function e(t){var r,n,i,s;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==(r=t.params)&&void 0!==r&&r.message){e.next=2;break}throw E.ethErrors.rpc.invalidParams("message");case 2:if(n=a()){e.next=5;break}throw E.ethErrors.provider.custom({message:"Provider is not initialized",code:4902});case 5:return(i=t.params.message).sign(o),e.next=9,n.request({method:"sendTransaction",params:[S.a.encode(i.serialize())]});case 9:return s=e.sent,e.abrupt("return",{signature:s});case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),signAllTransactions:function(){var e=p()(g.a.mark((function e(t){var r,n,a,i,s,u,c;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==(r=t.params)&&void 0!==r&&r.message&&null!==(n=t.params)&&void 0!==n&&n.message.length){e.next=2;break}throw E.ethErrors.rpc.invalidParams("message");case 2:i=null===(a=t.params)||void 0===a?void 0:a.message,s=ae(i||[]);try{for(s.s();!(u=s.n()).done;)c=u.value,c.partialSign(o)}catch(f){s.e(f)}finally{s.f()}return e.abrupt("return",i);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},t.abrupt("return",s);case 7:case"end":return t.stop()}}),t)}))),se.apply(this,arguments)}function ue(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function ce(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ue(Object(r),!0).forEach((function(t){b()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ue(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function fe(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=h()(e);if(t){var a=h()(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return f()(this,r)}}var le=function(e){u()(r,e);var t=fe(r);function r(e){var n=e.config,i=e.state;return a()(this,r),t.call(this,{config:{chainConfig:ce(ce({},n.chainConfig),{},{chainNamespace:k.CHAIN_NAMESPACES.SOLANA})},state:i})}return o()(r,[{key:"enable",value:function(){var e=p()(g.a.mark((function e(){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.state.privateKey){e.next=2;break}throw E.ethErrors.provider.custom({message:"Private key is not found in state, plz pass it in constructor state param",code:4902});case 2:return e.next=4,this.setupProvider(this.state.privateKey);case 4:return e.abrupt("return",this._providerEngineProxy.request({method:"eth_accounts"}));case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setupProvider",value:function(){var e=p()(g.a.mark((function e(t){var r,n,a,i,o,s;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,oe({privKey:t,getProviderEngineProxy:this.getProviderEngineProxy.bind(this)});case 2:return r=e.sent,n=N(r),a=new w.a,i=T(this.config.chainConfig),o=i.networkMiddleware,a.push(this.getChainSwitchMiddleware()),a.push(this.getAccountMiddleware()),a.push(n),a.push(o),s=Object(m.d)(a),this.updateProviderEngineProxy(s),e.next=14,this.lookupNetwork();case 14:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"updateAccount",value:function(){var e=p()(g.a.mark((function e(t){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this._providerEngineProxy){e.next=2;break}throw E.ethErrors.provider.custom({message:"Provider is not initialized",code:4902});case 2:return e.next=4,this._providerEngineProxy.request({method:"solanaPrivateKey"});case 4:if(e.sent===t.privateKey){e.next=14;break}return e.next=8,this.setupProvider(t.privateKey);case 8:return e.t0=this._providerEngineProxy,e.next=11,this._providerEngineProxy.request({method:"requestAccounts"});case 11:e.t1=e.sent,e.t2={accounts:e.t1},e.t0.emit.call(e.t0,"accountsChanged",e.t2);case 14:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"switchChain",value:function(){var e=p()(g.a.mark((function e(t){var r,n;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this._providerEngineProxy){e.next=2;break}throw E.ethErrors.provider.custom({message:"Provider is not initialized",code:4902});case 2:return r=this.getChainConfig(t.chainId),this.update({chainId:"loading"}),this.configure({chainConfig:r}),e.next=7,this._providerEngineProxy.request({method:"solanaPrivateKey"});case 7:return n=e.sent,e.next=10,this.setupProvider(n);case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"lookupNetwork",value:function(){var e=p()(g.a.mark((function e(){var t,r;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this._providerEngineProxy){e.next=2;break}throw E.ethErrors.provider.custom({message:"Provider is not initialized",code:4902});case 2:return e.next=4,this._providerEngineProxy.request({method:"getHealth",params:[]});case 4:if(t=e.sent,r=this.config.chainConfig,"ok"===t){e.next=8;break}throw k.WalletInitializationError.rpcConnectionError("Failed to lookup network for following rpc target: ".concat(r.rpcTarget));case 8:return this.update({chainId:r.chainId}),this.state.chainId!==r.chainId&&(this.provider.emit("chainChanged",this.state.chainId),this.provider.emit("connect",{chainId:this.state.chainId})),e.abrupt("return",this.state.chainId);case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getChainSwitchMiddleware",value:function(){var e=this,t={addNewChainConfig:function(){var t=p()(g.a.mark((function t(r){var n,a,i,o,s,u;return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r.params){t.next=2;break}throw E.ethErrors.rpc.invalidParams("Missing request params");case 2:if(n=r.params,a=n.chainId,i=n.chainName,o=n.rpcUrls,s=n.blockExplorerUrls,u=n.nativeCurrency,a){t.next=5;break}throw E.ethErrors.rpc.invalidParams("Missing chainId in chainParams");case 5:if(o&&0!==o.length){t.next=7;break}throw E.ethErrors.rpc.invalidParams("Missing rpcUrls in chainParams");case 7:if(u){t.next=9;break}throw E.ethErrors.rpc.invalidParams("Missing nativeCurrency in chainParams");case 9:e.addChain({chainNamespace:k.CHAIN_NAMESPACES.SOLANA,chainId:a,ticker:(null===u||void 0===u?void 0:u.symbol)||"SOL",tickerName:(null===u||void 0===u?void 0:u.name)||"Solana",displayName:i,rpcTarget:o[0],blockExplorer:(null===s||void 0===s?void 0:s[0])||""});case 10:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),switchSolanaChain:function(){var t=p()(g.a.mark((function t(r){return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r.params){t.next=2;break}throw E.ethErrors.rpc.invalidParams("Missing request params");case 2:if(r.params.chainId){t.next=4;break}throw E.ethErrors.rpc.invalidParams("Missing chainId");case 4:return t.next=6,e.switchChain(r.params);case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()};return function(e){var t=e.addNewChainConfig,r=e.switchSolanaChain;return Object(w.i)([R("addSolanaChain",t),R("switchSolanaChain",r)])}(t)}},{key:"getAccountMiddleware",value:function(){var e=this,t={updatePrivatekey:function(){var t=p()(g.a.mark((function t(r){var n;return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r.params){t.next=2;break}throw E.ethErrors.rpc.invalidParams("Missing request params");case 2:if(r.params.privateKey){t.next=4;break}throw E.ethErrors.rpc.invalidParams("Missing privateKey");case 4:return n=r.params.privateKey,t.next=7,e.updateAccount({privateKey:n});case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()};return function(e){var t=e.updatePrivatekey;return Object(w.i)([R("updateAccount",t)])}(t)}}]),r}(x.a);b()(le,"getProviderInstance",function(){var e=p()(g.a.mark((function e(t){var r;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=new le({config:{chainConfig:t.chainConfig}}),e.next=3,r.setupProvider(t.privKey);case 3:return e.abrupt("return",r);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());var he=function(){function e(t){a()(this,e),b()(this,"provider",void 0),this.provider=t}return o()(e,[{key:"requestAccounts",value:function(){var e=p()(g.a.mark((function e(){var t;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.provider.request({method:"requestAccounts",params:{}});case 2:return t=e.sent,e.abrupt("return",t);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"signAndSendTransaction",value:function(){var e=p()(g.a.mark((function e(t){var r,n;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.provider.request({method:"signAndSendTransaction",params:{message:t}});case 2:return r=e.sent,n=r.signature,e.abrupt("return",{signature:n});case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"signTransaction",value:function(){var e=p()(g.a.mark((function e(t){var r;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.provider.request({method:"signTransaction",params:{message:t}});case 2:return r=e.sent,e.abrupt("return",r);case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"signAllTransactions",value:function(){var e=p()(g.a.mark((function e(t){var r;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.provider.request({method:"signAllTransactions",params:{message:t}});case 2:return r=e.sent,e.abrupt("return",r);case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"signMessage",value:function(){var e=p()(g.a.mark((function e(t){var r;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.provider.request({method:"signMessage",params:{message:t}});case 2:return r=e.sent,e.abrupt("return",r);case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"request",value:function(){var e=p()(g.a.mark((function e(t){var r;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.provider.request(t);case 2:return r=e.sent,e.abrupt("return",r);case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}()}.call(this,r(21).Buffer)},1076:function(e,t,r){"use strict";var n=r(56).default;Object.defineProperty(t,"__esModule",{value:!0}),t.validateObject=t.createHmacDrbg=t.bitMask=t.bitSet=t.bitGet=t.bitLen=t.utf8ToBytes=t.equalBytes=t.concatBytes=t.ensureBytes=t.numberToVarBytesBE=t.numberToBytesLE=t.numberToBytesBE=t.bytesToNumberLE=t.bytesToNumberBE=t.hexToBytes=t.hexToNumber=t.numberToHexUnpadded=t.bytesToHex=void 0;var a=BigInt(0),i=BigInt(1),o=BigInt(2),s=function(e){return e instanceof Uint8Array},u=Array.from({length:256},(function(e,t){return t.toString(16).padStart(2,"0")}));function c(e){if(!s(e))throw new Error("Uint8Array expected");for(var t="",r=0;r<e.length;r++)t+=u[e[r]];return t}function f(e){var t=e.toString(16);return 1&t.length?"0".concat(t):t}function l(e){if("string"!==typeof e)throw new Error("hex string expected, got "+typeof e);return BigInt(""===e?"0":"0x".concat(e))}function h(e){if("string"!==typeof e)throw new Error("hex string expected, got "+typeof e);var t=e.length;if(t%2)throw new Error("padded hex string expected, got unpadded hex of length "+t);for(var r=new Uint8Array(t/2),n=0;n<r.length;n++){var a=2*n,i=e.slice(a,a+2),o=Number.parseInt(i,16);if(Number.isNaN(o)||o<0)throw new Error("Invalid byte sequence");r[n]=o}return r}function d(e,t){return h(e.toString(16).padStart(2*t,"0"))}function p(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var n=new Uint8Array(t.reduce((function(e,t){return e+t.length}),0)),a=0;return t.forEach((function(e){if(!s(e))throw new Error("Uint8Array expected");n.set(e,a),a+=e.length})),n}t.bytesToHex=c,t.numberToHexUnpadded=f,t.hexToNumber=l,t.hexToBytes=h,t.bytesToNumberBE=function(e){return l(c(e))},t.bytesToNumberLE=function(e){if(!s(e))throw new Error("Uint8Array expected");return l(c(Uint8Array.from(e).reverse()))},t.numberToBytesBE=d,t.numberToBytesLE=function(e,t){return d(e,t).reverse()},t.numberToVarBytesBE=function(e){return h(f(e))},t.ensureBytes=function(e,t,r){var n;if("string"===typeof t)try{n=h(t)}catch(i){throw new Error("".concat(e,' must be valid hex string, got "').concat(t,'". Cause: ').concat(i))}else{if(!s(t))throw new Error("".concat(e," must be hex string or Uint8Array"));n=Uint8Array.from(t)}var a=n.length;if("number"===typeof r&&a!==r)throw new Error("".concat(e," expected ").concat(r," bytes, got ").concat(a));return n},t.concatBytes=p,t.equalBytes=function(e,t){if(e.length!==t.length)return!1;for(var r=0;r<e.length;r++)if(e[r]!==t[r])return!1;return!0},t.utf8ToBytes=function(e){if("string"!==typeof e)throw new Error("utf8ToBytes expected string, got ".concat(typeof e));return new Uint8Array((new TextEncoder).encode(e))},t.bitLen=function(e){var t;for(t=0;e>a;e>>=i,t+=1);return t},t.bitGet=function(e,t){return e>>BigInt(t)&i};t.bitSet=function(e,t,r){return e|(r?i:a)<<BigInt(t)};t.bitMask=function(e){return(o<<BigInt(e-1))-i};var v=function(e){return new Uint8Array(e)},b=function(e){return Uint8Array.from(e)};t.createHmacDrbg=function(e,t,r){if("number"!==typeof e||e<2)throw new Error("hashLen must be a number");if("number"!==typeof t||t<2)throw new Error("qByteLen must be a number");if("function"!==typeof r)throw new Error("hmacFn must be a function");var n=v(e),a=v(e),i=0,o=function(){n.fill(1),a.fill(0),i=0},s=function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return r.apply(void 0,[a,n].concat(t))},u=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:v();a=s(b([0]),e),n=s(),0!==e.length&&(a=s(b([1]),e),n=s())},c=function(){if(i++>=1e3)throw new Error("drbg: tried 1000 values");for(var e=0,r=[];e<t;){var a=(n=s()).slice();r.push(a),e+=n.length}return p.apply(void 0,r)};return function(e,t){o(),u(e);for(var r=void 0;!(r=t(c()));)u();return o(),r}};var y={bigint:function(e){return"bigint"===typeof e},function:function(e){return"function"===typeof e},boolean:function(e){return"boolean"===typeof e},string:function(e){return"string"===typeof e},stringOrUint8Array:function(e){return"string"===typeof e||e instanceof Uint8Array},isSafeInteger:function(e){return Number.isSafeInteger(e)},array:function(e){return Array.isArray(e)},field:function(e,t){return t.Fp.isValid(e)},hash:function(e){return"function"===typeof e&&Number.isSafeInteger(e.outputLen)}};t.validateObject=function(e,t){for(var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=function(t,r,n){var a=y[r];if("function"!==typeof a)throw new Error('Invalid validator "'.concat(r,'", expected function'));var i=e[t];if((!n||void 0!==i)&&!a(i,e))throw new Error("Invalid param ".concat(String(t),"=").concat(i," (").concat(typeof i,"), expected ").concat(r))},i=0,o=Object.entries(t);i<o.length;i++){var s=n(o[i],2);a(s[0],s[1],!1)}for(var u=0,c=Object.entries(r);u<c.length;u++){var f=n(c[u],2);a(f[0],f[1],!0)}return e}},1077:function(e,t,r){"use strict";var n=r(18).default,a=r(19).default,i=r(49).default,o=r(12).default;Object.defineProperty(t,"__esModule",{value:!0}),t.randomBytes=t.wrapXOFConstructorWithOpts=t.wrapConstructorWithOpts=t.wrapConstructor=t.checkOpts=t.Hash=t.concatBytes=t.toBytes=t.utf8ToBytes=t.asyncLoop=t.nextTick=t.hexToBytes=t.bytesToHex=t.isLE=t.rotr=t.createView=t.u32=t.u8=void 0;var s=r(1102),u=function(e){return e instanceof Uint8Array};t.u8=function(e){return new Uint8Array(e.buffer,e.byteOffset,e.byteLength)};t.u32=function(e){return new Uint32Array(e.buffer,e.byteOffset,Math.floor(e.byteLength/4))};t.createView=function(e){return new DataView(e.buffer,e.byteOffset,e.byteLength)};if(t.rotr=function(e,t){return e<<32-t|e>>>t},t.isLE=68===new Uint8Array(new Uint32Array([287454020]).buffer)[0],!t.isLE)throw new Error("Non little-endian hardware is not supported");var c=Array.from({length:256},(function(e,t){return t.toString(16).padStart(2,"0")}));t.bytesToHex=function(e){if(!u(e))throw new Error("Uint8Array expected");for(var t="",r=0;r<e.length;r++)t+=c[e[r]];return t},t.hexToBytes=function(e){if("string"!==typeof e)throw new Error("hex string expected, got "+typeof e);var t=e.length;if(t%2)throw new Error("padded hex string expected, got unpadded hex of length "+t);for(var r=new Uint8Array(t/2),n=0;n<r.length;n++){var a=2*n,i=e.slice(a,a+2),o=Number.parseInt(i,16);if(Number.isNaN(o)||o<0)throw new Error("Invalid byte sequence");r[n]=o}return r};var f=function(){var e=o(i().mark((function e(){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();function l(){return(l=o(i().mark((function e(r,n,a){var o,s,u;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:o=Date.now(),s=0;case 2:if(!(s<r)){e.next=13;break}if(a(s),!((u=Date.now()-o)>=0&&u<n)){e.next=7;break}return e.abrupt("continue",10);case 7:return e.next=9,(0,t.nextTick)();case 9:o+=u;case 10:s++,e.next=2;break;case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function h(e){if("string"!==typeof e)throw new Error("utf8ToBytes expected string, got ".concat(typeof e));return new Uint8Array((new TextEncoder).encode(e))}function d(e){if("string"===typeof e&&(e=h(e)),!u(e))throw new Error("expected Uint8Array, got ".concat(typeof e));return e}t.nextTick=f,t.asyncLoop=function(e,t,r){return l.apply(this,arguments)},t.utf8ToBytes=h,t.toBytes=d,t.concatBytes=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var n=new Uint8Array(t.reduce((function(e,t){return e+t.length}),0)),a=0;return t.forEach((function(e){if(!u(e))throw new Error("Uint8Array expected");n.set(e,a),a+=e.length})),n};var p=function(){function e(){n(this,e)}return a(e,[{key:"clone",value:function(){return this._cloneInto()}}]),e}();t.Hash=p;var v={}.toString;t.checkOpts=function(e,t){if(void 0!==t&&"[object Object]"!==v.call(t))throw new Error("Options should be object or undefined");return Object.assign(e,t)},t.wrapConstructor=function(e){var t=function(t){return e().update(d(t)).digest()},r=e();return t.outputLen=r.outputLen,t.blockLen=r.blockLen,t.create=function(){return e()},t},t.wrapConstructorWithOpts=function(e){var t=function(t,r){return e(r).update(d(t)).digest()},r=e({});return t.outputLen=r.outputLen,t.blockLen=r.blockLen,t.create=function(t){return e(t)},t},t.wrapXOFConstructorWithOpts=function(e){var t=function(t,r){return e(r).update(d(t)).digest()},r=e({});return t.outputLen=r.outputLen,t.blockLen=r.blockLen,t.create=function(t){return e(t)},t},t.randomBytes=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:32;if(s.crypto&&"function"===typeof s.crypto.getRandomValues)return s.crypto.getRandomValues(new Uint8Array(e));throw new Error("crypto.getRandomValues must be defined")}},1078:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.mapHashToField=t.getMinHashLength=t.getFieldBytesLength=t.hashToPrivateScalar=t.FpSqrtEven=t.FpSqrtOdd=t.Field=t.nLength=t.FpIsSquare=t.FpDiv=t.FpInvertBatch=t.FpPow=t.validateField=t.isNegativeLE=t.FpSqrt=t.tonelliShanks=t.invert=t.pow2=t.pow=t.mod=void 0;var n=r(1076),a=BigInt(0),i=BigInt(1),o=BigInt(2),s=BigInt(3),u=BigInt(4),c=BigInt(5),f=BigInt(8);BigInt(9),BigInt(16);function l(e,t){var r=e%t;return r>=a?r:t+r}function h(e,t,r){if(r<=a||t<a)throw new Error("Expected power/modulo > 0");if(r===i)return a;for(var n=i;t>a;)t&i&&(n=n*e%r),e=e*e%r,t>>=i;return n}function d(e,t){if(e===a||t<=a)throw new Error("invert: expected positive integers, got n=".concat(e," mod=").concat(t));for(var r=l(e,t),n=t,o=a,s=i,u=i,c=a;r!==a;){var f=n/r,h=n%r,d=o-u*f,p=s-c*f;n=r,r=h,o=u,s=c,u=d,c=p}if(n!==i)throw new Error("invert: does not exist");return l(o,t)}function p(e){var t,r,n,s=(e-i)/o;for(t=e-i,r=0;t%o===a;t/=o,r++);for(n=o;n<e&&h(n,s,e)!==e-i;n++);if(1===r){var c=(e+i)/u;return function(e,t){var r=e.pow(t,c);if(!e.eql(e.sqr(r),t))throw new Error("Cannot find square root");return r}}var f=(t+i)/o;return function(e,a){if(e.pow(a,s)===e.neg(e.ONE))throw new Error("Cannot find square root");for(var o=r,u=e.pow(e.mul(e.ONE,n),t),c=e.pow(a,f),l=e.pow(a,t);!e.eql(l,e.ONE);){if(e.eql(l,e.ZERO))return e.ZERO;for(var h=1,d=e.sqr(l);h<o&&!e.eql(d,e.ONE);h++)d=e.sqr(d);var p=e.pow(u,i<<BigInt(o-h-1));u=e.sqr(p),c=e.mul(c,p),l=e.mul(l,u),o=h}return c}}function v(e){if(e%u===s){var t=(e+i)/u;return function(e,r){var n=e.pow(r,t);if(!e.eql(e.sqr(n),r))throw new Error("Cannot find square root");return n}}if(e%f===c){var r=(e-c)/f;return function(e,t){var n=e.mul(t,o),a=e.pow(n,r),i=e.mul(t,a),s=e.mul(e.mul(i,o),a),u=e.mul(i,e.sub(s,e.ONE));if(!e.eql(e.sqr(u),t))throw new Error("Cannot find square root");return u}}return p(e)}t.mod=l,t.pow=h,t.pow2=function(e,t,r){for(var n=e;t-- >a;)n*=n,n%=r;return n},t.invert=d,t.tonelliShanks=p,t.FpSqrt=v;t.isNegativeLE=function(e,t){return(l(e,t)&i)===i};var b=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function y(e,t,r){if(r<a)throw new Error("Expected power > 0");if(r===a)return e.ONE;if(r===i)return t;for(var n=e.ONE,o=t;r>a;)r&i&&(n=e.mul(n,o)),o=e.sqr(o),r>>=i;return n}function g(e,t){var r=new Array(t.length),n=t.reduce((function(t,n,a){return e.is0(n)?t:(r[a]=t,e.mul(t,n))}),e.ONE),a=e.inv(n);return t.reduceRight((function(t,n,a){return e.is0(n)?t:(r[a]=e.mul(t,r[a]),e.mul(t,n))}),a),r}function m(e,t){var r=void 0!==t?t:e.toString(2).length;return{nBitLength:r,nByteLength:Math.ceil(r/8)}}function w(e){if("bigint"!==typeof e)throw new Error("field order must be bigint");var t=e.toString(2).length;return Math.ceil(t/8)}function k(e){var t=w(e);return t+Math.ceil(t/2)}t.validateField=function(e){var t=b.reduce((function(e,t){return e[t]="function",e}),{ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"});return(0,n.validateObject)(e,t)},t.FpPow=y,t.FpInvertBatch=g,t.FpDiv=function(e,t,r){return e.mul(t,"bigint"===typeof r?d(r,e.ORDER):e.inv(r))},t.FpIsSquare=function(e){var t=(e.ORDER-i)/o;return function(r){var n=e.pow(r,t);return e.eql(n,e.ZERO)||e.eql(n,e.ONE)}},t.nLength=m,t.Field=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};if(e<=a)throw new Error("Expected Field ORDER > 0, got ".concat(e));var s=m(e,t),u=s.nBitLength,c=s.nByteLength;if(c>2048)throw new Error("Field lengths over 2048 bytes are not supported");var f=v(e),h=Object.freeze({ORDER:e,BITS:u,BYTES:c,MASK:(0,n.bitMask)(u),ZERO:a,ONE:i,create:function(t){return l(t,e)},isValid:function(t){if("bigint"!==typeof t)throw new Error("Invalid field element: expected bigint, got ".concat(typeof t));return a<=t&&t<e},is0:function(e){return e===a},isOdd:function(e){return(e&i)===i},neg:function(t){return l(-t,e)},eql:function(e,t){return e===t},sqr:function(t){return l(t*t,e)},add:function(t,r){return l(t+r,e)},sub:function(t,r){return l(t-r,e)},mul:function(t,r){return l(t*r,e)},pow:function(e,t){return y(h,e,t)},div:function(t,r){return l(t*d(r,e),e)},sqrN:function(e){return e*e},addN:function(e,t){return e+t},subN:function(e,t){return e-t},mulN:function(e,t){return e*t},inv:function(t){return d(t,e)},sqrt:o.sqrt||function(e){return f(h,e)},invertBatch:function(e){return g(h,e)},cmov:function(e,t,r){return r?t:e},toBytes:function(e){return r?(0,n.numberToBytesLE)(e,c):(0,n.numberToBytesBE)(e,c)},fromBytes:function(e){if(e.length!==c)throw new Error("Fp.fromBytes: expected ".concat(c,", got ").concat(e.length));return r?(0,n.bytesToNumberLE)(e):(0,n.bytesToNumberBE)(e)}});return Object.freeze(h)},t.FpSqrtOdd=function(e,t){if(!e.isOdd)throw new Error("Field doesn't have isOdd");var r=e.sqrt(t);return e.isOdd(r)?r:e.neg(r)},t.FpSqrtEven=function(e,t){if(!e.isOdd)throw new Error("Field doesn't have isOdd");var r=e.sqrt(t);return e.isOdd(r)?e.neg(r):r},t.hashToPrivateScalar=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],a=(e=(0,n.ensureBytes)("privateHash",e)).length,o=m(t).nByteLength+8;if(o<24||a<o||a>1024)throw new Error("hashToPrivateScalar: expected ".concat(o,"-1024 bytes of input, got ").concat(a));return l(r?(0,n.bytesToNumberLE)(e):(0,n.bytesToNumberBE)(e),t-i)+i},t.getFieldBytesLength=w,t.getMinHashLength=k,t.mapHashToField=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],a=e.length,o=w(t),s=k(t);if(a<16||a<s||a>1024)throw new Error("expected ".concat(s,"-1024 bytes of input, got ").concat(a));var u=l(r?(0,n.bytesToNumberBE)(e):(0,n.bytesToNumberLE)(e),t-i)+i;return r?(0,n.numberToBytesLE)(u,o):(0,n.numberToBytesBE)(u,o)}},1079:function(e,t,r){var n=r(1092);e.exports=n("123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz")},1080:function(e,t,r){"use strict";function n(e){if(!Number.isSafeInteger(e)||e<0)throw new Error("Wrong positive integer: ".concat(e))}function a(e){if("boolean"!==typeof e)throw new Error("Expected boolean, not ".concat(e))}function i(e){if(!(e instanceof Uint8Array))throw new Error("Expected Uint8Array");for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];if(r.length>0&&!r.includes(e.length))throw new Error("Expected Uint8Array of length ".concat(r,", not of length=").concat(e.length))}function o(e){if("function"!==typeof e||"function"!==typeof e.create)throw new Error("Hash should be wrapped by utils.wrapConstructor");n(e.outputLen),n(e.blockLen)}function s(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(e.destroyed)throw new Error("Hash instance has been destroyed");if(t&&e.finished)throw new Error("Hash#digest() has already been called")}function u(e,t){i(e);var r=t.outputLen;if(e.length<r)throw new Error("digestInto() expects output buffer of length at least ".concat(r))}Object.defineProperty(t,"__esModule",{value:!0}),t.output=t.exists=t.hash=t.bytes=t.bool=t.number=void 0,t.number=n,t.bool=a,t.bytes=i,t.hash=o,t.exists=s,t.output=u;var c={number:n,bool:a,bytes:i,hash:o,exists:s,output:u};t.default=c},1081:function(e,t,r){"use strict";var n=r(57).default,a=r(23).default,i=r(22).default,o=r(72).default,s=r(24).default,u=r(45).default,c=r(18).default,f=r(19).default;Object.defineProperty(t,"__esModule",{value:!0}),t.s16=t.s8=t.nu64be=t.u48be=t.u40be=t.u32be=t.u24be=t.u16be=t.nu64=t.u48=t.u40=t.u32=t.u24=t.u16=t.u8=t.offset=t.greedy=t.Constant=t.UTF8=t.CString=t.Blob=t.Boolean=t.BitField=t.BitStructure=t.VariantLayout=t.Union=t.UnionLayoutDiscriminator=t.UnionDiscriminator=t.Structure=t.Sequence=t.DoubleBE=t.Double=t.FloatBE=t.Float=t.NearInt64BE=t.NearInt64=t.NearUInt64BE=t.NearUInt64=t.IntBE=t.Int=t.UIntBE=t.UInt=t.OffsetLayout=t.GreedyCount=t.ExternalLayout=t.bindConstructorLayout=t.nameWithProperty=t.Layout=t.uint8ArrayToBuffer=t.checkUint8Array=void 0,t.constant=t.utf8=t.cstr=t.blob=t.unionLayoutDiscriminator=t.union=t.seq=t.bits=t.struct=t.f64be=t.f64=t.f32be=t.f32=t.ns64be=t.s48be=t.s40be=t.s32be=t.s24be=t.s16be=t.ns64=t.s48=t.s40=t.s32=t.s24=void 0;var l=r(21);function h(e){if(!(e instanceof Uint8Array))throw new TypeError("b must be a Uint8Array")}function d(e){return h(e),l.Buffer.from(e.buffer,e.byteOffset,e.length)}t.checkUint8Array=h,t.uint8ArrayToBuffer=d;var p=function(){function e(t,r){if(c(this,e),!Number.isInteger(t))throw new TypeError("span must be an integer");this.span=t,this.property=r}return f(e,[{key:"makeDestinationObject",value:function(){return{}}},{key:"getSpan",value:function(e,t){if(0>this.span)throw new RangeError("indeterminate span");return this.span}},{key:"replicate",value:function(e){var t=Object.create(this.constructor.prototype);return Object.assign(t,this),t.property=e,t}},{key:"fromArray",value:function(e){}}]),e}();function v(e,t){return t.property?e+"["+t.property+"]":e}t.Layout=p,t.nameWithProperty=v,t.bindConstructorLayout=function(e,t){if("function"!==typeof e)throw new TypeError("Class must be constructor");if(Object.prototype.hasOwnProperty.call(e,"layout_"))throw new Error("Class is already bound to a layout");if(!(t&&t instanceof p))throw new TypeError("layout must be a Layout");if(Object.prototype.hasOwnProperty.call(t,"boundConstructor_"))throw new Error("layout is already bound to a constructor");e.layout_=t,t.boundConstructor_=e,t.makeDestinationObject=function(){return new e},Object.defineProperty(e.prototype,"encode",{value:function(e,r){return t.encode(this,e,r)},writable:!0}),Object.defineProperty(e,"decode",{value:function(e,r){return t.decode(e,r)},writable:!0})};var b=function(e){s(r,e);var t=u(r);function r(){return c(this,r),t.apply(this,arguments)}return f(r,[{key:"isCount",value:function(){throw new Error("ExternalLayout is abstract")}}]),r}(p);t.ExternalLayout=b;var y=function(e){s(r,e);var t=u(r);function r(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,a=arguments.length>1?arguments[1]:void 0;if(c(this,r),!Number.isInteger(n)||0>=n)throw new TypeError("elementSpan must be a (positive) integer");return(e=t.call(this,-1,a)).elementSpan=n,e}return f(r,[{key:"isCount",value:function(){return!0}},{key:"decode",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;h(e);var r=e.length-t;return Math.floor(r/this.elementSpan)}},{key:"encode",value:function(e,t,r){return 0}}]),r}(b);t.GreedyCount=y;var g=function(e){s(r,e);var t=u(r);function r(e){var n,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2?arguments[2]:void 0;if(c(this,r),!(e instanceof p))throw new TypeError("layout must be a Layout");if(!Number.isInteger(a))throw new TypeError("offset must be integer or undefined");return(n=t.call(this,e.span,i||e.property)).layout=e,n.offset=a,n}return f(r,[{key:"isCount",value:function(){return this.layout instanceof m||this.layout instanceof w}},{key:"decode",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.layout.decode(e,t+this.offset)}},{key:"encode",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return this.layout.encode(e,t,r+this.offset)}}]),r}(b);t.OffsetLayout=g;var m=function(e){s(r,e);var t=u(r);function r(e,n){var a;if(c(this,r),6<(a=t.call(this,e,n)).span)throw new RangeError("span must not exceed 6 bytes");return a}return f(r,[{key:"decode",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return d(e).readUIntLE(t,this.span)}},{key:"encode",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return d(t).writeUIntLE(e,r,this.span),this.span}}]),r}(p);t.UInt=m;var w=function(e){s(r,e);var t=u(r);function r(e,n){var a;if(c(this,r),6<(a=t.call(this,e,n)).span)throw new RangeError("span must not exceed 6 bytes");return a}return f(r,[{key:"decode",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return d(e).readUIntBE(t,this.span)}},{key:"encode",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return d(t).writeUIntBE(e,r,this.span),this.span}}]),r}(p);t.UIntBE=w;var k=function(e){s(r,e);var t=u(r);function r(e,n){var a;if(c(this,r),6<(a=t.call(this,e,n)).span)throw new RangeError("span must not exceed 6 bytes");return a}return f(r,[{key:"decode",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return d(e).readIntLE(t,this.span)}},{key:"encode",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return d(t).writeIntLE(e,r,this.span),this.span}}]),r}(p);t.Int=k;var x=function(e){s(r,e);var t=u(r);function r(e,n){var a;if(c(this,r),6<(a=t.call(this,e,n)).span)throw new RangeError("span must not exceed 6 bytes");return a}return f(r,[{key:"decode",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return d(e).readIntBE(t,this.span)}},{key:"encode",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return d(t).writeIntBE(e,r,this.span),this.span}}]),r}(p);t.IntBE=x;var O=Math.pow(2,32);function S(e){var t=Math.floor(e/O);return{hi32:t,lo32:e-t*O}}function E(e,t){return e*O+t}var B=function(e){s(r,e);var t=u(r);function r(e){return c(this,r),t.call(this,8,e)}return f(r,[{key:"decode",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=d(e),n=r.readUInt32LE(t);return E(r.readUInt32LE(t+4),n)}},{key:"encode",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=S(e),a=d(t);return a.writeUInt32LE(n.lo32,r),a.writeUInt32LE(n.hi32,r+4),8}}]),r}(p);t.NearUInt64=B;var j=function(e){s(r,e);var t=u(r);function r(e){return c(this,r),t.call(this,8,e)}return f(r,[{key:"decode",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=d(e);return E(r.readUInt32BE(t),r.readUInt32BE(t+4))}},{key:"encode",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=S(e),a=d(t);return a.writeUInt32BE(n.hi32,r),a.writeUInt32BE(n.lo32,r+4),8}}]),r}(p);t.NearUInt64BE=j;var I=function(e){s(r,e);var t=u(r);function r(e){return c(this,r),t.call(this,8,e)}return f(r,[{key:"decode",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=d(e),n=r.readUInt32LE(t);return E(r.readInt32LE(t+4),n)}},{key:"encode",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=S(e),a=d(t);return a.writeUInt32LE(n.lo32,r),a.writeInt32LE(n.hi32,r+4),8}}]),r}(p);t.NearInt64=I;var A=function(e){s(r,e);var t=u(r);function r(e){return c(this,r),t.call(this,8,e)}return f(r,[{key:"decode",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=d(e);return E(r.readInt32BE(t),r.readUInt32BE(t+4))}},{key:"encode",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=S(e),a=d(t);return a.writeInt32BE(n.hi32,r),a.writeUInt32BE(n.lo32,r+4),8}}]),r}(p);t.NearInt64BE=A;var _=function(e){s(r,e);var t=u(r);function r(e){return c(this,r),t.call(this,4,e)}return f(r,[{key:"decode",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return d(e).readFloatLE(t)}},{key:"encode",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return d(t).writeFloatLE(e,r),4}}]),r}(p);t.Float=_;var P=function(e){s(r,e);var t=u(r);function r(e){return c(this,r),t.call(this,4,e)}return f(r,[{key:"decode",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return d(e).readFloatBE(t)}},{key:"encode",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return d(t).writeFloatBE(e,r),4}}]),r}(p);t.FloatBE=P;var T=function(e){s(r,e);var t=u(r);function r(e){return c(this,r),t.call(this,8,e)}return f(r,[{key:"decode",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return d(e).readDoubleLE(t)}},{key:"encode",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return d(t).writeDoubleLE(e,r),8}}]),r}(p);t.Double=T;var C=function(e){s(r,e);var t=u(r);function r(e){return c(this,r),t.call(this,8,e)}return f(r,[{key:"decode",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return d(e).readDoubleBE(t)}},{key:"encode",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return d(t).writeDoubleBE(e,r),8}}]),r}(p);t.DoubleBE=C;var L=function(e){s(r,e);var t=u(r);function r(e,n,a){var i;if(c(this,r),!(e instanceof p))throw new TypeError("elementLayout must be a Layout");if(!(n instanceof b&&n.isCount()||Number.isInteger(n)&&0<=n))throw new TypeError("count must be non-negative integer or an unsigned integer ExternalLayout");var o=-1;return!(n instanceof b)&&0<e.span&&(o=n*e.span),(i=t.call(this,o,a)).elementLayout=e,i.count=n,i}return f(r,[{key:"getSpan",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(0<=this.span)return this.span;var r=0,n=this.count;if(n instanceof b&&(n=n.decode(e,t)),0<this.elementLayout.span)r=n*this.elementLayout.span;else for(var a=0;a<n;)r+=this.elementLayout.getSpan(e,t+r),++a;return r}},{key:"decode",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=[],n=0,a=this.count;for(a instanceof b&&(a=a.decode(e,t));n<a;)r.push(this.elementLayout.decode(e,t)),t+=this.elementLayout.getSpan(e,t),n+=1;return r}},{key:"encode",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=this.elementLayout,a=e.reduce((function(e,a){return e+n.encode(a,t,r+e)}),0);return this.count instanceof b&&this.count.encode(e.length,t,r),a}}]),r}(p);t.Sequence=L;var R=function(e){s(r,e);var t=u(r);function r(e,n,a){var i;if(c(this,r),!Array.isArray(e)||!e.reduce((function(e,t){return e&&t instanceof p}),!0))throw new TypeError("fields must be array of Layout instances");"boolean"===typeof n&&void 0===a&&(a=n,n=void 0);var s,u=o(e);try{for(u.s();!(s=u.n()).done;){var f=s.value;if(0>f.span&&void 0===f.property)throw new Error("fields cannot contain unnamed variable-length layout")}}catch(h){u.e(h)}finally{u.f()}var l=-1;try{l=e.reduce((function(e,t){return e+t.getSpan()}),0)}catch(d){}return(i=t.call(this,l,n)).fields=e,i.decodePrefixes=!!a,i}return f(r,[{key:"getSpan",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(0<=this.span)return this.span;var r=0;try{r=this.fields.reduce((function(r,n){var a=n.getSpan(e,t);return t+=a,r+a}),0)}catch(n){throw new RangeError("indeterminate span")}return r}},{key:"decode",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;h(e);var r,n=this.makeDestinationObject(),a=o(this.fields);try{for(a.s();!(r=a.n()).done;){var i=r.value;if(void 0!==i.property&&(n[i.property]=i.decode(e,t)),t+=i.getSpan(e,t),this.decodePrefixes&&e.length===t)break}}catch(s){a.e(s)}finally{a.f()}return n}},{key:"encode",value:function(e,t){var r,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,a=n,i=0,s=0,u=o(this.fields);try{for(u.s();!(r=u.n()).done;){var c=r.value,f=c.span;if(s=0<f?f:0,void 0!==c.property){var l=e[c.property];void 0!==l&&(s=c.encode(l,t,n),0>f&&(f=c.getSpan(t,n)))}i=n,n+=f}}catch(h){u.e(h)}finally{u.f()}return i+s-a}},{key:"fromArray",value:function(e){var t,r=this.makeDestinationObject(),n=o(this.fields);try{for(n.s();!(t=n.n()).done;){var a=t.value;void 0!==a.property&&0<e.length&&(r[a.property]=e.shift())}}catch(i){n.e(i)}finally{n.f()}return r}},{key:"layoutFor",value:function(e){if("string"!==typeof e)throw new TypeError("property must be string");var t,r=o(this.fields);try{for(r.s();!(t=r.n()).done;){var n=t.value;if(n.property===e)return n}}catch(a){r.e(a)}finally{r.f()}}},{key:"offsetOf",value:function(e){if("string"!==typeof e)throw new TypeError("property must be string");var t,r=0,n=o(this.fields);try{for(n.s();!(t=n.n()).done;){var a=t.value;if(a.property===e)return r;0>a.span?r=-1:0<=r&&(r+=a.span)}}catch(i){n.e(i)}finally{n.f()}}}]),r}(p);t.Structure=R;var N=function(){function e(t){c(this,e),this.property=t}return f(e,[{key:"decode",value:function(e,t){throw new Error("UnionDiscriminator is abstract")}},{key:"encode",value:function(e,t,r){throw new Error("UnionDiscriminator is abstract")}}]),e}();t.UnionDiscriminator=N;var U=function(e){s(r,e);var t=u(r);function r(e,n){var a;if(c(this,r),!(e instanceof b&&e.isCount()))throw new TypeError("layout must be an unsigned integer ExternalLayout");return(a=t.call(this,n||e.property||"variant")).layout=e,a}return f(r,[{key:"decode",value:function(e,t){return this.layout.decode(e,t)}},{key:"encode",value:function(e,t,r){return this.layout.encode(e,t,r)}}]),r}(N);t.UnionLayoutDiscriminator=U;var q=function(e){s(r,e);var t=u(r);function r(e,n,a){var o,s;if(c(this,r),e instanceof m||e instanceof w)s=new U(new g(e));else if(e instanceof b&&e.isCount())s=new U(e);else{if(!(e instanceof N))throw new TypeError("discr must be a UnionDiscriminator or an unsigned integer layout");s=e}if(void 0===n&&(n=null),!(null===n||n instanceof p))throw new TypeError("defaultLayout must be null or a Layout");if(null!==n){if(0>n.span)throw new Error("defaultLayout must have constant span");void 0===n.property&&(n=n.replicate("content"))}var u=-1;n&&0<=(u=n.span)&&(e instanceof m||e instanceof w)&&(u+=s.layout.span),(o=t.call(this,u,a)).discriminator=s,o.usesPrefixDiscriminator=e instanceof m||e instanceof w,o.defaultLayout=n,o.registry={};var f=o.defaultGetSourceVariant.bind(i(o));return o.getSourceVariant=function(e){return f(e)},o.configGetSourceVariant=function(e){f=e.bind(this)},o}return f(r,[{key:"getSpan",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(0<=this.span)return this.span;var r=this.getVariant(e,t);if(!r)throw new Error("unable to determine span for unrecognized variant");return r.getSpan(e,t)}},{key:"defaultGetSourceVariant",value:function(e){if(Object.prototype.hasOwnProperty.call(e,this.discriminator.property)){if(this.defaultLayout&&this.defaultLayout.property&&Object.prototype.hasOwnProperty.call(e,this.defaultLayout.property))return;var t=this.registry[e[this.discriminator.property]];if(t&&(!t.layout||t.property&&Object.prototype.hasOwnProperty.call(e,t.property)))return t}else for(var r in this.registry){var n=this.registry[r];if(n.property&&Object.prototype.hasOwnProperty.call(e,n.property))return n}throw new Error("unable to infer src variant")}},{key:"decode",value:function(e){var t,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=this.discriminator,a=n.decode(e,r),i=this.registry[a];if(void 0===i){var o=this.defaultLayout,s=0;this.usesPrefixDiscriminator&&(s=n.layout.span),(t=this.makeDestinationObject())[n.property]=a,t[o.property]=o.decode(e,r+s)}else t=i.decode(e,r);return t}},{key:"encode",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=this.getSourceVariant(e);if(void 0===n){var a=this.discriminator,i=this.defaultLayout,o=0;return this.usesPrefixDiscriminator&&(o=a.layout.span),a.encode(e[a.property],t,r),o+i.encode(e[i.property],t,r+o)}return n.encode(e,t,r)}},{key:"addVariant",value:function(e,t,r){var n=new z(this,e,t,r);return this.registry[e]=n,n}},{key:"getVariant",value:function(e){var t,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return t=e instanceof Uint8Array?this.discriminator.decode(e,r):e,this.registry[t]}}]),r}(p);t.Union=q;var z=function(e){s(r,e);var t=u(r);function r(e,n,a,i){var o;if(c(this,r),!(e instanceof q))throw new TypeError("union must be a Union");if(!Number.isInteger(n)||0>n)throw new TypeError("variant must be a (non-negative) integer");if("string"===typeof a&&void 0===i&&(i=a,a=null),a){if(!(a instanceof p))throw new TypeError("layout must be a Layout");if(null!==e.defaultLayout&&0<=a.span&&a.span>e.defaultLayout.span)throw new Error("variant span exceeds span of containing union");if("string"!==typeof i)throw new TypeError("variant must have a String property")}var s=e.span;return 0>e.span&&0<=(s=a?a.span:0)&&e.usesPrefixDiscriminator&&(s+=e.discriminator.layout.span),(o=t.call(this,s,i)).union=e,o.variant=n,o.layout=a||null,o}return f(r,[{key:"getSpan",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(0<=this.span)return this.span;var r=0;this.union.usesPrefixDiscriminator&&(r=this.union.discriminator.layout.span);var n=0;return this.layout&&(n=this.layout.getSpan(e,t+r)),r+n}},{key:"decode",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=this.makeDestinationObject();if(this!==this.union.getVariant(e,t))throw new Error("variant mismatch");var n=0;return this.union.usesPrefixDiscriminator&&(n=this.union.discriminator.layout.span),this.layout?r[this.property]=this.layout.decode(e,t+n):this.property?r[this.property]=!0:this.union.usesPrefixDiscriminator&&(r[this.union.discriminator.property]=this.variant),r}},{key:"encode",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=0;if(this.union.usesPrefixDiscriminator&&(n=this.union.discriminator.layout.span),this.layout&&!Object.prototype.hasOwnProperty.call(e,this.property))throw new TypeError("variant lacks property "+this.property);this.union.discriminator.encode(this.variant,t,r);var a=n;if(this.layout&&(this.layout.encode(e[this.property],t,r+n),a+=this.layout.getSpan(t,r+n),0<=this.union.span&&a>this.union.span))throw new Error("encoded variant overruns containing union");return a}},{key:"fromArray",value:function(e){if(this.layout)return this.layout.fromArray(e)}}]),r}(p);function W(e){return 0>e&&(e+=4294967296),e}t.VariantLayout=z;var H=function(e){s(r,e);var t=u(r);function r(e,n,a){var i;if(c(this,r),!(e instanceof m||e instanceof w))throw new TypeError("word must be a UInt or UIntBE layout");if("string"===typeof n&&void 0===a&&(a=n,n=!1),4<e.span)throw new RangeError("word cannot exceed 32 bits");(i=t.call(this,e.span,a)).word=e,i.msb=!!n,i.fields=[];var o=0;return i._packedSetValue=function(e){return o=W(e),this},i._packedGetValue=function(){return o},i}return f(r,[{key:"decode",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=this.makeDestinationObject(),n=this.word.decode(e,t);this._packedSetValue(n);var a,i=o(this.fields);try{for(i.s();!(a=i.n()).done;){var s=a.value;void 0!==s.property&&(r[s.property]=s.decode(e))}}catch(u){i.e(u)}finally{i.f()}return r}},{key:"encode",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=this.word.decode(t,r);this._packedSetValue(n);var a,i=o(this.fields);try{for(i.s();!(a=i.n()).done;){var s=a.value;if(void 0!==s.property){var u=e[s.property];void 0!==u&&s.encode(u)}}}catch(c){i.e(c)}finally{i.f()}return this.word.encode(this._packedGetValue(),t,r)}},{key:"addField",value:function(e,t){var r=new K(this,e,t);return this.fields.push(r),r}},{key:"addBoolean",value:function(e){var t=new M(this,e);return this.fields.push(t),t}},{key:"fieldFor",value:function(e){if("string"!==typeof e)throw new TypeError("property must be string");var t,r=o(this.fields);try{for(r.s();!(t=r.n()).done;){var n=t.value;if(n.property===e)return n}}catch(a){r.e(a)}finally{r.f()}}}]),r}(p);t.BitStructure=H;var K=function(){function e(t,r,n){if(c(this,e),!(t instanceof H))throw new TypeError("container must be a BitStructure");if(!Number.isInteger(r)||0>=r)throw new TypeError("bits must be positive integer");var a=8*t.span,i=t.fields.reduce((function(e,t){return e+t.bits}),0);if(r+i>a)throw new Error("bits too long for span remainder ("+(a-i)+" of "+a+" remain)");this.container=t,this.bits=r,this.valueMask=(1<<r)-1,32===r&&(this.valueMask=4294967295),this.start=i,this.container.msb&&(this.start=a-i-r),this.wordMask=W(this.valueMask<<this.start),this.property=n}return f(e,[{key:"decode",value:function(e,t){return W(this.container._packedGetValue()&this.wordMask)>>>this.start}},{key:"encode",value:function(e){if("number"!==typeof e||!Number.isInteger(e)||e!==W(e&this.valueMask))throw new TypeError(v("BitField.encode",this)+" value must be integer not exceeding "+this.valueMask);var t=this.container._packedGetValue(),r=W(e<<this.start);this.container._packedSetValue(W(t&~this.wordMask)|r)}}]),e}();t.BitField=K;var M=function(e){s(r,e);var t=u(r);function r(e,n){return c(this,r),t.call(this,e,1,n)}return f(r,[{key:"decode",value:function(e,t){return!!n(a(r.prototype),"decode",this).call(this,e,t)}},{key:"encode",value:function(e){"boolean"===typeof e&&(e=+e),n(a(r.prototype),"encode",this).call(this,e)}}]),r}(K);t.Boolean=M;var D=function(e){s(r,e);var t=u(r);function r(e,n){var a;if(c(this,r),!(e instanceof b&&e.isCount()||Number.isInteger(e)&&0<=e))throw new TypeError("length must be positive integer or an unsigned integer ExternalLayout");var i=-1;return e instanceof b||(i=e),(a=t.call(this,i,n)).length=e,a}return f(r,[{key:"getSpan",value:function(e,t){var r=this.span;return 0>r&&(r=this.length.decode(e,t)),r}},{key:"decode",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=this.span;return 0>r&&(r=this.length.decode(e,t)),d(e).slice(t,t+r)}},{key:"encode",value:function(e,t,r){var n=this.length;if(this.length instanceof b&&(n=e.length),!(e instanceof Uint8Array&&n===e.length))throw new TypeError(v("Blob.encode",this)+" requires (length "+n+") Uint8Array as src");if(r+n>t.length)throw new RangeError("encoding overruns Uint8Array");var a=d(e);return d(t).write(a.toString("hex"),r,n,"hex"),this.length instanceof b&&this.length.encode(n,t,r),n}}]),r}(p);t.Blob=D;var F=function(e){s(r,e);var t=u(r);function r(e){return c(this,r),t.call(this,-1,e)}return f(r,[{key:"getSpan",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;h(e);for(var r=t;r<e.length&&0!==e[r];)r+=1;return 1+r-t}},{key:"decode",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=this.getSpan(e,t);return d(e).slice(t,t+r-1).toString("utf-8")}},{key:"encode",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;"string"!==typeof e&&(e=String(e));var n=l.Buffer.from(e,"utf8"),a=n.length;if(r+a>t.length)throw new RangeError("encoding overruns Buffer");var i=d(t);return n.copy(i,r),i[r+a]=0,a+1}}]),r}(p);t.CString=F;var V=function(e){s(r,e);var t=u(r);function r(e,n){var a;if(c(this,r),"string"===typeof e&&void 0===n&&(n=e,e=void 0),void 0===e)e=-1;else if(!Number.isInteger(e))throw new TypeError("maxSpan must be an integer");return(a=t.call(this,-1,n)).maxSpan=e,a}return f(r,[{key:"getSpan",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return h(e),e.length-t}},{key:"decode",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=this.getSpan(e,t);if(0<=this.maxSpan&&this.maxSpan<r)throw new RangeError("text length exceeds maxSpan");return d(e).slice(t,t+r).toString("utf-8")}},{key:"encode",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;"string"!==typeof e&&(e=String(e));var n=l.Buffer.from(e,"utf8"),a=n.length;if(0<=this.maxSpan&&this.maxSpan<a)throw new RangeError("text length exceeds maxSpan");if(r+a>t.length)throw new RangeError("encoding overruns Buffer");return n.copy(d(t),r),a}}]),r}(p);t.UTF8=V;var G=function(e){s(r,e);var t=u(r);function r(e,n){var a;return c(this,r),(a=t.call(this,0,n)).value=e,a}return f(r,[{key:"decode",value:function(e,t){return this.value}},{key:"encode",value:function(e,t,r){return 0}}]),r}(p);t.Constant=G,t.greedy=function(e,t){return new y(e,t)},t.offset=function(e,t,r){return new g(e,t,r)},t.u8=function(e){return new m(1,e)},t.u16=function(e){return new m(2,e)},t.u24=function(e){return new m(3,e)},t.u32=function(e){return new m(4,e)},t.u40=function(e){return new m(5,e)},t.u48=function(e){return new m(6,e)},t.nu64=function(e){return new B(e)},t.u16be=function(e){return new w(2,e)},t.u24be=function(e){return new w(3,e)},t.u32be=function(e){return new w(4,e)},t.u40be=function(e){return new w(5,e)},t.u48be=function(e){return new w(6,e)},t.nu64be=function(e){return new j(e)},t.s8=function(e){return new k(1,e)},t.s16=function(e){return new k(2,e)},t.s24=function(e){return new k(3,e)},t.s32=function(e){return new k(4,e)},t.s40=function(e){return new k(5,e)},t.s48=function(e){return new k(6,e)},t.ns64=function(e){return new I(e)},t.s16be=function(e){return new x(2,e)},t.s24be=function(e){return new x(3,e)},t.s32be=function(e){return new x(4,e)},t.s40be=function(e){return new x(5,e)},t.s48be=function(e){return new x(6,e)},t.ns64be=function(e){return new A(e)},t.f32=function(e){return new _(e)},t.f32be=function(e){return new P(e)},t.f64=function(e){return new T(e)},t.f64be=function(e){return new C(e)},t.struct=function(e,t,r){return new R(e,t,r)},t.bits=function(e,t,r){return new H(e,t,r)},t.seq=function(e,t,r){return new L(e,t,r)},t.union=function(e,t,r){return new q(e,t,r)},t.unionLayoutDiscriminator=function(e,t){return new U(e,t)},t.blob=function(e,t){return new D(e,t)},t.cstr=function(e){return new F(e)},t.utf8=function(e,t){return new V(e,t)},t.constant=function(e,t){return new G(e,t)}},1082:function(e,t,r){"use strict";var n=Object.prototype.hasOwnProperty,a="~";function i(){}function o(e,t,r){this.fn=e,this.context=t,this.once=r||!1}function s(e,t,r,n,i){if("function"!==typeof r)throw new TypeError("The listener must be a function");var s=new o(r,n||e,i),u=a?a+t:t;return e._events[u]?e._events[u].fn?e._events[u]=[e._events[u],s]:e._events[u].push(s):(e._events[u]=s,e._eventsCount++),e}function u(e,t){0===--e._eventsCount?e._events=new i:delete e._events[t]}function c(){this._events=new i,this._eventsCount=0}Object.create&&(i.prototype=Object.create(null),(new i).__proto__||(a=!1)),c.prototype.eventNames=function(){var e,t,r=[];if(0===this._eventsCount)return r;for(t in e=this._events)n.call(e,t)&&r.push(a?t.slice(1):t);return Object.getOwnPropertySymbols?r.concat(Object.getOwnPropertySymbols(e)):r},c.prototype.listeners=function(e){var t=a?a+e:e,r=this._events[t];if(!r)return[];if(r.fn)return[r.fn];for(var n=0,i=r.length,o=new Array(i);n<i;n++)o[n]=r[n].fn;return o},c.prototype.listenerCount=function(e){var t=a?a+e:e,r=this._events[t];return r?r.fn?1:r.length:0},c.prototype.emit=function(e,t,r,n,i,o){var s=a?a+e:e;if(!this._events[s])return!1;var u,c,f=this._events[s],l=arguments.length;if(f.fn){switch(f.once&&this.removeListener(e,f.fn,void 0,!0),l){case 1:return f.fn.call(f.context),!0;case 2:return f.fn.call(f.context,t),!0;case 3:return f.fn.call(f.context,t,r),!0;case 4:return f.fn.call(f.context,t,r,n),!0;case 5:return f.fn.call(f.context,t,r,n,i),!0;case 6:return f.fn.call(f.context,t,r,n,i,o),!0}for(c=1,u=new Array(l-1);c<l;c++)u[c-1]=arguments[c];f.fn.apply(f.context,u)}else{var h,d=f.length;for(c=0;c<d;c++)switch(f[c].once&&this.removeListener(e,f[c].fn,void 0,!0),l){case 1:f[c].fn.call(f[c].context);break;case 2:f[c].fn.call(f[c].context,t);break;case 3:f[c].fn.call(f[c].context,t,r);break;case 4:f[c].fn.call(f[c].context,t,r,n);break;default:if(!u)for(h=1,u=new Array(l-1);h<l;h++)u[h-1]=arguments[h];f[c].fn.apply(f[c].context,u)}}return!0},c.prototype.on=function(e,t,r){return s(this,e,t,r,!1)},c.prototype.once=function(e,t,r){return s(this,e,t,r,!0)},c.prototype.removeListener=function(e,t,r,n){var i=a?a+e:e;if(!this._events[i])return this;if(!t)return u(this,i),this;var o=this._events[i];if(o.fn)o.fn!==t||n&&!o.once||r&&o.context!==r||u(this,i);else{for(var s=0,c=[],f=o.length;s<f;s++)(o[s].fn!==t||n&&!o[s].once||r&&o[s].context!==r)&&c.push(o[s]);c.length?this._events[i]=1===c.length?c[0]:c:u(this,i)}return this},c.prototype.removeAllListeners=function(e){var t;return e?(t=a?a+e:e,this._events[t]&&u(this,t)):(this._events=new i,this._eventsCount=0),this},c.prototype.off=c.prototype.removeListener,c.prototype.addListener=c.prototype.on,c.prefixed=a,c.EventEmitter=c,e.exports=c},1083:function(e,t,r){"use strict";var n=r(105).default,a=r(18).default,i=r(19).default,o=r(24).default,s=r(45).default;Object.defineProperty(t,"__esModule",{value:!0}),t.SHA2=void 0;var u=r(1080),c=r(1077);var f=function(e){o(r,e);var t=s(r);function r(e,n,i,o){var s;return a(this,r),(s=t.call(this)).blockLen=e,s.outputLen=n,s.padOffset=i,s.isLE=o,s.finished=!1,s.length=0,s.pos=0,s.destroyed=!1,s.buffer=new Uint8Array(e),s.view=(0,c.createView)(s.buffer),s}return i(r,[{key:"update",value:function(e){(0,u.exists)(this);for(var t=this.view,r=this.buffer,n=this.blockLen,a=(e=(0,c.toBytes)(e)).length,i=0;i<a;){var o=Math.min(n-this.pos,a-i);if(o!==n)r.set(e.subarray(i,i+o),this.pos),this.pos+=o,i+=o,this.pos===n&&(this.process(t,0),this.pos=0);else for(var s=(0,c.createView)(e);n<=a-i;i+=n)this.process(s,i)}return this.length+=e.length,this.roundClean(),this}},{key:"digestInto",value:function(e){(0,u.exists)(this),(0,u.output)(e,this),this.finished=!0;var t=this.buffer,r=this.view,n=this.blockLen,a=this.isLE,i=this.pos;t[i++]=128,this.buffer.subarray(i).fill(0),this.padOffset>n-i&&(this.process(r,0),i=0);for(var o=i;o<n;o++)t[o]=0;!function(e,t,r,n){if("function"===typeof e.setBigUint64)return e.setBigUint64(t,r,n);var a=BigInt(32),i=BigInt(4294967295),o=Number(r>>a&i),s=Number(r&i),u=n?4:0,c=n?0:4;e.setUint32(t+u,o,n),e.setUint32(t+c,s,n)}(r,n-8,BigInt(8*this.length),a),this.process(r,0);var s=(0,c.createView)(e),f=this.outputLen;if(f%4)throw new Error("_sha2: outputLen should be aligned to 32bit");var l=f/4,h=this.get();if(l>h.length)throw new Error("_sha2: outputLen bigger than state");for(var d=0;d<l;d++)s.setUint32(4*d,h[d],a)}},{key:"digest",value:function(){var e=this.buffer,t=this.outputLen;this.digestInto(e);var r=e.slice(0,t);return this.destroy(),r}},{key:"_cloneInto",value:function(e){var t;e||(e=new this.constructor),(t=e).set.apply(t,n(this.get()));var r=this.blockLen,a=this.buffer,i=this.length,o=this.finished,s=this.destroyed,u=this.pos;return e.length=i,e.pos=u,e.finished=o,e.destroyed=s,i%r&&e.buffer.set(a),e}}]),r}(c.Hash);t.SHA2=f},1084:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.add5L=t.add5H=t.add4H=t.add4L=t.add3H=t.add3L=t.add=t.rotlBL=t.rotlBH=t.rotlSL=t.rotlSH=t.rotr32L=t.rotr32H=t.rotrBL=t.rotrBH=t.rotrSL=t.rotrSH=t.shrSL=t.shrSH=t.toBig=t.split=t.fromBig=void 0;var n=BigInt(Math.pow(2,32)-1),a=BigInt(32);function i(e){return arguments.length>1&&void 0!==arguments[1]&&arguments[1]?{h:Number(e&n),l:Number(e>>a&n)}:{h:0|Number(e>>a&n),l:0|Number(e&n)}}function o(e){for(var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=new Uint32Array(e.length),n=new Uint32Array(e.length),a=0;a<e.length;a++){var o=i(e[a],t),s=[o.h,o.l];r[a]=s[0],n[a]=s[1]}return[r,n]}t.fromBig=i,t.split=o;var s=function(e,t){return BigInt(e>>>0)<<a|BigInt(t>>>0)};t.toBig=s;var u=function(e,t,r){return e>>>r};t.shrSH=u;var c=function(e,t,r){return e<<32-r|t>>>r};t.shrSL=c;var f=function(e,t,r){return e>>>r|t<<32-r};t.rotrSH=f;var l=function(e,t,r){return e<<32-r|t>>>r};t.rotrSL=l;var h=function(e,t,r){return e<<64-r|t>>>r-32};t.rotrBH=h;var d=function(e,t,r){return e>>>r-32|t<<64-r};t.rotrBL=d;var p=function(e,t){return t};t.rotr32H=p;var v=function(e,t){return e};t.rotr32L=v;var b=function(e,t,r){return e<<r|t>>>32-r};t.rotlSH=b;var y=function(e,t,r){return t<<r|e>>>32-r};t.rotlSL=y;var g=function(e,t,r){return t<<r-32|e>>>64-r};t.rotlBH=g;var m=function(e,t,r){return e<<r-32|t>>>64-r};function w(e,t,r,n){var a=(t>>>0)+(n>>>0);return{h:e+r+(a/Math.pow(2,32)|0)|0,l:0|a}}t.rotlBL=m,t.add=w;var k=function(e,t,r){return(e>>>0)+(t>>>0)+(r>>>0)};t.add3L=k;var x=function(e,t,r,n){return t+r+n+(e/Math.pow(2,32)|0)|0};t.add3H=x;var O=function(e,t,r,n){return(e>>>0)+(t>>>0)+(r>>>0)+(n>>>0)};t.add4L=O;var S=function(e,t,r,n,a){return t+r+n+a+(e/Math.pow(2,32)|0)|0};t.add4H=S;var E=function(e,t,r,n,a){return(e>>>0)+(t>>>0)+(r>>>0)+(n>>>0)+(a>>>0)};t.add5L=E;var B=function(e,t,r,n,a,i){return t+r+n+a+i+(e/Math.pow(2,32)|0)|0};t.add5H=B;var j={fromBig:i,split:o,toBig:s,shrSH:u,shrSL:c,rotrSH:f,rotrSL:l,rotrBH:h,rotrBL:d,rotr32H:p,rotr32L:v,rotlSH:b,rotlSL:y,rotlBH:g,rotlBL:m,add:w,add3L:k,add3H:x,add4L:O,add4H:S,add5H:B,add5L:E};t.default=j},1085:function(e,t,r){"use strict";var n=r(62).default;Object.defineProperty(t,"__esModule",{value:!0}),t.validateBasic=t.wNAF=void 0;var a=r(1078),i=r(1076),o=BigInt(0),s=BigInt(1);t.wNAF=function(e,t){var r=function(e,t){var r=t.negate();return e?r:t},n=function(e){return{windows:Math.ceil(t/e)+1,windowSize:Math.pow(2,e-1)}};return{constTimeNegate:r,unsafeLadder:function(t,r){for(var n=e.ZERO,a=t;r>o;)r&s&&(n=n.add(a)),a=a.double(),r>>=s;return n},precomputeWindow:function(e,t){for(var r=n(t),a=r.windows,i=r.windowSize,o=[],s=e,u=s,c=0;c<a;c++){u=s,o.push(u);for(var f=1;f<i;f++)u=u.add(s),o.push(u);s=u.double()}return o},wNAF:function(t,a,i){for(var o=n(t),u=o.windows,c=o.windowSize,f=e.ZERO,l=e.BASE,h=BigInt(Math.pow(2,t)-1),d=Math.pow(2,t),p=BigInt(t),v=0;v<u;v++){var b=v*c,y=Number(i&h);i>>=p,y>c&&(y-=d,i+=s);var g=b,m=b+Math.abs(y)-1,w=v%2!==0,k=y<0;0===y?l=l.add(r(w,a[g])):f=f.add(r(k,a[m]))}return{p:f,f:l}},wNAFCached:function(e,t,r,n){var a=e._WINDOW_SIZE||1,i=t.get(e);return i||(i=this.precomputeWindow(e,a),1!==a&&t.set(e,n(i))),this.wNAF(a,i,r)}}},t.validateBasic=function(e){return(0,a.validateField)(e.Fp),(0,i.validateObject)(e,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze(n(n(n({},(0,a.nLength)(e.n,e.nBitLength)),e),{p:e.Fp.ORDER}))}},1086:function(e,t,r){"use strict";var n=r(62).default,a=r(56).default;Object.defineProperty(t,"__esModule",{value:!0}),t.createHasher=t.isogenyMap=t.hash_to_field=t.expand_message_xof=t.expand_message_xmd=void 0;var i=r(1078),o=r(1076);var s=o.bytesToNumberBE;function u(e,t){if(e<0||e>=1<<8*t)throw new Error("bad I2OSP call: value=".concat(e," length=").concat(t));for(var r=Array.from({length:t}).fill(0),n=t-1;n>=0;n--)r[n]=255&e,e>>>=8;return new Uint8Array(r)}function c(e,t){for(var r=new Uint8Array(e.length),n=0;n<e.length;n++)r[n]=e[n]^t[n];return r}function f(e){if(!(e instanceof Uint8Array))throw new Error("Uint8Array expected")}function l(e){if(!Number.isSafeInteger(e))throw new Error("number expected")}function h(e,t,r,n){f(e),f(t),l(r),t.length>255&&(t=n((0,o.concatBytes)((0,o.utf8ToBytes)("H2C-OVERSIZE-DST-"),t)));var a=n.outputLen,i=n.blockLen,s=Math.ceil(r/a);if(s>255)throw new Error("Invalid xmd length");var h=(0,o.concatBytes)(t,u(t.length,1)),d=u(0,i),p=u(r,2),v=new Array(s),b=n((0,o.concatBytes)(d,e,p,u(0,1),h));v[0]=n((0,o.concatBytes)(b,u(1,1),h));for(var y=1;y<=s;y++){var g=[c(b,v[y-1]),u(y+1,1),h];v[y]=n(o.concatBytes.apply(void 0,g))}return o.concatBytes.apply(void 0,v).slice(0,r)}function d(e,t,r,n,a){if(f(e),f(t),l(r),t.length>255){var i=Math.ceil(2*n/8);t=a.create({dkLen:i}).update((0,o.utf8ToBytes)("H2C-OVERSIZE-DST-")).update(t).digest()}if(r>65535||t.length>255)throw new Error("expand_message_xof: invalid lenInBytes");return a.create({dkLen:r}).update(e).update(u(r,2)).update(t).update(u(t.length,1)).digest()}function p(e,t,r){(0,o.validateObject)(r,{DST:"stringOrUint8Array",p:"bigint",m:"isSafeInteger",k:"isSafeInteger",hash:"hash"});var n=r.p,a=r.k,u=r.m,c=r.hash,p=r.expand,v=r.DST;f(e),l(t);var b,y=function(e){if(e instanceof Uint8Array)return e;if("string"===typeof e)return(0,o.utf8ToBytes)(e);throw new Error("DST must be Uint8Array or string")}(v),g=n.toString(2).length,m=Math.ceil((g+a)/8),w=t*u*m;if("xmd"===p)b=h(e,y,w,c);else if("xof"===p)b=d(e,y,w,a,c);else{if("_internal_pass"!==p)throw new Error('expand must be "xmd" or "xof"');b=e}for(var k=new Array(t),x=0;x<t;x++){for(var O=new Array(u),S=0;S<u;S++){var E=m*(S+x*u),B=b.subarray(E,E+m);O[S]=(0,i.mod)(s(B),n)}k[x]=O}return k}t.expand_message_xmd=h,t.expand_message_xof=d,t.hash_to_field=p,t.isogenyMap=function(e,t){var r=t.map((function(e){return Array.from(e).reverse()}));return function(t,n){var i=r.map((function(r){return r.reduce((function(r,n){return e.add(e.mul(r,t),n)}))})),o=a(i,4),s=o[0],u=o[1],c=o[2],f=o[3];return t=e.div(s,u),n=e.mul(n,e.div(c,f)),{x:t,y:n}}},t.createHasher=function(e,t,r){if("function"!==typeof t)throw new Error("mapToCurve() must be defined");return{hashToCurve:function(a,i){var o=p(a,2,n(n({},r),{},{DST:r.DST},i)),s=e.fromAffine(t(o[0])),u=e.fromAffine(t(o[1])),c=s.add(u).clearCofactor();return c.assertValidity(),c},encodeToCurve:function(a,i){var o=p(a,1,n(n({},r),{},{DST:r.encodeDST},i)),s=e.fromAffine(t(o[0])).clearCofactor();return s.assertValidity(),s}}}},1087:function(e,t,r){"use strict";var n=r(18).default,a=r(19).default,i=r(24).default,o=r(45).default;Object.defineProperty(t,"__esModule",{value:!0}),t.sha224=t.sha256=void 0;var s=r(1083),u=r(1077),c=function(e,t,r){return e&t^e&r^t&r},f=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),l=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),h=new Uint32Array(64),d=function(e){i(r,e);var t=o(r);function r(){var e;return n(this,r),(e=t.call(this,64,32,8,!1)).A=0|l[0],e.B=0|l[1],e.C=0|l[2],e.D=0|l[3],e.E=0|l[4],e.F=0|l[5],e.G=0|l[6],e.H=0|l[7],e}return a(r,[{key:"get",value:function(){return[this.A,this.B,this.C,this.D,this.E,this.F,this.G,this.H]}},{key:"set",value:function(e,t,r,n,a,i,o,s){this.A=0|e,this.B=0|t,this.C=0|r,this.D=0|n,this.E=0|a,this.F=0|i,this.G=0|o,this.H=0|s}},{key:"process",value:function(e,t){for(var r=0;r<16;r++,t+=4)h[r]=e.getUint32(t,!1);for(var n=16;n<64;n++){var a=h[n-15],i=h[n-2],o=(0,u.rotr)(a,7)^(0,u.rotr)(a,18)^a>>>3,s=(0,u.rotr)(i,17)^(0,u.rotr)(i,19)^i>>>10;h[n]=s+h[n-7]+o+h[n-16]|0}for(var l,d=this.A,p=this.B,v=this.C,b=this.D,y=this.E,g=this.F,m=this.G,w=this.H,k=0;k<64;k++){var x=w+((0,u.rotr)(y,6)^(0,u.rotr)(y,11)^(0,u.rotr)(y,25))+((l=y)&g^~l&m)+f[k]+h[k]|0,O=((0,u.rotr)(d,2)^(0,u.rotr)(d,13)^(0,u.rotr)(d,22))+c(d,p,v)|0;w=m,m=g,g=y,y=b+x|0,b=v,v=p,p=d,d=x+O|0}d=d+this.A|0,p=p+this.B|0,v=v+this.C|0,b=b+this.D|0,y=y+this.E|0,g=g+this.F|0,m=m+this.G|0,w=w+this.H|0,this.set(d,p,v,b,y,g,m,w)}},{key:"roundClean",value:function(){h.fill(0)}},{key:"destroy",value:function(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}}]),r}(s.SHA2),p=function(e){i(r,e);var t=o(r);function r(){var e;return n(this,r),(e=t.call(this)).A=-1056596264,e.B=914150663,e.C=812702999,e.D=-150054599,e.E=-4191439,e.F=1750603025,e.G=1694076839,e.H=-1090891868,e.outputLen=28,e}return a(r)}(d);t.sha256=(0,u.wrapConstructor)((function(){return new d})),t.sha224=(0,u.wrapConstructor)((function(){return new p}))},1088:function(e,t,r){"use strict";var n=r(19).default,a=r(18).default,i=r(24).default,o=r(45).default,s=r(116).default,u=r(62).default;Object.defineProperty(t,"__esModule",{value:!0}),t.mapToCurveSimpleSWU=t.SWUFpSqrtRatio=t.weierstrass=t.weierstrassPoints=t.DER=void 0;var c=r(1078),f=r(1076),l=r(1076),h=r(1085);var d=f.bytesToNumberBE,p=f.hexToBytes;t.DER={Err:function(e){i(r,e);var t=o(r);function r(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return a(this,r),t.call(this,e)}return n(r)}(s(Error)),_parseInt:function(e){var r=t.DER.Err;if(e.length<2||2!==e[0])throw new r("Invalid signature integer tag");var n=e[1],a=e.subarray(2,n+2);if(!n||a.length!==n)throw new r("Invalid signature integer: wrong length");if(128&a[0])throw new r("Invalid signature integer: negative");if(0===a[0]&&!(128&a[1]))throw new r("Invalid signature integer: unnecessary leading zero");return{d:d(a),l:e.subarray(n+2)}},toSig:function(e){var r=t.DER.Err,n="string"===typeof e?p(e):e;if(!(n instanceof Uint8Array))throw new Error("ui8a expected");var a=n.length;if(a<2||48!=n[0])throw new r("Invalid signature tag");if(n[1]!==a-2)throw new r("Invalid signature: incorrect length");var i=t.DER._parseInt(n.subarray(2)),o=i.d,s=i.l,u=t.DER._parseInt(s),c=u.d;if(u.l.length)throw new r("Invalid signature: left bytes after parsing");return{r:o,s:c}},hexFromSig:function(e){var t=function(e){return 8&Number.parseInt(e[0],16)?"00"+e:e},r=function(e){var t=e.toString(16);return 1&t.length?"0".concat(t):t},n=t(r(e.s)),a=t(r(e.r)),i=n.length/2,o=a.length/2,s=r(i),u=r(o);return"30".concat(r(o+i+4),"02").concat(u).concat(a,"02").concat(s).concat(n)}};var v=BigInt(0),b=BigInt(1),y=BigInt(2),g=BigInt(3),m=BigInt(4);function w(e){var t=function(e){var t=(0,h.validateBasic)(e);f.validateObject(t,{a:"field",b:"field"},{allowedPrivateKeyLengths:"array",wrapPrivateKey:"boolean",isTorsionFree:"function",clearCofactor:"function",allowInfinityPoint:"boolean",fromBytes:"function",toBytes:"function"});var r=t.endo,n=t.Fp,a=t.a;if(r){if(!n.eql(a,n.ZERO))throw new Error("Endomorphism can only be defined for Koblitz curves that have a=0");if("object"!==typeof r||"bigint"!==typeof r.beta||"function"!==typeof r.splitScalar)throw new Error("Expected endomorphism with beta: bigint and splitScalar: function")}return Object.freeze(u({},t))}(e),r=t.Fp,i=t.toBytes||function(e,t,n){var a=t.toAffine();return f.concatBytes(Uint8Array.from([4]),r.toBytes(a.x),r.toBytes(a.y))},o=t.fromBytes||function(e){var t=e.subarray(1);return{x:r.fromBytes(t.subarray(0,r.BYTES)),y:r.fromBytes(t.subarray(r.BYTES,2*r.BYTES))}};function s(e){var n=t.a,a=t.b,i=r.sqr(e),o=r.mul(i,e);return r.add(r.add(o,r.mul(e,n)),a)}if(!r.eql(r.sqr(t.Gy),s(t.Gx)))throw new Error("bad generator point: equation left != right");function d(e){return"bigint"===typeof e&&v<e&&e<t.n}function p(e){if(!d(e))throw new Error("Expected valid bigint: 0 < bigint < curve.n")}function y(e){var r,n=t.allowedPrivateKeyLengths,a=t.nByteLength,i=t.wrapPrivateKey,o=t.n;if(n&&"bigint"!==typeof e){if(e instanceof Uint8Array&&(e=f.bytesToHex(e)),"string"!==typeof e||!n.includes(e.length))throw new Error("Invalid key");e=e.padStart(2*a,"0")}try{r="bigint"===typeof e?e:f.bytesToNumberBE((0,l.ensureBytes)("private key",e,a))}catch(s){throw new Error("private key must be ".concat(a," bytes, hex or bigint, not ").concat(typeof e))}return i&&(r=c.mod(r,o)),p(r),r}var m=new Map;function w(e){if(!(e instanceof k))throw new Error("ProjectivePoint expected")}var k=function(){function e(t,n,i){if(a(this,e),this.px=t,this.py=n,this.pz=i,null==t||!r.isValid(t))throw new Error("x required");if(null==n||!r.isValid(n))throw new Error("y required");if(null==i||!r.isValid(i))throw new Error("z required")}return n(e,[{key:"x",get:function(){return this.toAffine().x}},{key:"y",get:function(){return this.toAffine().y}},{key:"_setWindowSize",value:function(e){this._WINDOW_SIZE=e,m.delete(this)}},{key:"assertValidity",value:function(){if(this.is0()){if(t.allowInfinityPoint&&!r.is0(this.py))return;throw new Error("bad point: ZERO")}var e=this.toAffine(),n=e.x,a=e.y;if(!r.isValid(n)||!r.isValid(a))throw new Error("bad point: x or y not FE");var i=r.sqr(a),o=s(n);if(!r.eql(i,o))throw new Error("bad point: equation left != right");if(!this.isTorsionFree())throw new Error("bad point: not in prime-order subgroup")}},{key:"hasEvenY",value:function(){var e=this.toAffine().y;if(r.isOdd)return!r.isOdd(e);throw new Error("Field doesn't support isOdd")}},{key:"equals",value:function(e){w(e);var t=this.px,n=this.py,a=this.pz,i=e.px,o=e.py,s=e.pz,u=r.eql(r.mul(t,s),r.mul(i,a)),c=r.eql(r.mul(n,s),r.mul(o,a));return u&&c}},{key:"negate",value:function(){return new e(this.px,r.neg(this.py),this.pz)}},{key:"double",value:function(){var n=t.a,a=t.b,i=r.mul(a,g),o=this.px,s=this.py,u=this.pz,c=r.ZERO,f=r.ZERO,l=r.ZERO,h=r.mul(o,o),d=r.mul(s,s),p=r.mul(u,u),v=r.mul(o,s);return v=r.add(v,v),l=r.mul(o,u),l=r.add(l,l),c=r.mul(n,l),f=r.mul(i,p),f=r.add(c,f),c=r.sub(d,f),f=r.add(d,f),f=r.mul(c,f),c=r.mul(v,c),l=r.mul(i,l),p=r.mul(n,p),v=r.sub(h,p),v=r.mul(n,v),v=r.add(v,l),l=r.add(h,h),h=r.add(l,h),h=r.add(h,p),h=r.mul(h,v),f=r.add(f,h),p=r.mul(s,u),p=r.add(p,p),h=r.mul(p,v),c=r.sub(c,h),l=r.mul(p,d),l=r.add(l,l),new e(c,f,l=r.add(l,l))}},{key:"add",value:function(n){w(n);var a=this.px,i=this.py,o=this.pz,s=n.px,u=n.py,c=n.pz,f=r.ZERO,l=r.ZERO,h=r.ZERO,d=t.a,p=r.mul(t.b,g),v=r.mul(a,s),b=r.mul(i,u),y=r.mul(o,c),m=r.add(a,i),k=r.add(s,u);m=r.mul(m,k),k=r.add(v,b),m=r.sub(m,k),k=r.add(a,o);var x=r.add(s,c);return k=r.mul(k,x),x=r.add(v,y),k=r.sub(k,x),x=r.add(i,o),f=r.add(u,c),x=r.mul(x,f),f=r.add(b,y),x=r.sub(x,f),h=r.mul(d,k),f=r.mul(p,y),h=r.add(f,h),f=r.sub(b,h),h=r.add(b,h),l=r.mul(f,h),b=r.add(v,v),b=r.add(b,v),y=r.mul(d,y),k=r.mul(p,k),b=r.add(b,y),y=r.sub(v,y),y=r.mul(d,y),k=r.add(k,y),v=r.mul(b,k),l=r.add(l,v),v=r.mul(x,k),f=r.mul(m,f),f=r.sub(f,v),v=r.mul(m,b),h=r.mul(x,h),new e(f,l,h=r.add(h,v))}},{key:"subtract",value:function(e){return this.add(e.negate())}},{key:"is0",value:function(){return this.equals(e.ZERO)}},{key:"wNAF",value:function(t){return O.wNAFCached(this,m,t,(function(t){var n=r.invertBatch(t.map((function(e){return e.pz})));return t.map((function(e,t){return e.toAffine(n[t])})).map(e.fromAffine)}))}},{key:"multiplyUnsafe",value:function(n){var a=e.ZERO;if(n===v)return a;if(p(n),n===b)return this;var i=t.endo;if(!i)return O.unsafeLadder(this,n);for(var o=i.splitScalar(n),s=o.k1neg,u=o.k1,c=o.k2neg,f=o.k2,l=a,h=a,d=this;u>v||f>v;)u&b&&(l=l.add(d)),f&b&&(h=h.add(d)),d=d.double(),u>>=b,f>>=b;return s&&(l=l.negate()),c&&(h=h.negate()),h=new e(r.mul(h.px,i.beta),h.py,h.pz),l.add(h)}},{key:"multiply",value:function(n){p(n);var a,i,o=n,s=t.endo;if(s){var u=s.splitScalar(o),c=u.k1neg,f=u.k1,l=u.k2neg,h=u.k2,d=this.wNAF(f),v=d.p,b=d.f,y=this.wNAF(h),g=y.p,m=y.f;v=O.constTimeNegate(c,v),g=O.constTimeNegate(l,g),g=new e(r.mul(g.px,s.beta),g.py,g.pz),a=v.add(g),i=b.add(m)}else{var w=this.wNAF(o);a=w.p,i=w.f}return e.normalizeZ([a,i])[0]}},{key:"multiplyAndAddUnsafe",value:function(t,r,n){var a=e.BASE,i=function(e,t){return t!==v&&t!==b&&e.equals(a)?e.multiply(t):e.multiplyUnsafe(t)},o=i(this,r).add(i(t,n));return o.is0()?void 0:o}},{key:"toAffine",value:function(e){var t=this.px,n=this.py,a=this.pz,i=this.is0();null==e&&(e=i?r.ONE:r.inv(a));var o=r.mul(t,e),s=r.mul(n,e),u=r.mul(a,e);if(i)return{x:r.ZERO,y:r.ZERO};if(!r.eql(u,r.ONE))throw new Error("invZ was invalid");return{x:o,y:s}}},{key:"isTorsionFree",value:function(){var r=t.h,n=t.isTorsionFree;if(r===b)return!0;if(n)return n(e,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}},{key:"clearCofactor",value:function(){var r=t.h,n=t.clearCofactor;return r===b?this:n?n(e,this):this.multiplyUnsafe(t.h)}},{key:"toRawBytes",value:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return this.assertValidity(),i(e,this,t)}},{key:"toHex",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return f.bytesToHex(this.toRawBytes(e))}}],[{key:"fromAffine",value:function(t){var n=t||{},a=n.x,i=n.y;if(!t||!r.isValid(a)||!r.isValid(i))throw new Error("invalid affine point");if(t instanceof e)throw new Error("projective point not allowed");var o=function(e){return r.eql(e,r.ZERO)};return o(a)&&o(i)?e.ZERO:new e(a,i,r.ONE)}},{key:"normalizeZ",value:function(t){var n=r.invertBatch(t.map((function(e){return e.pz})));return t.map((function(e,t){return e.toAffine(n[t])})).map(e.fromAffine)}},{key:"fromHex",value:function(t){var r=e.fromAffine(o((0,l.ensureBytes)("pointHex",t)));return r.assertValidity(),r}},{key:"fromPrivateKey",value:function(t){return e.BASE.multiply(y(t))}}]),e}();k.BASE=new k(t.Gx,t.Gy,r.ONE),k.ZERO=new k(r.ZERO,r.ONE,r.ZERO);var x=t.nBitLength,O=(0,h.wNAF)(k,t.endo?Math.ceil(x/2):x);return{CURVE:t,ProjectivePoint:k,normPrivateKeyToScalar:y,weierstrassEquation:s,isWithinCurveOrder:d}}function k(e,t){for(var r=e.ORDER,n=v,a=r-b;a%y===v;a/=y)n+=b;var i=n,o=y<<i-b-b,s=o*y,u=(r-b)/s,c=(u-b)/y,f=s-b,l=o,h=e.pow(t,u),d=e.pow(t,(u+b)/y),p=function(t,r){var n=h,a=e.pow(r,f),o=e.sqr(a);o=e.mul(o,r);var s=e.mul(t,o);s=e.pow(s,c),s=e.mul(s,a),a=e.mul(s,r),o=e.mul(s,t);var u=e.mul(o,a);s=e.pow(u,l);var p=e.eql(s,e.ONE);a=e.mul(o,d),s=e.mul(u,n),o=e.cmov(a,o,p),u=e.cmov(s,u,p);for(var v=i;v>b;v--){var g=v-y;g=y<<g-b;var m=e.pow(u,g),w=e.eql(m,e.ONE);a=e.mul(o,n),n=e.mul(n,n),m=e.mul(u,n),o=e.cmov(a,o,w),u=e.cmov(m,u,w)}return{isValid:p,value:o}};if(e.ORDER%m===g){var w=(e.ORDER-g)/m,k=e.sqrt(e.neg(t));p=function(t,r){var n=e.sqr(r),a=e.mul(t,r);n=e.mul(n,a);var i=e.pow(n,w);i=e.mul(i,a);var o=e.mul(i,k),s=e.mul(e.sqr(i),r),u=e.eql(s,t);return{isValid:u,value:e.cmov(o,i,u)}}}return p}t.weierstrassPoints=w,t.weierstrass=function(e){var r=function(e){var t=(0,h.validateBasic)(e);return f.validateObject(t,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze(u({lowS:!0},t))}(e),i=r.Fp,o=r.n,s=i.BYTES+1,d=2*i.BYTES+1;function p(e){return c.mod(e,o)}function y(e){return c.invert(e,o)}var g=w(u(u({},r),{},{toBytes:function(e,t,r){var n=t.toAffine(),a=i.toBytes(n.x),o=f.concatBytes;return r?o(Uint8Array.from([t.hasEvenY()?2:3]),a):o(Uint8Array.from([4]),a,i.toBytes(n.y))},fromBytes:function(e){var t=e.length,r=e[0],n=e.subarray(1);if(t!==s||2!==r&&3!==r){if(t===d&&4===r)return{x:i.fromBytes(n.subarray(0,i.BYTES)),y:i.fromBytes(n.subarray(i.BYTES,2*i.BYTES))};throw new Error("Point of length ".concat(t," was invalid. Expected ").concat(s," compressed bytes or ").concat(d," uncompressed bytes"))}var a=f.bytesToNumberBE(n);if(!(v<(o=a)&&o<i.ORDER))throw new Error("Point is not on curve");var o,u=x(a),c=i.sqrt(u);return 1===(1&r)!==((c&b)===b)&&(c=i.neg(c)),{x:a,y:c}}})),m=g.ProjectivePoint,k=g.normPrivateKeyToScalar,x=g.weierstrassEquation,O=g.isWithinCurveOrder,S=function(e){return f.bytesToHex(f.numberToBytesBE(e,r.nByteLength))};function E(e){return e>o>>b}var B=function(e,t,r){return f.bytesToNumberBE(e.slice(t,r))},j=function(){function e(t,r,n){a(this,e),this.r=t,this.s=r,this.recovery=n,this.assertValidity()}return n(e,[{key:"assertValidity",value:function(){if(!O(this.r))throw new Error("r must be 0 < r < CURVE.n");if(!O(this.s))throw new Error("s must be 0 < s < CURVE.n")}},{key:"addRecoveryBit",value:function(t){return new e(this.r,this.s,t)}},{key:"recoverPublicKey",value:function(e){var t=this.r,n=this.s,a=this.recovery,o=P((0,l.ensureBytes)("msgHash",e));if(null==a||![0,1,2,3].includes(a))throw new Error("recovery id invalid");var s=2===a||3===a?t+r.n:t;if(s>=i.ORDER)throw new Error("recovery id 2 or 3 invalid");var u=0===(1&a)?"02":"03",c=m.fromHex(u+S(s)),f=y(s),h=p(-o*f),d=p(n*f),v=m.BASE.multiplyAndAddUnsafe(c,h,d);if(!v)throw new Error("point at infinify");return v.assertValidity(),v}},{key:"hasHighS",value:function(){return E(this.s)}},{key:"normalizeS",value:function(){return this.hasHighS()?new e(this.r,p(-this.s),this.recovery):this}},{key:"toDERRawBytes",value:function(){return f.hexToBytes(this.toDERHex())}},{key:"toDERHex",value:function(){return t.DER.hexFromSig({r:this.r,s:this.s})}},{key:"toCompactRawBytes",value:function(){return f.hexToBytes(this.toCompactHex())}},{key:"toCompactHex",value:function(){return S(this.r)+S(this.s)}}],[{key:"fromCompact",value:function(t){var n=r.nByteLength;return t=(0,l.ensureBytes)("compactSignature",t,2*n),new e(B(t,0,n),B(t,n,2*n))}},{key:"fromDER",value:function(r){var n=t.DER.toSig((0,l.ensureBytes)("DER",r));return new e(n.r,n.s)}}]),e}(),I={isValidPrivateKey:function(e){try{return k(e),!0}catch(t){return!1}},normPrivateKeyToScalar:k,randomPrivateKey:function(){var e=c.getMinHashLength(r.n);return c.mapHashToField(r.randomBytes(e),r.n)},precompute:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:8,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:m.BASE;return t._setWindowSize(e),t.multiply(BigInt(3)),t}};function A(e){var t=e instanceof Uint8Array,r="string"===typeof e,n=(t||r)&&e.length;return t?n===s||n===d:r?n===2*s||n===2*d:e instanceof m}var _=r.bits2int||function(e){var t=f.bytesToNumberBE(e),n=8*e.length-r.nBitLength;return n>0?t>>BigInt(n):t},P=r.bits2int_modN||function(e){return p(_(e))},T=f.bitMask(r.nBitLength);function C(e){if("bigint"!==typeof e)throw new Error("bigint expected");if(!(v<=e&&e<T))throw new Error("bigint expected < 2^".concat(r.nBitLength));return f.numberToBytesBE(e,r.nByteLength)}function L(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:R;if(["recovered","canonical"].some((function(e){return e in n})))throw new Error("sign() legacy options not supported");var a=r.hash,o=r.randomBytes,s=n.lowS,u=n.prehash,c=n.extraEntropy;null==s&&(s=!0),e=(0,l.ensureBytes)("msgHash",e),u&&(e=(0,l.ensureBytes)("prehashed msgHash",a(e)));var h=P(e),d=k(t),g=[C(d),C(h)];if(null!=c){var w=!0===c?o(i.BYTES):c;g.push((0,l.ensureBytes)("extraEntropy",w))}var x=f.concatBytes.apply(f,g),S=h;return{seed:x,k2sig:function(e){var t=_(e);if(O(t)){var r=y(t),n=m.BASE.multiply(t).toAffine(),a=p(n.x);if(a!==v){var i=p(r*p(S+a*d));if(i!==v){var o=(n.x===a?0:2)|Number(n.y&b),u=i;return s&&E(i)&&(u=function(e){return E(e)?p(-e):e}(i),o^=1),new j(a,u,o)}}}}}}var R={lowS:r.lowS,prehash:!1},N={lowS:r.lowS,prehash:!1};return m.BASE._setWindowSize(8),{CURVE:r,getPublicKey:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return m.fromPrivateKey(e).toRawBytes(t)},getSharedSecret:function(e,t){var r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(A(e))throw new Error("first arg must be private key");if(!A(t))throw new Error("second arg must be public key");return m.fromHex(t).multiply(k(e)).toRawBytes(r)},sign:function(e,t){var n=L(e,t,arguments.length>2&&void 0!==arguments[2]?arguments[2]:R),a=n.seed,i=n.k2sig,o=r;return f.createHmacDrbg(o.hash.outputLen,o.nByteLength,o.hmac)(a,i)},verify:function(e,n,a){var i,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:N,s=e;if(n=(0,l.ensureBytes)("msgHash",n),a=(0,l.ensureBytes)("publicKey",a),"strict"in o)throw new Error("options.strict was renamed to lowS");var u,c=o.lowS,f=o.prehash,h=void 0;try{if("string"===typeof s||s instanceof Uint8Array)try{h=j.fromDER(s)}catch(B){if(!(B instanceof t.DER.Err))throw B;h=j.fromCompact(s)}else{if("object"!==typeof s||"bigint"!==typeof s.r||"bigint"!==typeof s.s)throw new Error("PARSE");var d=s.r,v=s.s;h=new j(d,v)}u=m.fromHex(a)}catch(I){if("PARSE"===I.message)throw new Error("signature must be Signature instance, Uint8Array or hex string");return!1}if(c&&h.hasHighS())return!1;f&&(n=r.hash(n));var b=h,g=b.r,w=b.s,k=P(n),x=y(w),O=p(k*x),S=p(g*x),E=null===(i=m.BASE.multiplyAndAddUnsafe(u,O,S))||void 0===i?void 0:i.toAffine();return!!E&&p(E.x)===g},ProjectivePoint:m,Signature:j,utils:I}},t.SWUFpSqrtRatio=k,t.mapToCurveSimpleSWU=function(e,t){if(c.validateField(e),!e.isValid(t.A)||!e.isValid(t.B)||!e.isValid(t.Z))throw new Error("mapToCurveSimpleSWU: invalid opts");var r=k(e,t.Z);if(!e.isOdd)throw new Error("Fp.isOdd is not implemented!");return function(n){var a,i,o,s,u,c,f,l;a=e.sqr(n),a=e.mul(a,t.Z),i=e.sqr(a),i=e.add(i,a),o=e.add(i,e.ONE),o=e.mul(o,t.B),s=e.cmov(t.Z,e.neg(i),!e.eql(i,e.ZERO)),s=e.mul(s,t.A),i=e.sqr(o),c=e.sqr(s),u=e.mul(c,t.A),i=e.add(i,u),i=e.mul(i,o),c=e.mul(c,s),u=e.mul(c,t.B),i=e.add(i,u),f=e.mul(a,o);var h=r(i,c),d=h.isValid,p=h.value;l=e.mul(a,n),l=e.mul(l,p),f=e.cmov(f,o,d),l=e.cmov(l,p,d);var v=e.isOdd(n)===e.isOdd(l);return l=e.cmov(e.neg(l),l,v),{x:f=e.div(f,s),y:l}}}},1091:function(e,t,r){"use strict";var n;r.r(t),r.d(t,"v1",(function(){return v})),r.d(t,"v3",(function(){return E})),r.d(t,"v4",(function(){return B})),r.d(t,"v5",(function(){return A})),r.d(t,"NIL",(function(){return _})),r.d(t,"version",(function(){return P})),r.d(t,"validate",(function(){return s})),r.d(t,"stringify",(function(){return h})),r.d(t,"parse",(function(){return b}));var a=new Uint8Array(16);function i(){if(!n&&!(n="undefined"!==typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!==typeof msCrypto&&"function"===typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return n(a)}var o=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;for(var s=function(e){return"string"===typeof e&&o.test(e)},u=[],c=0;c<256;++c)u.push((c+256).toString(16).substr(1));var f,l,h=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=(u[e[t+0]]+u[e[t+1]]+u[e[t+2]]+u[e[t+3]]+"-"+u[e[t+4]]+u[e[t+5]]+"-"+u[e[t+6]]+u[e[t+7]]+"-"+u[e[t+8]]+u[e[t+9]]+"-"+u[e[t+10]]+u[e[t+11]]+u[e[t+12]]+u[e[t+13]]+u[e[t+14]]+u[e[t+15]]).toLowerCase();if(!s(r))throw TypeError("Stringified UUID is invalid");return r},d=0,p=0;var v=function(e,t,r){var n=t&&r||0,a=t||new Array(16),o=(e=e||{}).node||f,s=void 0!==e.clockseq?e.clockseq:l;if(null==o||null==s){var u=e.random||(e.rng||i)();null==o&&(o=f=[1|u[0],u[1],u[2],u[3],u[4],u[5]]),null==s&&(s=l=16383&(u[6]<<8|u[7]))}var c=void 0!==e.msecs?e.msecs:Date.now(),v=void 0!==e.nsecs?e.nsecs:p+1,b=c-d+(v-p)/1e4;if(b<0&&void 0===e.clockseq&&(s=s+1&16383),(b<0||c>d)&&void 0===e.nsecs&&(v=0),v>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");d=c,p=v,l=s;var y=(1e4*(268435455&(c+=122192928e5))+v)%4294967296;a[n++]=y>>>24&255,a[n++]=y>>>16&255,a[n++]=y>>>8&255,a[n++]=255&y;var g=c/4294967296*1e4&268435455;a[n++]=g>>>8&255,a[n++]=255&g,a[n++]=g>>>24&15|16,a[n++]=g>>>16&255,a[n++]=s>>>8|128,a[n++]=255&s;for(var m=0;m<6;++m)a[n+m]=o[m];return t||h(a)};var b=function(e){if(!s(e))throw TypeError("Invalid UUID");var t,r=new Uint8Array(16);return r[0]=(t=parseInt(e.slice(0,8),16))>>>24,r[1]=t>>>16&255,r[2]=t>>>8&255,r[3]=255&t,r[4]=(t=parseInt(e.slice(9,13),16))>>>8,r[5]=255&t,r[6]=(t=parseInt(e.slice(14,18),16))>>>8,r[7]=255&t,r[8]=(t=parseInt(e.slice(19,23),16))>>>8,r[9]=255&t,r[10]=(t=parseInt(e.slice(24,36),16))/1099511627776&255,r[11]=t/4294967296&255,r[12]=t>>>24&255,r[13]=t>>>16&255,r[14]=t>>>8&255,r[15]=255&t,r};var y=function(e,t,r){function n(e,n,a,i){if("string"===typeof e&&(e=function(e){e=unescape(encodeURIComponent(e));for(var t=[],r=0;r<e.length;++r)t.push(e.charCodeAt(r));return t}(e)),"string"===typeof n&&(n=b(n)),16!==n.length)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");var o=new Uint8Array(16+e.length);if(o.set(n),o.set(e,n.length),(o=r(o))[6]=15&o[6]|t,o[8]=63&o[8]|128,a){i=i||0;for(var s=0;s<16;++s)a[i+s]=o[s];return a}return h(o)}try{n.name=e}catch(a){}return n.DNS="6ba7b810-9dad-11d1-80b4-00c04fd430c8",n.URL="6ba7b811-9dad-11d1-80b4-00c04fd430c8",n};function g(e){return 14+(e+64>>>9<<4)+1}function m(e,t){var r=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(r>>16)<<16|65535&r}function w(e,t,r,n,a,i){return m((o=m(m(t,e),m(n,i)))<<(s=a)|o>>>32-s,r);var o,s}function k(e,t,r,n,a,i,o){return w(t&r|~t&n,e,t,a,i,o)}function x(e,t,r,n,a,i,o){return w(t&n|r&~n,e,t,a,i,o)}function O(e,t,r,n,a,i,o){return w(t^r^n,e,t,a,i,o)}function S(e,t,r,n,a,i,o){return w(r^(t|~n),e,t,a,i,o)}var E=y("v3",48,(function(e){if("string"===typeof e){var t=unescape(encodeURIComponent(e));e=new Uint8Array(t.length);for(var r=0;r<t.length;++r)e[r]=t.charCodeAt(r)}return function(e){for(var t=[],r=32*e.length,n="0123456789abcdef",a=0;a<r;a+=8){var i=e[a>>5]>>>a%32&255,o=parseInt(n.charAt(i>>>4&15)+n.charAt(15&i),16);t.push(o)}return t}(function(e,t){e[t>>5]|=128<<t%32,e[g(t)-1]=t;for(var r=1732584193,n=-271733879,a=-1732584194,i=271733878,o=0;o<e.length;o+=16){var s=r,u=n,c=a,f=i;r=k(r,n,a,i,e[o],7,-680876936),i=k(i,r,n,a,e[o+1],12,-389564586),a=k(a,i,r,n,e[o+2],17,606105819),n=k(n,a,i,r,e[o+3],22,-1044525330),r=k(r,n,a,i,e[o+4],7,-176418897),i=k(i,r,n,a,e[o+5],12,1200080426),a=k(a,i,r,n,e[o+6],17,-1473231341),n=k(n,a,i,r,e[o+7],22,-45705983),r=k(r,n,a,i,e[o+8],7,1770035416),i=k(i,r,n,a,e[o+9],12,-1958414417),a=k(a,i,r,n,e[o+10],17,-42063),n=k(n,a,i,r,e[o+11],22,-1990404162),r=k(r,n,a,i,e[o+12],7,1804603682),i=k(i,r,n,a,e[o+13],12,-40341101),a=k(a,i,r,n,e[o+14],17,-1502002290),r=x(r,n=k(n,a,i,r,e[o+15],22,1236535329),a,i,e[o+1],5,-165796510),i=x(i,r,n,a,e[o+6],9,-1069501632),a=x(a,i,r,n,e[o+11],14,643717713),n=x(n,a,i,r,e[o],20,-373897302),r=x(r,n,a,i,e[o+5],5,-701558691),i=x(i,r,n,a,e[o+10],9,38016083),a=x(a,i,r,n,e[o+15],14,-660478335),n=x(n,a,i,r,e[o+4],20,-405537848),r=x(r,n,a,i,e[o+9],5,568446438),i=x(i,r,n,a,e[o+14],9,-1019803690),a=x(a,i,r,n,e[o+3],14,-187363961),n=x(n,a,i,r,e[o+8],20,1163531501),r=x(r,n,a,i,e[o+13],5,-1444681467),i=x(i,r,n,a,e[o+2],9,-51403784),a=x(a,i,r,n,e[o+7],14,1735328473),r=O(r,n=x(n,a,i,r,e[o+12],20,-1926607734),a,i,e[o+5],4,-378558),i=O(i,r,n,a,e[o+8],11,-2022574463),a=O(a,i,r,n,e[o+11],16,1839030562),n=O(n,a,i,r,e[o+14],23,-35309556),r=O(r,n,a,i,e[o+1],4,-1530992060),i=O(i,r,n,a,e[o+4],11,1272893353),a=O(a,i,r,n,e[o+7],16,-155497632),n=O(n,a,i,r,e[o+10],23,-1094730640),r=O(r,n,a,i,e[o+13],4,681279174),i=O(i,r,n,a,e[o],11,-358537222),a=O(a,i,r,n,e[o+3],16,-722521979),n=O(n,a,i,r,e[o+6],23,76029189),r=O(r,n,a,i,e[o+9],4,-640364487),i=O(i,r,n,a,e[o+12],11,-421815835),a=O(a,i,r,n,e[o+15],16,530742520),r=S(r,n=O(n,a,i,r,e[o+2],23,-995338651),a,i,e[o],6,-198630844),i=S(i,r,n,a,e[o+7],10,1126891415),a=S(a,i,r,n,e[o+14],15,-1416354905),n=S(n,a,i,r,e[o+5],21,-57434055),r=S(r,n,a,i,e[o+12],6,1700485571),i=S(i,r,n,a,e[o+3],10,-1894986606),a=S(a,i,r,n,e[o+10],15,-1051523),n=S(n,a,i,r,e[o+1],21,-2054922799),r=S(r,n,a,i,e[o+8],6,1873313359),i=S(i,r,n,a,e[o+15],10,-30611744),a=S(a,i,r,n,e[o+6],15,-1560198380),n=S(n,a,i,r,e[o+13],21,1309151649),r=S(r,n,a,i,e[o+4],6,-145523070),i=S(i,r,n,a,e[o+11],10,-1120210379),a=S(a,i,r,n,e[o+2],15,718787259),n=S(n,a,i,r,e[o+9],21,-343485551),r=m(r,s),n=m(n,u),a=m(a,c),i=m(i,f)}return[r,n,a,i]}(function(e){if(0===e.length)return[];for(var t=8*e.length,r=new Uint32Array(g(t)),n=0;n<t;n+=8)r[n>>5]|=(255&e[n/8])<<n%32;return r}(e),8*e.length))}));var B=function(e,t,r){var n=(e=e||{}).random||(e.rng||i)();if(n[6]=15&n[6]|64,n[8]=63&n[8]|128,t){r=r||0;for(var a=0;a<16;++a)t[r+a]=n[a];return t}return h(n)};function j(e,t,r,n){switch(e){case 0:return t&r^~t&n;case 1:case 3:return t^r^n;case 2:return t&r^t&n^r&n}}function I(e,t){return e<<t|e>>>32-t}var A=y("v5",80,(function(e){var t=[1518500249,1859775393,2400959708,3395469782],r=[1732584193,4023233417,2562383102,271733878,3285377520];if("string"===typeof e){var n=unescape(encodeURIComponent(e));e=[];for(var a=0;a<n.length;++a)e.push(n.charCodeAt(a))}else Array.isArray(e)||(e=Array.prototype.slice.call(e));e.push(128);for(var i=e.length/4+2,o=Math.ceil(i/16),s=new Array(o),u=0;u<o;++u){for(var c=new Uint32Array(16),f=0;f<16;++f)c[f]=e[64*u+4*f]<<24|e[64*u+4*f+1]<<16|e[64*u+4*f+2]<<8|e[64*u+4*f+3];s[u]=c}s[o-1][14]=8*(e.length-1)/Math.pow(2,32),s[o-1][14]=Math.floor(s[o-1][14]),s[o-1][15]=8*(e.length-1)&4294967295;for(var l=0;l<o;++l){for(var h=new Uint32Array(80),d=0;d<16;++d)h[d]=s[l][d];for(var p=16;p<80;++p)h[p]=I(h[p-3]^h[p-8]^h[p-14]^h[p-16],1);for(var v=r[0],b=r[1],y=r[2],g=r[3],m=r[4],w=0;w<80;++w){var k=Math.floor(w/20),x=I(v,5)+j(k,b,y,g)+m+t[k]+h[w]>>>0;m=g,g=y,y=I(b,30)>>>0,b=v,v=x}r[0]=r[0]+v>>>0,r[1]=r[1]+b>>>0,r[2]=r[2]+y>>>0,r[3]=r[3]+g>>>0,r[4]=r[4]+m>>>0}return[r[0]>>24&255,r[0]>>16&255,r[0]>>8&255,255&r[0],r[1]>>24&255,r[1]>>16&255,r[1]>>8&255,255&r[1],r[2]>>24&255,r[2]>>16&255,r[2]>>8&255,255&r[2],r[3]>>24&255,r[3]>>16&255,r[3]>>8&255,255&r[3],r[4]>>24&255,r[4]>>16&255,r[4]>>8&255,255&r[4]]})),_="00000000-0000-0000-0000-000000000000";var P=function(e){if(!s(e))throw TypeError("Invalid UUID");return parseInt(e.substr(14,1),16)}},1092:function(e,t,r){"use strict";var n=r(46).Buffer;e.exports=function(e){if(e.length>=255)throw new TypeError("Alphabet too long");for(var t=new Uint8Array(256),r=0;r<t.length;r++)t[r]=255;for(var a=0;a<e.length;a++){var i=e.charAt(a),o=i.charCodeAt(0);if(255!==t[o])throw new TypeError(i+" is ambiguous");t[o]=a}var s=e.length,u=e.charAt(0),c=Math.log(s)/Math.log(256),f=Math.log(256)/Math.log(s);function l(e){if("string"!==typeof e)throw new TypeError("Expected String");if(0===e.length)return n.alloc(0);for(var r=0,a=0,i=0;e[r]===u;)a++,r++;for(var o=(e.length-r)*c+1>>>0,f=new Uint8Array(o);e[r];){var l=t[e.charCodeAt(r)];if(255===l)return;for(var h=0,d=o-1;(0!==l||h<i)&&-1!==d;d--,h++)l+=s*f[d]>>>0,f[d]=l%256>>>0,l=l/256>>>0;if(0!==l)throw new Error("Non-zero carry");i=h,r++}for(var p=o-i;p!==o&&0===f[p];)p++;var v=n.allocUnsafe(a+(o-p));v.fill(0,0,a);for(var b=a;p!==o;)v[b++]=f[p++];return v}return{encode:function(t){if((Array.isArray(t)||t instanceof Uint8Array)&&(t=n.from(t)),!n.isBuffer(t))throw new TypeError("Expected Buffer");if(0===t.length)return"";for(var r=0,a=0,i=0,o=t.length;i!==o&&0===t[i];)i++,r++;for(var c=(o-i)*f+1>>>0,l=new Uint8Array(c);i!==o;){for(var h=t[i],d=0,p=c-1;(0!==h||d<a)&&-1!==p;p--,d++)h+=256*l[p]>>>0,l[p]=h%s>>>0,h=h/s>>>0;if(0!==h)throw new Error("Non-zero carry");a=d,i++}for(var v=c-a;v!==c&&0===l[v];)v++;for(var b=u.repeat(r);v<c;++v)b+=e.charAt(l[v]);return b},decodeUnsafe:l,decode:function(e){var t=l(e);if(t)return t;throw new Error("Non-base"+s+" character")}}}},1093:function(e,t,r){"use strict";(function(e){var n=r(11).default,a=r(56).default,i=r(72).default,o=r(18).default,s=r(19).default,u=r(24).default,c=r(45).default,f=r(116).default,l=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),h=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),d=this&&this.__decorate||function(e,t,r,n){var a,i=arguments.length,o=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)o=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(o=(i<3?a(o):i>3?a(t,r,o):a(t,r))||o);return i>3&&o&&Object.defineProperty(t,r,o),o},p=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.hasOwnProperty.call(e,r)&&l(t,e,r);return h(t,e),t},v=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.deserializeUnchecked=t.deserialize=t.serialize=t.BinaryReader=t.BinaryWriter=t.BorshError=t.baseDecode=t.baseEncode=void 0;var b=v(r(30)),y=v(r(1079)),g=p(r(1094)),m=new("function"!==typeof TextDecoder?g.TextDecoder:TextDecoder)("utf-8",{fatal:!0});t.baseEncode=function(t){return"string"===typeof t&&(t=e.from(t,"utf8")),y.default.encode(e.from(t))},t.baseDecode=function(t){return e.from(y.default.decode(t))};var w=1024,k=function(e){u(r,e);var t=c(r);function r(e){var n;return o(this,r),(n=t.call(this,e)).fieldPath=[],n.originalMessage=e,n}return s(r,[{key:"addToFieldPath",value:function(e){this.fieldPath.splice(0,0,e),this.message=this.originalMessage+": "+this.fieldPath.join(".")}}]),r}(f(Error));t.BorshError=k;var x=function(){function t(){o(this,t),this.buf=e.alloc(w),this.length=0}return s(t,[{key:"maybeResize",value:function(){this.buf.length<16+this.length&&(this.buf=e.concat([this.buf,e.alloc(w)]))}},{key:"writeU8",value:function(e){this.maybeResize(),this.buf.writeUInt8(e,this.length),this.length+=1}},{key:"writeU16",value:function(e){this.maybeResize(),this.buf.writeUInt16LE(e,this.length),this.length+=2}},{key:"writeU32",value:function(e){this.maybeResize(),this.buf.writeUInt32LE(e,this.length),this.length+=4}},{key:"writeU64",value:function(t){this.maybeResize(),this.writeBuffer(e.from(new b.default(t).toArray("le",8)))}},{key:"writeU128",value:function(t){this.maybeResize(),this.writeBuffer(e.from(new b.default(t).toArray("le",16)))}},{key:"writeU256",value:function(t){this.maybeResize(),this.writeBuffer(e.from(new b.default(t).toArray("le",32)))}},{key:"writeU512",value:function(t){this.maybeResize(),this.writeBuffer(e.from(new b.default(t).toArray("le",64)))}},{key:"writeBuffer",value:function(t){this.buf=e.concat([e.from(this.buf.subarray(0,this.length)),t,e.alloc(w)]),this.length+=t.length}},{key:"writeString",value:function(t){this.maybeResize();var r=e.from(t,"utf8");this.writeU32(r.length),this.writeBuffer(r)}},{key:"writeFixedArray",value:function(t){this.writeBuffer(e.from(t))}},{key:"writeArray",value:function(e,t){this.maybeResize(),this.writeU32(e.length);var r,n=i(e);try{for(n.s();!(r=n.n()).done;){var a=r.value;this.maybeResize(),t(a)}}catch(o){n.e(o)}finally{n.f()}}},{key:"toArray",value:function(){return this.buf.subarray(0,this.length)}}]),t}();function O(e,t,r){var n=r.value;r.value=function(){try{for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return n.apply(this,t)}catch(i){if(i instanceof RangeError){var a=i.code;if(["ERR_BUFFER_OUT_OF_BOUNDS","ERR_OUT_OF_RANGE"].indexOf(a)>=0)throw new k("Reached the end of buffer when deserializing")}throw i}}}t.BinaryWriter=x;var S=function(){function e(t){o(this,e),this.buf=t,this.offset=0}return s(e,[{key:"readU8",value:function(){var e=this.buf.readUInt8(this.offset);return this.offset+=1,e}},{key:"readU16",value:function(){var e=this.buf.readUInt16LE(this.offset);return this.offset+=2,e}},{key:"readU32",value:function(){var e=this.buf.readUInt32LE(this.offset);return this.offset+=4,e}},{key:"readU64",value:function(){var e=this.readBuffer(8);return new b.default(e,"le")}},{key:"readU128",value:function(){var e=this.readBuffer(16);return new b.default(e,"le")}},{key:"readU256",value:function(){var e=this.readBuffer(32);return new b.default(e,"le")}},{key:"readU512",value:function(){var e=this.readBuffer(64);return new b.default(e,"le")}},{key:"readBuffer",value:function(e){if(this.offset+e>this.buf.length)throw new k("Expected buffer length ".concat(e," isn't within bounds"));var t=this.buf.slice(this.offset,this.offset+e);return this.offset+=e,t}},{key:"readString",value:function(){var e=this.readU32(),t=this.readBuffer(e);try{return m.decode(t)}catch(r){throw new k("Error decoding UTF-8 string: ".concat(r))}}},{key:"readFixedArray",value:function(e){return new Uint8Array(this.readBuffer(e))}},{key:"readArray",value:function(e){for(var t=this.readU32(),r=Array(),n=0;n<t;++n)r.push(e());return r}}]),e}();function E(e){return e.charAt(0).toUpperCase()+e.slice(1)}function B(e,t,r,n,a){try{if("string"===typeof n)a["write".concat(E(n))](r);else if(n instanceof Array)if("number"===typeof n[0]){if(r.length!==n[0])throw new k("Expecting byte array of length ".concat(n[0],", but got ").concat(r.length," bytes"));a.writeFixedArray(r)}else if(2===n.length&&"number"===typeof n[1]){if(r.length!==n[1])throw new k("Expecting byte array of length ".concat(n[1],", but got ").concat(r.length," bytes"));for(var i=0;i<n[1];i++)B(e,null,r[i],n[0],a)}else a.writeArray(r,(function(r){B(e,t,r,n[0],a)}));else if(void 0!==n.kind)switch(n.kind){case"option":null===r||void 0===r?a.writeU8(0):(a.writeU8(1),B(e,t,r,n.type,a));break;case"map":a.writeU32(r.size),r.forEach((function(r,i){B(e,t,i,n.key,a),B(e,t,r,n.value,a)}));break;default:throw new k("FieldType ".concat(n," unrecognized"))}else j(e,r,a)}catch(o){throw o instanceof k&&o.addToFieldPath(t),o}}function j(e,t,r){if("function"!==typeof t.borshSerialize){var n=e.get(t.constructor);if(!n)throw new k("Class ".concat(t.constructor.name," is missing in schema"));if("struct"===n.kind)n.fields.map((function(n){var i=a(n,2),o=i[0],s=i[1];B(e,o,t[o],s,r)}));else{if("enum"!==n.kind)throw new k("Unexpected schema kind: ".concat(n.kind," for ").concat(t.constructor.name));for(var i=t[n.field],o=0;o<n.values.length;++o){var s=a(n.values[o],2),u=s[0],c=s[1];if(u===i){r.writeU8(o),B(e,u,t[u],c,r);break}}}}else t.borshSerialize(r)}function I(e,t,r,n){try{if("string"===typeof r)return n["read".concat(E(r))]();if(r instanceof Array){if("number"===typeof r[0])return n.readFixedArray(r[0]);if("number"===typeof r[1]){for(var a=[],i=0;i<r[1];i++)a.push(I(e,null,r[0],n));return a}return n.readArray((function(){return I(e,t,r[0],n)}))}if("option"===r.kind)return n.readU8()?I(e,t,r.type,n):void 0;if("map"===r.kind){for(var o=new Map,s=n.readU32(),u=0;u<s;u++){var c=I(e,t,r.key,n),f=I(e,t,r.value,n);o.set(c,f)}return o}return A(e,r,n)}catch(l){throw l instanceof k&&l.addToFieldPath(t),l}}function A(e,t,r){if("function"===typeof t.borshDeserialize)return t.borshDeserialize(r);var o=e.get(t);if(!o)throw new k("Class ".concat(t.name," is missing in schema"));if("struct"===o.kind){var s,u={},c=i(e.get(t).fields);try{for(c.s();!(s=c.n()).done;){var f=a(s.value,2),l=f[0],h=f[1];u[l]=I(e,l,h,r)}}catch(y){c.e(y)}finally{c.f()}return new t(u)}if("enum"===o.kind){var d=r.readU8();if(d>=o.values.length)throw new k("Enum index: ".concat(d," is out of range"));var p=a(o.values[d],2),v=p[0],b=I(e,v,p[1],r);return new t(n({},v,b))}throw new k("Unexpected schema kind: ".concat(o.kind," for ").concat(t.constructor.name))}d([O],S.prototype,"readU8",null),d([O],S.prototype,"readU16",null),d([O],S.prototype,"readU32",null),d([O],S.prototype,"readU64",null),d([O],S.prototype,"readU128",null),d([O],S.prototype,"readU256",null),d([O],S.prototype,"readU512",null),d([O],S.prototype,"readString",null),d([O],S.prototype,"readFixedArray",null),d([O],S.prototype,"readArray",null),t.BinaryReader=S,t.serialize=function(e,t){var r=new(arguments.length>2&&void 0!==arguments[2]?arguments[2]:x);return j(e,t,r),r.toArray()},t.deserialize=function(e,t,r){var n=new(arguments.length>3&&void 0!==arguments[3]?arguments[3]:S)(r),a=A(e,t,n);if(n.offset<r.length)throw new k("Unexpected ".concat(r.length-n.offset," bytes after deserialized data"));return a},t.deserializeUnchecked=function(e,t,r){return A(e,t,new(arguments.length>3&&void 0!==arguments[3]?arguments[3]:S)(r))}}).call(this,r(21).Buffer)},1094:function(e,t,r){"use strict";function n(e,t,r){return t<=e&&e<=r}function a(e){if(void 0===e)return{};if(e===Object(e))return e;throw TypeError("Could not convert argument to dictionary")}r.r(t),r.d(t,"TextEncoder",(function(){return f})),r.d(t,"TextDecoder",(function(){return c}));function i(e){this.tokens=[].slice.call(e)}i.prototype={endOfStream:function(){return!this.tokens.length},read:function(){return this.tokens.length?this.tokens.shift():-1},prepend:function(e){if(Array.isArray(e))for(var t=e;t.length;)this.tokens.unshift(t.pop());else this.tokens.unshift(e)},push:function(e){if(Array.isArray(e))for(var t=e;t.length;)this.tokens.push(t.shift());else this.tokens.push(e)}};var o=-1;function s(e,t){if(e)throw TypeError("Decoder error");return t||65533}var u="utf-8";function c(e,t){if(!(this instanceof c))return new c(e,t);if((e=void 0!==e?String(e).toLowerCase():u)!==u)throw new Error("Encoding not supported. Only utf-8 is supported");t=a(t),this._streaming=!1,this._BOMseen=!1,this._decoder=null,this._fatal=Boolean(t.fatal),this._ignoreBOM=Boolean(t.ignoreBOM),Object.defineProperty(this,"encoding",{value:"utf-8"}),Object.defineProperty(this,"fatal",{value:this._fatal}),Object.defineProperty(this,"ignoreBOM",{value:this._ignoreBOM})}function f(e,t){if(!(this instanceof f))return new f(e,t);if((e=void 0!==e?String(e).toLowerCase():u)!==u)throw new Error("Encoding not supported. Only utf-8 is supported");t=a(t),this._streaming=!1,this._encoder=null,this._options={fatal:Boolean(t.fatal)},Object.defineProperty(this,"encoding",{value:"utf-8"})}function l(e){var t=e.fatal,r=0,a=0,i=0,u=128,c=191;this.handler=function(e,f){if(-1===f&&0!==i)return i=0,s(t);if(-1===f)return o;if(0===i){if(n(f,0,127))return f;if(n(f,194,223))i=1,r=f-192;else if(n(f,224,239))224===f&&(u=160),237===f&&(c=159),i=2,r=f-224;else{if(!n(f,240,244))return s(t);240===f&&(u=144),244===f&&(c=143),i=3,r=f-240}return r<<=6*i,null}if(!n(f,u,c))return r=i=a=0,u=128,c=191,e.prepend(f),s(t);if(u=128,c=191,r+=f-128<<6*(i-(a+=1)),a!==i)return null;var l=r;return r=i=a=0,l}}function h(e){e.fatal;this.handler=function(e,t){if(-1===t)return o;if(n(t,0,127))return t;var r,a;n(t,128,2047)?(r=1,a=192):n(t,2048,65535)?(r=2,a=224):n(t,65536,1114111)&&(r=3,a=240);for(var i=[(t>>6*r)+a];r>0;){var s=t>>6*(r-1);i.push(128|63&s),r-=1}return i}}c.prototype={decode:function(e,t){var r;r="object"===typeof e&&e instanceof ArrayBuffer?new Uint8Array(e):"object"===typeof e&&"buffer"in e&&e.buffer instanceof ArrayBuffer?new Uint8Array(e.buffer,e.byteOffset,e.byteLength):new Uint8Array(0),t=a(t),this._streaming||(this._decoder=new l({fatal:this._fatal}),this._BOMseen=!1),this._streaming=Boolean(t.stream);for(var n,s=new i(r),u=[];!s.endOfStream()&&(n=this._decoder.handler(s,s.read()))!==o;)null!==n&&(Array.isArray(n)?u.push.apply(u,n):u.push(n));if(!this._streaming){do{if((n=this._decoder.handler(s,s.read()))===o)break;null!==n&&(Array.isArray(n)?u.push.apply(u,n):u.push(n))}while(!s.endOfStream());this._decoder=null}return u.length&&(-1===["utf-8"].indexOf(this.encoding)||this._ignoreBOM||this._BOMseen||(65279===u[0]?(this._BOMseen=!0,u.shift()):this._BOMseen=!0)),function(e){for(var t="",r=0;r<e.length;++r){var n=e[r];n<=65535?t+=String.fromCharCode(n):(n-=65536,t+=String.fromCharCode(55296+(n>>10),56320+(1023&n)))}return t}(u)}},f.prototype={encode:function(e,t){e=e?String(e):"",t=a(t),this._streaming||(this._encoder=new h(this._options)),this._streaming=Boolean(t.stream);for(var r,n=[],s=new i(function(e){for(var t=String(e),r=t.length,n=0,a=[];n<r;){var i=t.charCodeAt(n);if(i<55296||i>57343)a.push(i);else if(56320<=i&&i<=57343)a.push(65533);else if(55296<=i&&i<=56319)if(n===r-1)a.push(65533);else{var o=e.charCodeAt(n+1);if(56320<=o&&o<=57343){var s=1023&i,u=1023&o;a.push(65536+(s<<10)+u),n+=1}else a.push(65533)}n+=1}return a}(e));!s.endOfStream()&&(r=this._encoder.handler(s,s.read()))!==o;)Array.isArray(r)?n.push.apply(n,r):n.push(r);if(!this._streaming){for(;(r=this._encoder.handler(s,s.read()))!==o;)Array.isArray(r)?n.push.apply(n,r):n.push(r);this._encoder=null}return new Uint8Array(n)}}},1095:function(e,t,r){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.toBigIntLE=function(t){var r=e.from(t);r.reverse();var n=r.toString("hex");return 0===n.length?BigInt(0):BigInt("0x".concat(n))},t.toBigIntBE=function(e){var t=e.toString("hex");return 0===t.length?BigInt(0):BigInt("0x".concat(t))},t.toBufferLE=function(t,r){var n=t.toString(16),a=e.from(n.padStart(2*r,"0").slice(0,2*r),"hex");return a.reverse(),a},t.toBufferBE=function(t,r){var n=t.toString(16);return e.from(n.padStart(2*r,"0").slice(0,2*r),"hex")}}).call(this,r(21).Buffer)},1096:function(e,t,r){"use strict";var n=r(1091).v4,a=r(1097),i=function e(t,r){if(!(this instanceof e))return new e(t,r);r||(r={}),this.options={reviver:"undefined"!==typeof r.reviver?r.reviver:null,replacer:"undefined"!==typeof r.replacer?r.replacer:null,generator:"undefined"!==typeof r.generator?r.generator:function(){return n()},version:"undefined"!==typeof r.version?r.version:2,notificationIdNull:"boolean"===typeof r.notificationIdNull&&r.notificationIdNull},this.callServer=t};e.exports=i,i.prototype.request=function(e,t,r,n){var i,o=this,s=null,u=Array.isArray(e)&&"function"===typeof t;if(1===this.options.version&&u)throw new TypeError("JSON-RPC 1.0 does not support batching");if(u||!u&&e&&"object"===typeof e&&"function"===typeof t)n=t,s=e;else{"function"===typeof r&&(n=r,r=void 0);var c="function"===typeof n;try{s=a(e,t,r,{generator:this.options.generator,version:this.options.version,notificationIdNull:this.options.notificationIdNull})}catch(f){if(c)return n(f);throw f}if(!c)return s}try{i=JSON.stringify(s,this.options.replacer)}catch(f){return n(f)}return this.callServer(i,(function(e,t){o._parseResponse(e,t,n)})),s},i.prototype._parseResponse=function(e,t,r){if(e)r(e);else{if(!t)return r();var n;try{n=JSON.parse(t,this.options.reviver)}catch(e){return r(e)}if(3===r.length){if(Array.isArray(n)){var a=function(e){return"undefined"!==typeof e.error};return r(null,n.filter(a),n.filter((function(e){return!a(e)})))}return r(null,n.error,n.result)}r(null,n)}}},1097:function(e,t,r){"use strict";var n=r(1091).v4;e.exports=function(e,t,r,a){if("string"!==typeof e)throw new TypeError(e+" must be a string");var i="number"===typeof(a=a||{}).version?a.version:2;if(1!==i&&2!==i)throw new TypeError(i+" must be 1 or 2");var o={method:e};if(2===i&&(o.jsonrpc="2.0"),t){if("object"!==typeof t&&!Array.isArray(t))throw new TypeError(t+" must be an object, array or omitted");o.params=t}if("undefined"===typeof r){var s="function"===typeof a.generator?a.generator:function(){return n()};o.id=s(o,a)}else 2===i&&null===r?a.notificationIdNull&&(o.id=null):o.id=r;return o}},1098:function(e,t,r){"use strict";(function(e){var n=r(132);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=n(r(3)),i=n(r(12)),o=n(r(90)),s=n(r(18)),u=n(r(19)),c=n(r(24)),f=n(r(42)),l=n(r(23)),h=r(1082);function d(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=(0,l.default)(e);if(t){var a=(0,l.default)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return(0,f.default)(this,r)}}var p=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var a=0;for(n=Object.getOwnPropertySymbols(e);a<n.length;a++)t.indexOf(n[a])<0&&Object.prototype.propertyIsEnumerable.call(e,n[a])&&(r[n[a]]=e[n[a]])}return r},v=function(t){(0,c.default)(n,t);var r=d(n);function n(e){var t,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"ws://localhost:8080",i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=arguments.length>3?arguments[3]:void 0;(0,s.default)(this,n);var u=i.autoconnect,c=void 0===u||u,f=i.reconnect,l=void 0===f||f,h=i.reconnect_interval,d=void 0===h?1e3:h,v=i.max_reconnects,b=void 0===v?5:v,y=p(i,["autoconnect","reconnect","reconnect_interval","max_reconnects"]);return(t=r.call(this)).webSocketFactory=e,t.queue={},t.rpc_id=0,t.address=a,t.autoconnect=c,t.ready=!1,t.reconnect=l,t.reconnect_timer_id=void 0,t.reconnect_interval=d,t.max_reconnects=b,t.rest_options=y,t.current_reconnects=0,t.generate_request_id=o||function(){return++t.rpc_id},t.autoconnect&&t._connect(t.address,Object.assign({autoconnect:t.autoconnect,reconnect:t.reconnect,reconnect_interval:t.reconnect_interval,max_reconnects:t.max_reconnects},t.rest_options)),t}return(0,u.default)(n,[{key:"connect",value:function(){this.socket||this._connect(this.address,Object.assign({autoconnect:this.autoconnect,reconnect:this.reconnect,reconnect_interval:this.reconnect_interval,max_reconnects:this.max_reconnects},this.rest_options))}},{key:"call",value:function(e,t,r,n){var a=this;return n||"object"!==(0,o.default)(r)||(n=r,r=null),new Promise((function(i,o){if(!a.ready)return o(new Error("socket not ready"));var s=a.generate_request_id(e,t),u={jsonrpc:"2.0",method:e,params:t||null,id:s};a.socket.send(JSON.stringify(u),n,(function(e){if(e)return o(e);a.queue[s]={promise:[i,o]},r&&(a.queue[s].timeout=setTimeout((function(){delete a.queue[s],o(new Error("reply timeout"))}),r))}))}))}},{key:"login",value:function(){var e=(0,i.default)(a.default.mark((function e(t){var r;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.call("rpc.login",t);case 2:if(r=e.sent){e.next=5;break}throw new Error("authentication failed");case 5:return e.abrupt("return",r);case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"listMethods",value:function(){var e=(0,i.default)(a.default.mark((function e(){return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.call("__listMethods");case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"notify",value:function(e,t){var r=this;return new Promise((function(n,a){if(!r.ready)return a(new Error("socket not ready"));var i={jsonrpc:"2.0",method:e,params:t||null};r.socket.send(JSON.stringify(i),(function(e){if(e)return a(e);n()}))}))}},{key:"subscribe",value:function(){var e=(0,i.default)(a.default.mark((function e(t){var r;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"string"===typeof t&&(t=[t]),e.next=3,this.call("rpc.on",t);case 3:if(r=e.sent,"string"!==typeof t||"ok"===r[t]){e.next=6;break}throw new Error("Failed subscribing to an event '"+t+"' with: "+r[t]);case 6:return e.abrupt("return",r);case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"unsubscribe",value:function(){var e=(0,i.default)(a.default.mark((function e(t){var r;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"string"===typeof t&&(t=[t]),e.next=3,this.call("rpc.off",t);case 3:if(r=e.sent,"string"!==typeof t||"ok"===r[t]){e.next=6;break}throw new Error("Failed unsubscribing from an event with: "+r);case 6:return e.abrupt("return",r);case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"close",value:function(e,t){this.socket.close(e||1e3,t)}},{key:"_connect",value:function(t,r){var n=this;clearTimeout(this.reconnect_timer_id),this.socket=this.webSocketFactory(t,r),this.socket.addEventListener("open",(function(){n.ready=!0,n.emit("open"),n.current_reconnects=0})),this.socket.addEventListener("message",(function(t){var r=t.data;r instanceof ArrayBuffer&&(r=e.from(r).toString());try{r=JSON.parse(r)}catch(o){return}if(r.notification&&n.listeners(r.notification).length){if(!Object.keys(r.params).length)return n.emit(r.notification);var a=[r.notification];if(r.params.constructor===Object)a.push(r.params);else for(var i=0;i<r.params.length;i++)a.push(r.params[i]);return Promise.resolve().then((function(){n.emit.apply(n,a)}))}if(!n.queue[r.id])return r.method&&r.params?Promise.resolve().then((function(){n.emit(r.method,r.params)})):void 0;"error"in r==="result"in r&&n.queue[r.id].promise[1](new Error('Server response malformed. Response must include either "result" or "error", but not both.')),n.queue[r.id].timeout&&clearTimeout(n.queue[r.id].timeout),r.error?n.queue[r.id].promise[1](r.error):n.queue[r.id].promise[0](r.result),delete n.queue[r.id]})),this.socket.addEventListener("error",(function(e){return n.emit("error",e)})),this.socket.addEventListener("close",(function(e){var a=e.code,i=e.reason;n.ready&&setTimeout((function(){return n.emit("close",a,i)}),0),n.ready=!1,n.socket=void 0,1e3!==a&&(n.current_reconnects++,n.reconnect&&(n.max_reconnects>n.current_reconnects||0===n.max_reconnects)&&(n.reconnect_timer_id=setTimeout((function(){return n._connect(t,r)}),n.reconnect_interval)))}))}}]),n}(h.EventEmitter);t.default=v}).call(this,r(21).Buffer)},1099:function(e,t,r){"use strict";var n=r(132);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){return new f(e,t)};var a=n(r(18)),i=n(r(19)),o=n(r(24)),s=n(r(42)),u=n(r(23));function c(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=(0,u.default)(e);if(t){var a=(0,u.default)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return(0,s.default)(this,r)}}var f=function(e){(0,o.default)(r,e);var t=c(r);function r(e,n,i){var o;return(0,a.default)(this,r),(o=t.call(this)).socket=new window.WebSocket(e,i),o.socket.onopen=function(){return o.emit("open")},o.socket.onmessage=function(e){return o.emit("message",e.data)},o.socket.onerror=function(e){return o.emit("error",e)},o.socket.onclose=function(e){o.emit("close",e.code,e.reason)},o}return(0,i.default)(r,[{key:"send",value:function(e,t,r){var n=r||t;try{this.socket.send(e),n()}catch(a){n(a)}}},{key:"close",value:function(e,t){this.socket.close(e,t)}},{key:"addEventListener",value:function(e,t,r){this.socket.addEventListener(e,t,r)}}]),r}(r(1082).EventEmitter)},1100:function(e,t,r){"use strict";var n=r(18).default,a=r(19).default,i=r(62).default;Object.defineProperty(t,"__esModule",{value:!0}),t.hash_to_ristretto255=t.hashToRistretto255=t.RistrettoPoint=t.encodeToCurve=t.hashToCurve=t.edwardsToMontgomeryPriv=t.edwardsToMontgomery=t.edwardsToMontgomeryPub=t.x25519=t.ed25519ph=t.ed25519ctx=t.ed25519=t.ED25519_TORSION_SUBGROUP=void 0;var o=r(1101),s=r(1077),u=r(1103),c=r(1104),f=r(1078),l=r(1076),h=r(1086),d=BigInt("57896044618658097711785492504343953926634992332820282019728792003956564819949"),p=BigInt("19681161376707505956807079304988542015446066515923890162744021073123829784752"),v=BigInt(0),b=BigInt(1),y=BigInt(2),g=BigInt(5),m=BigInt(10),w=BigInt(20),k=BigInt(40),x=BigInt(80);function O(e){var t=d,r=e*e%t*e%t,n=(0,f.pow2)(r,y,t)*r%t,a=(0,f.pow2)(n,b,t)*e%t,i=(0,f.pow2)(a,g,t)*a%t,o=(0,f.pow2)(i,m,t)*i%t,s=(0,f.pow2)(o,w,t)*o%t,u=(0,f.pow2)(s,k,t)*s%t,c=(0,f.pow2)(u,x,t)*u%t,l=(0,f.pow2)(c,x,t)*u%t,h=(0,f.pow2)(l,m,t)*i%t;return{pow_p_5_8:(0,f.pow2)(h,y,t)*e%t,b2:r}}function S(e){return e[0]&=248,e[31]&=127,e[31]|=64,e}function E(e,t){var r=d,n=(0,f.mod)(t*t*t,r),a=O(e*(0,f.mod)(n*n*t,r)).pow_p_5_8,i=(0,f.mod)(e*n*a,r),o=(0,f.mod)(t*i*i,r),s=i,u=(0,f.mod)(i*p,r),c=o===e,l=o===(0,f.mod)(-e,r),h=o===(0,f.mod)(-e*p,r);return c&&(i=s),(l||h)&&(i=u),(0,f.isNegativeLE)(i,r)&&(i=(0,f.mod)(-i,r)),{isValid:c||l,value:i}}t.ED25519_TORSION_SUBGROUP=["0100000000000000000000000000000000000000000000000000000000000000","c7176a703d4dd84fba3c0b760d10670f2a2053fa2c39ccc64ec7fd7792ac037a","0000000000000000000000000000000000000000000000000000000000000080","26e8958fc2b227b045c3f489f2ef98f0d5dfac05d3c63339b13802886d53fc05","ecffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff7f","26e8958fc2b227b045c3f489f2ef98f0d5dfac05d3c63339b13802886d53fc85","0000000000000000000000000000000000000000000000000000000000000000","c7176a703d4dd84fba3c0b760d10670f2a2053fa2c39ccc64ec7fd7792ac03fa"];var B=(0,f.Field)(d,void 0,!0),j={a:BigInt(-1),d:BigInt("37095705934669439343138083508754565189542113879843219016388785533085940283555"),Fp:B,n:BigInt("7237005577332262213973186563042994240857116359379907606001950938285454250989"),h:BigInt(8),Gx:BigInt("15112221349535400772501151409588531511454012693041857206046113283949847762202"),Gy:BigInt("46316835694926478169428394003475163141307993866256225615783033603165251855960"),hash:o.sha512,randomBytes:s.randomBytes,adjustScalarBytes:S,uvRatio:E};function I(e,t,r){if(t.length>255)throw new Error("Context is too big");return(0,s.concatBytes)((0,s.utf8ToBytes)("SigEd25519 no Ed25519 collisions"),new Uint8Array([r?1:0,t.length]),t,e)}function A(e){var r=t.ed25519.ExtendedPoint.fromHex(e).y,n=BigInt(1);return B.toBytes(B.create((n+r)*B.inv(n-r)))}t.ed25519=(0,u.twistedEdwards)(j),t.ed25519ctx=(0,u.twistedEdwards)(i(i({},j),{},{domain:I})),t.ed25519ph=(0,u.twistedEdwards)(i(i({},j),{},{domain:I,prehash:o.sha512})),t.x25519=(0,c.montgomery)({P:d,a:BigInt(486662),montgomeryBits:255,nByteLength:32,Gu:BigInt(9),powPminus2:function(e){var t=d,r=O(e),n=r.pow_p_5_8,a=r.b2;return(0,f.mod)((0,f.pow2)(n,BigInt(3),t)*a,t)},adjustScalarBytes:S,randomBytes:s.randomBytes}),t.edwardsToMontgomeryPub=A,t.edwardsToMontgomery=A,t.edwardsToMontgomeryPriv=function(e){var t=j.hash(e.subarray(0,32));return j.adjustScalarBytes(t).subarray(0,32)};var _=(B.ORDER+BigInt(3))/BigInt(8),P=B.pow(y,_),T=B.sqrt(B.neg(B.ONE)),C=(B.ORDER-BigInt(5))/BigInt(8),L=BigInt(486662);var R=(0,f.FpSqrtEven)(B,B.neg(BigInt(486664)));function N(e){var t=function(e){var t=B.sqr(e);t=B.mul(t,y);var r=B.add(t,B.ONE),n=B.neg(L),a=B.sqr(r),i=B.mul(a,r),o=B.mul(t,L);o=B.mul(o,n),o=B.add(o,a),o=B.mul(o,n);var s=B.sqr(i);a=B.sqr(s),s=B.mul(s,i),s=B.mul(s,o),a=B.mul(a,s);var u=B.pow(a,C);u=B.mul(u,s);var c=B.mul(u,T);a=B.sqr(u),a=B.mul(a,i);var f=B.eql(a,o),l=B.cmov(c,u,f),h=B.mul(n,t),d=B.mul(u,e);d=B.mul(d,P);var p=B.mul(d,T),v=B.mul(o,t);a=B.sqr(d),a=B.mul(a,i);var g=B.eql(a,v),m=B.cmov(p,d,g);a=B.sqr(l),a=B.mul(a,i);var w=B.eql(a,o),k=B.cmov(h,n,w),x=B.cmov(m,l,w),O=B.isOdd(x);return{xMn:k,xMd:r,yMn:x=B.cmov(x,B.neg(x),w!==O),yMd:b}}(e),r=t.xMn,n=t.xMd,a=t.yMn,i=t.yMd,o=B.mul(r,i);o=B.mul(o,R);var s=B.mul(n,a),u=B.sub(r,n),c=B.add(r,n),f=B.mul(s,c),l=B.eql(f,B.ZERO);o=B.cmov(o,B.ZERO,l),s=B.cmov(s,B.ONE,l),u=B.cmov(u,B.ONE,l),c=B.cmov(c,B.ONE,l);var h=B.invertBatch([s,c]);return{x:B.mul(o,h[0]),y:B.mul(u,h[1])}}var U=function(){return(0,h.createHasher)(t.ed25519.ExtendedPoint,(function(e){return N(e[0])}),{DST:"edwards25519_XMD:SHA-512_ELL2_RO_",encodeDST:"edwards25519_XMD:SHA-512_ELL2_NU_",p:B.ORDER,m:1,k:128,expand:"xmd",hash:o.sha512})}();function q(e){if(!(e instanceof Z))throw new Error("RistrettoPoint expected")}t.hashToCurve=U.hashToCurve,t.encodeToCurve=U.encodeToCurve;var z=p,W=BigInt("25063068953384623474111414158702152701244531502492656460079210482610430750235"),H=BigInt("54469307008909316920995813868745141605393597292927456921205312896311721017578"),K=BigInt("1159843021668779879193775521855586647937357759715417654439879720876111806838"),M=BigInt("40440834346308536858101042469323190826248399146238708352240133220865137265952"),D=function(e){return E(b,e)},F=BigInt("0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff"),V=function(e){return t.ed25519.CURVE.Fp.create((0,l.bytesToNumberLE)(e)&F)};function G(e){var r=t.ed25519.CURVE.d,n=t.ed25519.CURVE.Fp.ORDER,a=t.ed25519.CURVE.Fp.create,i=a(z*e*e),o=a((i+b)*K),s=BigInt(-1),u=a((s-r*i)*a(i+r)),c=E(o,u),l=c.isValid,h=c.value,d=a(h*e);(0,f.isNegativeLE)(d,n)||(d=a(-d)),l||(h=d),l||(s=i);var p=a(s*(i-b)*M-u),v=h*h,y=a((h+h)*u),g=a(p*W),m=a(b-v),w=a(b+v);return new t.ed25519.ExtendedPoint(a(y*w),a(m*g),a(g*w),a(y*m))}var Z=function(){function e(t){n(this,e),this.ep=t}return a(e,[{key:"toRawBytes",value:function(){var e,r=this.ep,n=r.ex,a=r.ey,i=r.ez,o=r.et,s=t.ed25519.CURVE.Fp.ORDER,u=t.ed25519.CURVE.Fp.create,c=u(u(i+a)*u(i-a)),h=u(n*a),d=u(h*h),p=D(u(c*d)).value,v=u(p*c),b=u(p*h),y=u(v*b*o);if((0,f.isNegativeLE)(o*y,s)){var g=u(a*z),m=u(n*z);n=g,a=m,e=u(v*H)}else e=b;(0,f.isNegativeLE)(n*y,s)&&(a=u(-a));var w=u((i-a)*e);return(0,f.isNegativeLE)(w,s)&&(w=u(-w)),(0,l.numberToBytesLE)(w,32)}},{key:"toHex",value:function(){return(0,l.bytesToHex)(this.toRawBytes())}},{key:"toString",value:function(){return this.toHex()}},{key:"equals",value:function(e){q(e);var r=this.ep,n=r.ex,a=r.ey,i=e.ep,o=i.ex,s=i.ey,u=t.ed25519.CURVE.Fp.create,c=u(n*s)===u(a*o),f=u(a*s)===u(n*o);return c||f}},{key:"add",value:function(t){return q(t),new e(this.ep.add(t.ep))}},{key:"subtract",value:function(t){return q(t),new e(this.ep.subtract(t.ep))}},{key:"multiply",value:function(t){return new e(this.ep.multiply(t))}},{key:"multiplyUnsafe",value:function(t){return new e(this.ep.multiplyUnsafe(t))}}],[{key:"fromAffine",value:function(r){return new e(t.ed25519.ExtendedPoint.fromAffine(r))}},{key:"hashToCurve",value:function(t){t=(0,l.ensureBytes)("ristrettoHash",t,64);var r=G(V(t.slice(0,32))),n=G(V(t.slice(32,64)));return new e(r.add(n))}},{key:"fromHex",value:function(r){r=(0,l.ensureBytes)("ristrettoHex",r,32);var n=t.ed25519.CURVE,a=n.a,i=n.d,o=t.ed25519.CURVE.Fp.ORDER,s=t.ed25519.CURVE.Fp.create,u="RistrettoPoint.fromHex: the hex is not valid encoding of RistrettoPoint",c=V(r);if(!(0,l.equalBytes)((0,l.numberToBytesLE)(c,32),r)||(0,f.isNegativeLE)(c,o))throw new Error(u);var h=s(c*c),d=s(b+a*h),p=s(b-a*h),y=s(d*d),g=s(p*p),m=s(a*i*y-g),w=D(s(m*g)),k=w.isValid,x=w.value,O=s(x*p),S=s(x*O*m),E=s((c+c)*O);(0,f.isNegativeLE)(E,o)&&(E=s(-E));var B=s(d*S),j=s(E*B);if(!k||(0,f.isNegativeLE)(j,o)||B===v)throw new Error(u);return new e(new t.ed25519.ExtendedPoint(E,B,b,j))}}]),e}();t.RistrettoPoint=(Z.BASE||(Z.BASE=new Z(t.ed25519.ExtendedPoint.BASE)),Z.ZERO||(Z.ZERO=new Z(t.ed25519.ExtendedPoint.ZERO)),Z);t.hashToRistretto255=function(e,t){var r=t.DST,n="string"===typeof r?(0,s.utf8ToBytes)(r):r,a=(0,h.expand_message_xmd)(e,n,64,o.sha512);return Z.hashToCurve(a)},t.hash_to_ristretto255=t.hashToRistretto255},1101:function(e,t,r){"use strict";var n=r(18).default,a=r(19).default,i=r(24).default,o=r(45).default,s=r(56).default;Object.defineProperty(t,"__esModule",{value:!0}),t.sha384=t.sha512_256=t.sha512_224=t.sha512=t.SHA512=void 0;var u=r(1083),c=r(1084),f=r(1077),l=s(function(){return c.default.split(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map((function(e){return BigInt(e)})))}(),2),h=l[0],d=l[1],p=new Uint32Array(80),v=new Uint32Array(80),b=function(e){i(r,e);var t=o(r);function r(){var e;return n(this,r),(e=t.call(this,128,64,16,!1)).Ah=1779033703,e.Al=-205731576,e.Bh=-1150833019,e.Bl=-2067093701,e.Ch=1013904242,e.Cl=-23791573,e.Dh=-1521486534,e.Dl=1595750129,e.Eh=1359893119,e.El=-1377402159,e.Fh=-1694144372,e.Fl=725511199,e.Gh=528734635,e.Gl=-79577749,e.Hh=1541459225,e.Hl=327033209,e}return a(r,[{key:"get",value:function(){return[this.Ah,this.Al,this.Bh,this.Bl,this.Ch,this.Cl,this.Dh,this.Dl,this.Eh,this.El,this.Fh,this.Fl,this.Gh,this.Gl,this.Hh,this.Hl]}},{key:"set",value:function(e,t,r,n,a,i,o,s,u,c,f,l,h,d,p,v){this.Ah=0|e,this.Al=0|t,this.Bh=0|r,this.Bl=0|n,this.Ch=0|a,this.Cl=0|i,this.Dh=0|o,this.Dl=0|s,this.Eh=0|u,this.El=0|c,this.Fh=0|f,this.Fl=0|l,this.Gh=0|h,this.Gl=0|d,this.Hh=0|p,this.Hl=0|v}},{key:"process",value:function(e,t){for(var r=0;r<16;r++,t+=4)p[r]=e.getUint32(t),v[r]=e.getUint32(t+=4);for(var n=16;n<80;n++){var a=0|p[n-15],i=0|v[n-15],o=c.default.rotrSH(a,i,1)^c.default.rotrSH(a,i,8)^c.default.shrSH(a,i,7),s=c.default.rotrSL(a,i,1)^c.default.rotrSL(a,i,8)^c.default.shrSL(a,i,7),u=0|p[n-2],f=0|v[n-2],l=c.default.rotrSH(u,f,19)^c.default.rotrBH(u,f,61)^c.default.shrSH(u,f,6),b=c.default.rotrSL(u,f,19)^c.default.rotrBL(u,f,61)^c.default.shrSL(u,f,6),y=c.default.add4L(s,b,v[n-7],v[n-16]),g=c.default.add4H(y,o,l,p[n-7],p[n-16]);p[n]=0|g,v[n]=0|y}for(var m=this.Ah,w=this.Al,k=this.Bh,x=this.Bl,O=this.Ch,S=this.Cl,E=this.Dh,B=this.Dl,j=this.Eh,I=this.El,A=this.Fh,_=this.Fl,P=this.Gh,T=this.Gl,C=this.Hh,L=this.Hl,R=0;R<80;R++){var N=c.default.rotrSH(j,I,14)^c.default.rotrSH(j,I,18)^c.default.rotrBH(j,I,41),U=c.default.rotrSL(j,I,14)^c.default.rotrSL(j,I,18)^c.default.rotrBL(j,I,41),q=j&A^~j&P,z=I&_^~I&T,W=c.default.add5L(L,U,z,d[R],v[R]),H=c.default.add5H(W,C,N,q,h[R],p[R]),K=0|W,M=c.default.rotrSH(m,w,28)^c.default.rotrBH(m,w,34)^c.default.rotrBH(m,w,39),D=c.default.rotrSL(m,w,28)^c.default.rotrBL(m,w,34)^c.default.rotrBL(m,w,39),F=m&k^m&O^k&O,V=w&x^w&S^x&S;C=0|P,L=0|T,P=0|A,T=0|_,A=0|j,_=0|I;var G=c.default.add(0|E,0|B,0|H,0|K);j=G.h,I=G.l,E=0|O,B=0|S,O=0|k,S=0|x,k=0|m,x=0|w;var Z=c.default.add3L(K,D,V);m=c.default.add3H(Z,H,M,F),w=0|Z}var J=c.default.add(0|this.Ah,0|this.Al,0|m,0|w);m=J.h,w=J.l;var Y=c.default.add(0|this.Bh,0|this.Bl,0|k,0|x);k=Y.h,x=Y.l;var X=c.default.add(0|this.Ch,0|this.Cl,0|O,0|S);O=X.h,S=X.l;var $=c.default.add(0|this.Dh,0|this.Dl,0|E,0|B);E=$.h,B=$.l;var Q=c.default.add(0|this.Eh,0|this.El,0|j,0|I);j=Q.h,I=Q.l;var ee=c.default.add(0|this.Fh,0|this.Fl,0|A,0|_);A=ee.h,_=ee.l;var te=c.default.add(0|this.Gh,0|this.Gl,0|P,0|T);P=te.h,T=te.l;var re=c.default.add(0|this.Hh,0|this.Hl,0|C,0|L);C=re.h,L=re.l,this.set(m,w,k,x,O,S,E,B,j,I,A,_,P,T,C,L)}},{key:"roundClean",value:function(){p.fill(0),v.fill(0)}},{key:"destroy",value:function(){this.buffer.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}]),r}(u.SHA2);t.SHA512=b;var y=function(e){i(r,e);var t=o(r);function r(){var e;return n(this,r),(e=t.call(this)).Ah=-1942145080,e.Al=424955298,e.Bh=1944164710,e.Bl=-1982016298,e.Ch=502970286,e.Cl=855612546,e.Dh=1738396948,e.Dl=1479516111,e.Eh=258812777,e.El=2077511080,e.Fh=2011393907,e.Fl=79989058,e.Gh=1067287976,e.Gl=1780299464,e.Hh=286451373,e.Hl=-1848208735,e.outputLen=28,e}return a(r)}(b),g=function(e){i(r,e);var t=o(r);function r(){var e;return n(this,r),(e=t.call(this)).Ah=573645204,e.Al=-64227540,e.Bh=-1621794909,e.Bl=-934517566,e.Ch=596883563,e.Cl=1867755857,e.Dh=-1774684391,e.Dl=1497426621,e.Eh=-1775747358,e.El=-1467023389,e.Fh=-1101128155,e.Fl=1401305490,e.Gh=721525244,e.Gl=746961066,e.Hh=246885852,e.Hl=-2117784414,e.outputLen=32,e}return a(r)}(b),m=function(e){i(r,e);var t=o(r);function r(){var e;return n(this,r),(e=t.call(this)).Ah=-876896931,e.Al=-1056596264,e.Bh=1654270250,e.Bl=914150663,e.Ch=-1856437926,e.Cl=812702999,e.Dh=355462360,e.Dl=-150054599,e.Eh=1731405415,e.El=-4191439,e.Fh=-1900787065,e.Fl=1750603025,e.Gh=-619958771,e.Gl=1694076839,e.Hh=1203062813,e.Hl=-1090891868,e.outputLen=48,e}return a(r)}(b);t.sha512=(0,f.wrapConstructor)((function(){return new b})),t.sha512_224=(0,f.wrapConstructor)((function(){return new y})),t.sha512_256=(0,f.wrapConstructor)((function(){return new g})),t.sha384=(0,f.wrapConstructor)((function(){return new m}))},1102:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.crypto=void 0,t.crypto="object"===typeof globalThis&&"crypto"in globalThis?globalThis.crypto:void 0},1103:function(e,t,r){"use strict";var n=r(18).default,a=r(19).default,i=r(62).default;Object.defineProperty(t,"__esModule",{value:!0}),t.twistedEdwards=void 0;var o=r(1078),s=r(1076),u=r(1076),c=r(1085),f=BigInt(0),l=BigInt(1),h=BigInt(2),d=BigInt(8),p={zip215:!0};t.twistedEdwards=function(e){var t=function(e){var t=(0,c.validateBasic)(e);return s.validateObject(e,{hash:"function",a:"bigint",d:"bigint",randomBytes:"function"},{adjustScalarBytes:"function",domain:"function",uvRatio:"function",mapToCurve:"function"}),Object.freeze(i({},t))}(e),r=t.Fp,v=t.n,b=t.prehash,y=t.hash,g=t.randomBytes,m=t.nByteLength,w=t.h,k=h<<BigInt(8*m)-l,x=r.create,O=t.uvRatio||function(e,t){try{return{isValid:!0,value:r.sqrt(e*r.inv(t))}}catch(n){return{isValid:!1,value:f}}},S=t.adjustScalarBytes||function(e){return e},E=t.domain||function(e,t,r){if(t.length||r)throw new Error("Contexts/pre-hash are not supported");return e},B=function(e){return"bigint"===typeof e&&f<e},j=function(e,t){return B(e)&&B(t)&&e<t},I=function(e){return e===f||j(e,k)};function A(e,t){if(j(e,t))return e;throw new Error("Expected valid scalar < ".concat(t,", got ").concat(typeof e," ").concat(e))}function _(e){return e===f?e:A(e,v)}var P=new Map;function T(e){if(!(e instanceof C))throw new Error("ExtendedPoint expected")}var C=function(){function e(t,r,a,i){if(n(this,e),this.ex=t,this.ey=r,this.ez=a,this.et=i,!I(t))throw new Error("x required");if(!I(r))throw new Error("y required");if(!I(a))throw new Error("z required");if(!I(i))throw new Error("t required")}return a(e,[{key:"x",get:function(){return this.toAffine().x}},{key:"y",get:function(){return this.toAffine().y}},{key:"_setWindowSize",value:function(e){this._WINDOW_SIZE=e,P.delete(this)}},{key:"assertValidity",value:function(){var e=t.a,r=t.d;if(this.is0())throw new Error("bad point: ZERO");var n=this.ex,a=this.ey,i=this.ez,o=this.et,s=x(n*n),u=x(a*a),c=x(i*i),f=x(c*c),l=x(s*e);if(x(c*x(l+u))!==x(f+x(r*x(s*u))))throw new Error("bad point: equation left != right (1)");if(x(n*a)!==x(i*o))throw new Error("bad point: equation left != right (2)")}},{key:"equals",value:function(e){T(e);var t=this.ex,r=this.ey,n=this.ez,a=e.ex,i=e.ey,o=e.ez,s=x(t*o),u=x(a*n),c=x(r*o),f=x(i*n);return s===u&&c===f}},{key:"is0",value:function(){return this.equals(e.ZERO)}},{key:"negate",value:function(){return new e(x(-this.ex),this.ey,this.ez,x(-this.et))}},{key:"double",value:function(){var r=t.a,n=this.ex,a=this.ey,i=this.ez,o=x(n*n),s=x(a*a),u=x(h*x(i*i)),c=x(r*o),f=n+a,l=x(x(f*f)-o-s),d=c+s,p=d-u,v=c-s,b=x(l*p),y=x(d*v),g=x(l*v);return new e(b,y,x(p*d),g)}},{key:"add",value:function(r){T(r);var n=t.a,a=t.d,i=this.ex,o=this.ey,s=this.ez,u=this.et,c=r.ex,l=r.ey,d=r.ez,p=r.et;if(n===BigInt(-1)){var v=x((o-i)*(l+c)),b=x((o+i)*(l-c)),y=x(b-v);if(y===f)return this.double();var g=x(s*h*p),m=x(u*h*d),w=m+g,k=b+v,O=m-g,S=x(w*y),E=x(k*O),B=x(w*O);return new e(S,E,x(y*k),B)}var j=x(i*c),I=x(o*l),A=x(u*a*p),_=x(s*d),P=x((i+o)*(c+l)-j-I),C=_-A,L=_+A,R=x(I-n*j),N=x(P*C),U=x(L*R),q=x(P*R);return new e(N,U,x(C*L),q)}},{key:"subtract",value:function(e){return this.add(e.negate())}},{key:"wNAF",value:function(t){return N.wNAFCached(this,P,t,e.normalizeZ)}},{key:"multiply",value:function(t){var r=this.wNAF(A(t,v)),n=r.p,a=r.f;return e.normalizeZ([n,a])[0]}},{key:"multiplyUnsafe",value:function(e){var t=_(e);return t===f?R:this.equals(R)||t===l?this:this.equals(L)?this.wNAF(t).p:N.unsafeLadder(this,t)}},{key:"isSmallOrder",value:function(){return this.multiplyUnsafe(w).is0()}},{key:"isTorsionFree",value:function(){return N.unsafeLadder(this,v).is0()}},{key:"toAffine",value:function(e){var t=this.ex,n=this.ey,a=this.ez,i=this.is0();null==e&&(e=i?d:r.inv(a));var o=x(t*e),s=x(n*e),u=x(a*e);if(i)return{x:f,y:l};if(u!==l)throw new Error("invZ was invalid");return{x:o,y:s}}},{key:"clearCofactor",value:function(){var e=t.h;return e===l?this:this.multiplyUnsafe(e)}},{key:"toRawBytes",value:function(){var e=this.toAffine(),t=e.x,n=e.y,a=s.numberToBytesLE(n,r.BYTES);return a[a.length-1]|=t&l?128:0,a}},{key:"toHex",value:function(){return s.bytesToHex(this.toRawBytes())}}],[{key:"fromAffine",value:function(t){if(t instanceof e)throw new Error("extended point not allowed");var r=t||{},n=r.x,a=r.y;if(!I(n)||!I(a))throw new Error("invalid affine point");return new e(n,a,l,x(n*a))}},{key:"normalizeZ",value:function(t){var n=r.invertBatch(t.map((function(e){return e.ez})));return t.map((function(e,t){return e.toAffine(n[t])})).map(e.fromAffine)}},{key:"fromHex",value:function(n){var a=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=t.d,o=t.a,c=r.BYTES,h=(n=(0,u.ensureBytes)("pointHex",n,c)).slice(),d=n[c-1];h[c-1]=-129&d;var p=s.bytesToNumberLE(h);p===f||A(p,a?k:r.ORDER);var v=x(p*p),b=x(v-l),y=x(i*v-o),g=O(b,y),m=g.isValid,w=g.value;if(!m)throw new Error("Point.fromHex: invalid y coordinate");var S=(w&l)===l,E=0!==(128&d);if(!a&&w===f&&E)throw new Error("Point.fromHex: x=0 and x_0=1");return E!==S&&(w=x(-w)),e.fromAffine({x:w,y:p})}},{key:"fromPrivateKey",value:function(e){return z(e).point}}]),e}();C.BASE=new C(t.Gx,t.Gy,l,x(t.Gx*t.Gy)),C.ZERO=new C(f,l,l,f);var L=C.BASE,R=C.ZERO,N=(0,c.wNAF)(C,8*m);function U(e){return(0,o.mod)(e,v)}function q(e){return U(s.bytesToNumberLE(e))}function z(e){var t=m;e=(0,u.ensureBytes)("private key",e,t);var r=(0,u.ensureBytes)("hashed private key",y(e),2*t),n=S(r.slice(0,t)),a=r.slice(t,2*t),i=q(n),o=L.multiply(i),s=o.toRawBytes();return{head:n,prefix:a,scalar:i,point:o,pointBytes:s}}function W(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Uint8Array,t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];var a=s.concatBytes.apply(s,r);return q(y(E(a,(0,u.ensureBytes)("context",e),!!b)))}var H=p;L._setWindowSize(8);var K={getExtendedPublicKey:z,randomPrivateKey:function(){return g(r.BYTES)},precompute:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:8,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:C.BASE;return t._setWindowSize(e),t.multiply(BigInt(3)),t}};return{CURVE:t,getPublicKey:function(e){return z(e).pointBytes},sign:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};e=(0,u.ensureBytes)("message",e),b&&(e=b(e));var a=z(t),i=a.prefix,o=a.scalar,c=a.pointBytes,f=W(n.context,i,e),l=L.multiply(f).toRawBytes(),h=U(f+W(n.context,l,c,e)*o);_(h);var d=s.concatBytes(l,s.numberToBytesLE(h,r.BYTES));return(0,u.ensureBytes)("result",d,2*m)},verify:function(e,t,n){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:H,i=a.context,o=a.zip215,c=r.BYTES;e=(0,u.ensureBytes)("signature",e,2*c),t=(0,u.ensureBytes)("message",t),b&&(t=b(t));var f,l,h,d=s.bytesToNumberLE(e.slice(c,2*c));try{f=C.fromHex(n,o),l=C.fromHex(e.slice(0,c),o),h=L.multiplyUnsafe(d)}catch(v){return!1}if(!o&&f.isSmallOrder())return!1;var p=W(i,l.toRawBytes(),f.toRawBytes(),t);return l.add(f.multiplyUnsafe(p)).subtract(h).clearCofactor().equals(C.ZERO)},ExtendedPoint:C,utils:K}}},1104:function(e,t,r){"use strict";var n=r(62).default;Object.defineProperty(t,"__esModule",{value:!0}),t.montgomery=void 0;var a=r(1078),i=r(1076),o=BigInt(0),s=BigInt(1);t.montgomery=function(e){var t,r=(t=e,(0,i.validateObject)(t,{a:"bigint"},{montgomeryBits:"isSafeInteger",nByteLength:"isSafeInteger",adjustScalarBytes:"function",domain:"function",powPminus2:"function",Gu:"bigint"}),Object.freeze(n({},t))),u=r.P,c=function(e){return(0,a.mod)(e,u)},f=r.montgomeryBits,l=Math.ceil(f/8),h=r.nByteLength,d=r.adjustScalarBytes||function(e){return e},p=r.powPminus2||function(e){return(0,a.pow)(e,u-BigInt(2),u)};function v(e,t,r){var n=c(e*(t-r));return[t=c(t-n),r=c(r+n)]}function b(e){if("bigint"===typeof e&&o<=e&&e<u)return e;throw new Error("Expected valid scalar 0 < scalar < CURVE.P")}var y=(r.a-BigInt(2))/BigInt(4);function g(e){return(0,i.numberToBytesLE)(c(e),l)}function m(e,t){var r=function(e){var t=(0,i.ensureBytes)("u coordinate",e,l);return h===l&&(t[h-1]&=127),(0,i.bytesToNumberLE)(t)}(t),n=function(e,t){for(var r,n=b(e),a=b(t),i=n,u=s,l=o,h=n,d=s,g=o,m=BigInt(f-1);m>=o;m--){var w=a>>m&s;u=(r=v(g^=w,u,h))[0],h=r[1],l=(r=v(g,l,d))[0],d=r[1],g=w;var k=u+l,x=c(k*k),O=u-l,S=c(O*O),E=x-S,B=h+d,j=c((h-d)*k),I=c(B*O),A=j+I,_=j-I;h=c(A*A),d=c(i*c(_*_)),u=c(x*S),l=c(E*(x+c(y*E)))}u=(r=v(g,u,h))[0],h=r[1],l=(r=v(g,l,d))[0],d=r[1];var P=p(l);return c(u*P)}(r,function(e){var t=(0,i.ensureBytes)("scalar",e);if(t.length!==l&&t.length!==h)throw new Error("Expected ".concat(l," or ").concat(h," bytes, got ").concat(t.length));return(0,i.bytesToNumberLE)(d(t))}(e));if(n===o)throw new Error("Invalid private or public key received");return g(n)}var w=g(r.Gu);function k(e){return m(e,w)}return{scalarMult:m,scalarMultBase:k,getSharedSecret:function(e,t){return m(e,t)},getPublicKey:function(e){return k(e)},utils:{randomPrivateKey:function(){return r.randomBytes(r.nByteLength)}},GuBytes:w}}},1105:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.encodeToCurve=t.hashToCurve=t.schnorr=t.secp256k1=void 0;var n=r(1087),a=r(1077),i=r(1078),o=r(1088),s=r(1076),u=r(1086),c=r(1106),f=BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),l=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),h=BigInt(1),d=BigInt(2),p=function(e,t){return(e+t/d)/t};function v(e){var t=f,r=BigInt(3),n=BigInt(6),a=BigInt(11),o=BigInt(22),s=BigInt(23),u=BigInt(44),c=BigInt(88),l=e*e*e%t,h=l*l*e%t,p=(0,i.pow2)(h,r,t)*h%t,v=(0,i.pow2)(p,r,t)*h%t,y=(0,i.pow2)(v,d,t)*l%t,g=(0,i.pow2)(y,a,t)*y%t,m=(0,i.pow2)(g,o,t)*g%t,w=(0,i.pow2)(m,u,t)*m%t,k=(0,i.pow2)(w,c,t)*w%t,x=(0,i.pow2)(k,u,t)*m%t,O=(0,i.pow2)(x,r,t)*h%t,S=(0,i.pow2)(O,s,t)*g%t,E=(0,i.pow2)(S,n,t)*l%t,B=(0,i.pow2)(E,d,t);if(!b.eql(b.sqr(B),e))throw new Error("Cannot find square root");return B}var b=(0,i.Field)(f,void 0,void 0,{sqrt:v});t.secp256k1=(0,c.createCurve)({a:BigInt(0),b:BigInt(7),Fp:b,n:l,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),h:BigInt(1),lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:function(e){var t=l,r=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),n=-h*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),a=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),o=r,s=BigInt("0x100000000000000000000000000000000"),u=p(o*e,t),c=p(-n*e,t),f=(0,i.mod)(e-u*r-c*a,t),d=(0,i.mod)(-u*n-c*o,t),v=f>s,b=d>s;if(v&&(f=t-f),b&&(d=t-d),f>s||d>s)throw new Error("splitScalar: Endomorphism failed, k="+e);return{k1neg:v,k1:f,k2neg:b,k2:d}}}},n.sha256);var y=BigInt(0),g=function(e){return"bigint"===typeof e&&y<e&&e<f},m=function(e){return"bigint"===typeof e&&y<e&&e<l},w={};function k(e){var t=w[e];if(void 0===t){var r=(0,n.sha256)(Uint8Array.from(e,(function(e){return e.charCodeAt(0)})));t=(0,s.concatBytes)(r,r),w[e]=t}for(var a=arguments.length,i=new Array(a>1?a-1:0),o=1;o<a;o++)i[o-1]=arguments[o];return(0,n.sha256)(s.concatBytes.apply(void 0,[t].concat(i)))}var x=function(e){return e.toRawBytes(!0).slice(1)},O=function(e){return(0,s.numberToBytesBE)(e,32)},S=function(e){return(0,i.mod)(e,f)},E=function(e){return(0,i.mod)(e,l)},B=t.secp256k1.ProjectivePoint,j=function(e,t,r){return B.BASE.multiplyAndAddUnsafe(e,t,r)};function I(e){var r=t.secp256k1.utils.normPrivateKeyToScalar(e),n=B.fromPrivateKey(r);return{scalar:n.hasEvenY()?r:E(-r),bytes:x(n)}}function A(e){if(!g(e))throw new Error("bad x: need 0 < x < p");var t=S(e*e),r=v(S(t*e+BigInt(7)));r%d!==y&&(r=S(-r));var n=new B(e,r,h);return n.assertValidity(),n}function _(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return E((0,s.bytesToNumberBE)(k.apply(void 0,["BIP0340/challenge"].concat(t))))}function P(e){return I(e).bytes}function T(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:(0,a.randomBytes)(32),n=(0,s.ensureBytes)("message",e),i=I(t),o=i.bytes,u=i.scalar,c=(0,s.ensureBytes)("auxRand",r,32),f=O(u^(0,s.bytesToNumberBE)(k("BIP0340/aux",c))),l=k("BIP0340/nonce",f,o,n),h=E((0,s.bytesToNumberBE)(l));if(h===y)throw new Error("sign failed: k is zero");var d=I(h),p=d.bytes,v=d.scalar,b=_(p,o,n),g=new Uint8Array(64);if(g.set(p,0),g.set(O(E(v+b*u)),32),!C(g,n,o))throw new Error("sign: Invalid signature produced");return g}function C(e,t,r){var n=(0,s.ensureBytes)("signature",e,64),a=(0,s.ensureBytes)("message",t),i=(0,s.ensureBytes)("publicKey",r,32);try{var o=A((0,s.bytesToNumberBE)(i)),u=(0,s.bytesToNumberBE)(n.subarray(0,32));if(!g(u))return!1;var c=(0,s.bytesToNumberBE)(n.subarray(32,64));if(!m(c))return!1;var f=_(O(u),x(o),a),l=j(o,c,E(-f));return!(!l||!l.hasEvenY()||l.toAffine().x!==u)}catch(h){return!1}}t.schnorr={getPublicKey:P,sign:T,verify:C,utils:{randomPrivateKey:t.secp256k1.utils.randomPrivateKey,lift_x:A,pointToBytes:x,numberToBytesBE:s.numberToBytesBE,bytesToNumberBE:s.bytesToNumberBE,taggedHash:k,mod:i.mod}};var L=function(){return(0,u.isogenyMap)(b,[["0x8e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38daaaaa8c7","0x7d3d4c80bc321d5b9f315cea7fd44c5d595d2fc0bf63b92dfff1044f17c6581","0x534c328d23f234e6e2a413deca25caece4506144037c40314ecbd0b53d9dd262","0x8e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38daaaaa88c"],["0xd35771193d94918a9ca34ccbb7b640dd86cd409542f8487d9fe6b745781eb49b","0xedadc6f64383dc1df7c4b2d51b54225406d36b641f5e41bbc52a56612a8c6d14","0x0000000000000000000000000000000000000000000000000000000000000001"],["0x4bda12f684bda12f684bda12f684bda12f684bda12f684bda12f684b8e38e23c","0xc75e0c32d5cb7c0fa9d0a54b12a0a6d5647ab046d686da6fdffc90fc201d71a3","0x29a6194691f91a73715209ef6512e576722830a201be2018a765e85a9ecee931","0x2f684bda12f684bda12f684bda12f684bda12f684bda12f684bda12f38e38d84"],["0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffff93b","0x7a06534bb8bdb49fd5e9e6632722c2989467c1bfc8e8d978dfb425d2685c2573","0x6484aa716545ca2cf3a70c3fa8fe337e0a3d21162f0d6299a7bf8192bfd2a76f","0x0000000000000000000000000000000000000000000000000000000000000001"]].map((function(e){return e.map((function(e){return BigInt(e)}))})))}(),R=function(){return(0,o.mapToCurveSimpleSWU)(b,{A:BigInt("0x3f8731abdd661adca08a5558f0f5d272e953d363cb6f0e5d405447c01a444533"),B:BigInt("1771"),Z:b.create(BigInt("-11"))})}(),N=function(){return(0,u.createHasher)(t.secp256k1.ProjectivePoint,(function(e){var t=R(b.create(e[0])),r=t.x,n=t.y;return L(r,n)}),{DST:"secp256k1_XMD:SHA-256_SSWU_RO_",encodeDST:"secp256k1_XMD:SHA-256_SSWU_NU_",p:b.ORDER,m:1,k:128,expand:"xmd",hash:n.sha256})}();t.hashToCurve=N.hashToCurve,t.encodeToCurve=N.encodeToCurve},1106:function(e,t,r){"use strict";var n=r(62).default;Object.defineProperty(t,"__esModule",{value:!0}),t.createCurve=t.getHash=void 0;var a=r(1107),i=r(1077),o=r(1088);function s(e){return{hash:e,hmac:function(t){for(var r=arguments.length,n=new Array(r>1?r-1:0),o=1;o<r;o++)n[o-1]=arguments[o];return(0,a.hmac)(e,t,i.concatBytes.apply(void 0,n))},randomBytes:i.randomBytes}}t.getHash=s,t.createCurve=function(e,t){var r=function(t){return(0,o.weierstrass)(n(n({},e),s(t)))};return Object.freeze(n(n({},r(t)),{},{create:r}))}},1107:function(e,t,r){"use strict";var n=r(18).default,a=r(19).default,i=r(24).default,o=r(45).default;Object.defineProperty(t,"__esModule",{value:!0}),t.hmac=t.HMAC=void 0;var s=r(1080),u=r(1077),c=function(e){i(r,e);var t=o(r);function r(e,a){var i;n(this,r),(i=t.call(this)).finished=!1,i.destroyed=!1,(0,s.hash)(e);var o=(0,u.toBytes)(a);if(i.iHash=e.create(),"function"!==typeof i.iHash.update)throw new Error("Expected instance of class which extends utils.Hash");i.blockLen=i.iHash.blockLen,i.outputLen=i.iHash.outputLen;var c=i.blockLen,f=new Uint8Array(c);f.set(o.length>c?e.create().update(o).digest():o);for(var l=0;l<f.length;l++)f[l]^=54;i.iHash.update(f),i.oHash=e.create();for(var h=0;h<f.length;h++)f[h]^=106;return i.oHash.update(f),f.fill(0),i}return a(r,[{key:"update",value:function(e){return(0,s.exists)(this),this.iHash.update(e),this}},{key:"digestInto",value:function(e){(0,s.exists)(this),(0,s.bytes)(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}},{key:"digest",value:function(){var e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}},{key:"_cloneInto",value:function(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));var t=this.oHash,r=this.iHash,n=this.finished,a=this.destroyed,i=this.blockLen,o=this.outputLen;return e.finished=n,e.destroyed=a,e.blockLen=i,e.outputLen=o,e.oHash=t._cloneInto(e.oHash),e.iHash=r._cloneInto(e.iHash),e}},{key:"destroy",value:function(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}]),r}(u.Hash);t.HMAC=c;t.hmac=function(e,t,r){return new c(e,t).update(r).digest()},t.hmac.create=function(e,t){return new c(e,t)}},1108:function(e,t,r){"use strict";var n=r(18).default,a=r(19).default,i=r(24).default,o=r(45).default,s=r(56).default;Object.defineProperty(t,"__esModule",{value:!0}),t.shake256=t.shake128=t.keccak_512=t.keccak_384=t.keccak_256=t.keccak_224=t.sha3_512=t.sha3_384=t.sha3_256=t.sha3_224=t.Keccak=t.keccakP=void 0;for(var u=r(1080),c=r(1084),f=r(1077),l=[],h=[],d=[],p=BigInt(0),v=BigInt(1),b=BigInt(2),y=BigInt(7),g=BigInt(256),m=BigInt(113),w=0,k=v,x=1,O=0;w<24;w++){var S=[O,(2*x+3*O)%5];x=S[0],O=S[1],l.push(2*(5*O+x)),h.push((w+1)*(w+2)/2%64);for(var E=p,B=0;B<7;B++)(k=(k<<v^(k>>y)*m)%g)&b&&(E^=v<<(v<<BigInt(B))-v);d.push(E)}var j=s((0,c.split)(d,!0),2),I=j[0],A=j[1],_=function(e,t,r){return r>32?(0,c.rotlBH)(e,t,r):(0,c.rotlSH)(e,t,r)},P=function(e,t,r){return r>32?(0,c.rotlBL)(e,t,r):(0,c.rotlSL)(e,t,r)};function T(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:24,r=new Uint32Array(10),n=24-t;n<24;n++){for(var a=0;a<10;a++)r[a]=e[a]^e[a+10]^e[a+20]^e[a+30]^e[a+40];for(var i=0;i<10;i+=2)for(var o=(i+8)%10,s=(i+2)%10,u=r[s],c=r[s+1],f=_(u,c,1)^r[o],d=P(u,c,1)^r[o+1],p=0;p<50;p+=10)e[i+p]^=f,e[i+p+1]^=d;for(var v=e[2],b=e[3],y=0;y<24;y++){var g=h[y],m=_(v,b,g),w=P(v,b,g),k=l[y];v=e[k],b=e[k+1],e[k]=m,e[k+1]=w}for(var x=0;x<50;x+=10){for(var O=0;O<10;O++)r[O]=e[x+O];for(var S=0;S<10;S++)e[x+S]^=~r[(S+2)%10]&r[(S+4)%10]}e[0]^=I[n],e[1]^=A[n]}r.fill(0)}t.keccakP=T;var C=function(e){i(r,e);var t=o(r);function r(e,a,i){var o,s=arguments.length>3&&void 0!==arguments[3]&&arguments[3],c=arguments.length>4&&void 0!==arguments[4]?arguments[4]:24;if(n(this,r),(o=t.call(this)).blockLen=e,o.suffix=a,o.outputLen=i,o.enableXOF=s,o.rounds=c,o.pos=0,o.posOut=0,o.finished=!1,o.destroyed=!1,(0,u.number)(i),0>=o.blockLen||o.blockLen>=200)throw new Error("Sha3 supports only keccak-f1600 function");return o.state=new Uint8Array(200),o.state32=(0,f.u32)(o.state),o}return a(r,[{key:"keccak",value:function(){T(this.state32,this.rounds),this.posOut=0,this.pos=0}},{key:"update",value:function(e){(0,u.exists)(this);for(var t=this.blockLen,r=this.state,n=(e=(0,f.toBytes)(e)).length,a=0;a<n;){for(var i=Math.min(t-this.pos,n-a),o=0;o<i;o++)r[this.pos++]^=e[a++];this.pos===t&&this.keccak()}return this}},{key:"finish",value:function(){if(!this.finished){this.finished=!0;var e=this.state,t=this.suffix,r=this.pos,n=this.blockLen;e[r]^=t,0!==(128&t)&&r===n-1&&this.keccak(),e[n-1]^=128,this.keccak()}}},{key:"writeInto",value:function(e){(0,u.exists)(this,!1),(0,u.bytes)(e),this.finish();for(var t=this.state,r=this.blockLen,n=0,a=e.length;n<a;){this.posOut>=r&&this.keccak();var i=Math.min(r-this.posOut,a-n);e.set(t.subarray(this.posOut,this.posOut+i),n),this.posOut+=i,n+=i}return e}},{key:"xofInto",value:function(e){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(e)}},{key:"xof",value:function(e){return(0,u.number)(e),this.xofInto(new Uint8Array(e))}},{key:"digestInto",value:function(e){if((0,u.output)(e,this),this.finished)throw new Error("digest() was already called");return this.writeInto(e),this.destroy(),e}},{key:"digest",value:function(){return this.digestInto(new Uint8Array(this.outputLen))}},{key:"destroy",value:function(){this.destroyed=!0,this.state.fill(0)}},{key:"_cloneInto",value:function(e){var t=this.blockLen,n=this.suffix,a=this.outputLen,i=this.rounds,o=this.enableXOF;return e||(e=new r(t,n,a,o,i)),e.state32.set(this.state32),e.pos=this.pos,e.posOut=this.posOut,e.finished=this.finished,e.rounds=i,e.suffix=n,e.outputLen=a,e.enableXOF=o,e.destroyed=this.destroyed,e}}]),r}(f.Hash);t.Keccak=C;var L=function(e,t,r){return(0,f.wrapConstructor)((function(){return new C(t,e,r)}))};t.sha3_224=L(6,144,28),t.sha3_256=L(6,136,32),t.sha3_384=L(6,104,48),t.sha3_512=L(6,72,64),t.keccak_224=L(1,144,28),t.keccak_256=L(1,136,32),t.keccak_384=L(1,104,48),t.keccak_512=L(1,72,64);var R=function(e,t,r){return(0,f.wrapXOFConstructorWithOpts)((function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new C(t,e,void 0===n.dkLen?r:n.dkLen,!0)}))};t.shake128=R(31,168,16),t.shake256=R(31,136,32)},1109:function(e,t,r){"use strict";r.d(t,"a",(function(){return ln})),r.d(t,"b",(function(){return hn})),r.d(t,"c",(function(){return je}));var n=r(17),a=r(53),i=r(41),o=r(35),s=r(27),u=r(58),c=r(61),f=r(152),l=r(1),h=r(13),d=r(14),p=r(15),v=r(10),b=r(9),y=r(21),g=r(1100),m=r(30),w=r.n(m),k=r(1079),x=r.n(k),O=r(1087),S=r(1093),E=r(1081),B=r(1095),j=r(438),I=r(16),A=["message"],_=Object(l.a)().mark(R),P=function(e){Object(d.a)(r,e);var t=Object(p.a)(r);function r(e,a){var i,o;Object(v.a)(this,r);var s=e.message,c=Object(n.a)(e,A),f=e.path,l=0===f.length?s:"At path: "+f.join(".")+" -- "+s;return i=t.call(this,l),Object.assign(Object(I.a)(i),c),i.name=i.constructor.name,i.failures=function(){var t;return null!=(t=o)?t:o=[e].concat(Object(u.a)(a()))},i}return Object(b.a)(r)}(Object(f.a)(TypeError));function T(e){return"object"===typeof e&&null!=e}function C(e){return"string"===typeof e?JSON.stringify(e):""+e}function L(e,t,r,n){if(!0!==e){!1===e?e={}:"string"===typeof e&&(e={message:e});var a=t.path,i=t.branch,s=r.type,u=e,c=u.refinement,f=u.message,l=void 0===f?"Expected a value of type `"+s+"`"+(c?" with refinement `"+c+"`":"")+", but received: `"+C(n)+"`":f;return Object(o.a)(Object(o.a)({value:n,type:s,refinement:c,key:a[a.length-1],path:a,branch:i},e),{},{message:l})}}function R(e,t,r,n){var a,i,o,s;return Object(l.a)().wrap((function(u){for(;;)switch(u.prev=u.next){case 0:T(f=e)&&"function"===typeof f[Symbol.iterator]||(e=[e]),a=Object(c.a)(e),u.prev=2,a.s();case 4:if((i=a.n()).done){u.next=12;break}if(o=i.value,!(s=L(o,t,r,n))){u.next=10;break}return u.next=10,s;case 10:u.next=4;break;case 12:u.next=17;break;case 14:u.prev=14,u.t0=u.catch(2),a.e(u.t0);case 17:return u.prev=17,a.f(),u.finish(17);case 20:case"end":return u.stop()}var f}),_,null,[[2,14,17,20]])}function N(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return Object(l.a)().mark((function n(){var a,i,o,f,h,d,p,v,b,y,g,m,w,k,x,O,S,E,B,j,I,A,_,P,C,L,R;return Object(l.a)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(a=r.path,i=void 0===a?[]:a,o=r.branch,f=void 0===o?[e]:o,h=r.coerce,d=void 0!==h&&h,p=r.mask,v=void 0!==p&&p,b={path:i,branch:f},d&&(e=t.coercer(e,b),v&&"type"!==t.type&&T(t.schema)&&T(e)&&!Array.isArray(e)))for(y in e)void 0===t.schema[y]&&delete e[y];g=!0,m=Object(c.a)(t.validator(e,b)),n.prev=5,m.s();case 7:if((w=m.n()).done){n.next=14;break}return k=w.value,g=!1,n.next=12,[k,void 0];case 12:n.next=7;break;case 14:n.next=19;break;case 16:n.prev=16,n.t0=n.catch(5),m.e(n.t0);case 19:return n.prev=19,m.f(),n.finish(19);case 22:x=Object(c.a)(t.entries(e,b)),n.prev=23,x.s();case 25:if((O=x.n()).done){n.next=52;break}S=Object(s.a)(O.value,3),E=S[0],B=S[1],j=S[2],I=N(B,j,{path:void 0===E?i:[].concat(Object(u.a)(i),[E]),branch:void 0===E?f:[].concat(Object(u.a)(f),[B]),coerce:d,mask:v}),A=Object(c.a)(I),n.prev=29,A.s();case 31:if((_=A.n()).done){n.next=42;break}if(!(P=_.value)[0]){n.next=39;break}return g=!1,n.next=37,[P[0],void 0];case 37:n.next=40;break;case 39:d&&(B=P[1],void 0===E?e=B:e instanceof Map?e.set(E,B):e instanceof Set?e.add(B):T(e)&&(e[E]=B));case 40:n.next=31;break;case 42:n.next=47;break;case 44:n.prev=44,n.t1=n.catch(29),A.e(n.t1);case 47:return n.prev=47,A.f(),n.finish(47);case 50:n.next=25;break;case 52:n.next=57;break;case 54:n.prev=54,n.t2=n.catch(23),x.e(n.t2);case 57:return n.prev=57,x.f(),n.finish(57);case 60:if(!g){n.next=79;break}C=Object(c.a)(t.refiner(e,b)),n.prev=62,C.s();case 64:if((L=C.n()).done){n.next=71;break}return R=L.value,g=!1,n.next=69,[R,void 0];case 69:n.next=64;break;case 71:n.next=76;break;case 73:n.prev=73,n.t3=n.catch(62),C.e(n.t3);case 76:return n.prev=76,C.f(),n.finish(76);case 79:if(!g){n.next=82;break}return n.next=82,[void 0,e];case 82:case"end":return n.stop()}}),n,null,[[5,16,19,22],[23,54,57,60],[29,44,47,50],[62,73,76,79]])}))()}var U=function(){function e(t){var r=this;Object(v.a)(this,e);var n=t.type,a=t.schema,i=t.validator,o=t.refiner,s=t.coercer,u=void 0===s?function(e){return e}:s,c=t.entries,f=void 0===c?Object(l.a)().mark((function e(){return Object(l.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})):c;this.type=n,this.schema=a,this.entries=f,this.coercer=u,this.validator=i?function(e,t){return R(i(e,t),t,r,e)}:function(){return[]},this.refiner=o?function(e,t){return R(o(e,t),t,r,e)}:function(){return[]}}return Object(b.a)(e,[{key:"assert",value:function(e){return q(e,this)}},{key:"create",value:function(e){return z(e,this)}},{key:"is",value:function(e){return W(e,this)}},{key:"mask",value:function(e){return function(e,t){var r=H(e,t,{coerce:!0,mask:!0});if(r[0])throw r[0];return r[1]}(e,this)}},{key:"validate",value:function(e){return H(e,this,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{})}}]),e}();function q(e,t){var r=H(e,t);if(r[0])throw r[0]}function z(e,t){var r=H(e,t,{coerce:!0});if(r[0])throw r[0];return r[1]}function W(e,t){return!H(e,t)[0]}function H(e,t){var r=N(e,t,arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}),n=function(e){var t=e.next(),r=t.done,n=t.value;return r?void 0:n}(r);return n[0]?[new P(n[0],Object(l.a)().mark((function e(){var t,n,a;return Object(l.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=Object(c.a)(r),e.prev=1,t.s();case 3:if((n=t.n()).done){e.next=10;break}if(!(a=n.value)[0]){e.next=8;break}return e.next=8,a[0];case 8:e.next=3;break;case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(1),t.e(e.t0);case 15:return e.prev=15,t.f(),e.finish(15);case 18:case"end":return e.stop()}}),e,null,[[1,12,15,18]])}))),void 0]:[void 0,n[1]]}function K(e,t){return new U({type:e,schema:null,validator:t})}function M(e){return new U({type:"array",schema:e,entries:Object(l.a)().mark((function t(r){var n,a,i,o,u;return Object(l.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e||!Array.isArray(r)){t.next=18;break}n=Object(c.a)(r.entries()),t.prev=2,n.s();case 4:if((a=n.n()).done){t.next=10;break}return i=Object(s.a)(a.value,2),o=i[0],u=i[1],t.next=8,[o,u,e];case 8:t.next=4;break;case 10:t.next=15;break;case 12:t.prev=12,t.t0=t.catch(2),n.e(t.t0);case 15:return t.prev=15,n.f(),t.finish(15);case 18:case"end":return t.stop()}}),t,null,[[2,12,15,18]])})),coercer:function(e){return Array.isArray(e)?e.slice():e},validator:function(e){return Array.isArray(e)||"Expected an array value, but received: "+C(e)}})}function D(){return K("boolean",(function(e){return"boolean"===typeof e}))}function F(e){return K("instance",(function(t){return t instanceof e||"Expected a `"+e.name+"` instance, but received: "+C(t)}))}function V(e){var t=C(e),r=typeof e;return new U({type:"literal",schema:"string"===r||"number"===r||"boolean"===r?e:null,validator:function(r){return r===e||"Expected the literal `"+t+"`, but received: "+C(r)}})}function G(){return K("never",(function(){return!1}))}function Z(e){return new U(Object(o.a)(Object(o.a)({},e),{},{validator:function(t,r){return null===t||e.validator(t,r)},refiner:function(t,r){return null===t||e.refiner(t,r)}}))}function J(){return K("number",(function(e){return"number"===typeof e&&!isNaN(e)||"Expected a number, but received: "+C(e)}))}function Y(e){return new U(Object(o.a)(Object(o.a)({},e),{},{validator:function(t,r){return void 0===t||e.validator(t,r)},refiner:function(t,r){return void 0===t||e.refiner(t,r)}}))}function X(e,t){return new U({type:"record",schema:null,entries:Object(l.a)().mark((function r(n){var a,i;return Object(l.a)().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(!T(n)){r.next=11;break}r.t0=Object(l.a)().keys(n);case 2:if((r.t1=r.t0()).done){r.next=11;break}return a=r.t1.value,i=n[a],r.next=7,[a,a,e];case 7:return r.next=9,[a,i,t];case 9:r.next=2;break;case 11:case"end":return r.stop()}}),r)})),validator:function(e){return T(e)||"Expected an object, but received: "+C(e)}})}function $(){return K("string",(function(e){return"string"===typeof e||"Expected a string, but received: "+C(e)}))}function Q(e){var t=G();return new U({type:"tuple",schema:null,entries:Object(l.a)().mark((function r(n){var a,i;return Object(l.a)().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(!Array.isArray(n)){r.next=9;break}a=Math.max(e.length,n.length),i=0;case 3:if(!(i<a)){r.next=9;break}return r.next=6,[i,n[i],e[i]||t];case 6:i++,r.next=3;break;case 9:case"end":return r.stop()}}),r)})),validator:function(e){return Array.isArray(e)||"Expected an array, but received: "+C(e)}})}function ee(e){var t=Object.keys(e);return new U({type:"type",schema:e,entries:Object(l.a)().mark((function r(n){var a,i,o;return Object(l.a)().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(!T(n)){r.next=9;break}a=0,i=t;case 2:if(!(a<i.length)){r.next=9;break}return o=i[a],r.next=6,[o,n[o],e[o]];case 6:a++,r.next=2;break;case 9:case"end":return r.stop()}}),r)})),validator:function(e){return T(e)||"Expected an object, but received: "+C(e)}})}function te(e){var t=e.map((function(e){return e.type})).join(" | ");return new U({type:"union",schema:null,validator:function(r,n){var a,i=[],o=Object(c.a)(e);try{for(o.s();!(a=o.n()).done;){var u=N(r,a.value,n),f=Object(j.a)(u).slice(0);if(!Object(s.a)(f,1)[0][0])return[];var l,h=Object(c.a)(f);try{for(h.s();!(l=h.n()).done;){var d=Object(s.a)(l.value,1)[0];d&&i.push(d)}}catch(p){h.e(p)}finally{h.f()}}}catch(p){o.e(p)}finally{o.f()}return["Expected the value to satisfy a union of `"+t+"`, but received: "+C(r)].concat(i)}})}function re(){return K("unknown",(function(){return!0}))}function ne(e,t,r){return new U(Object(o.a)(Object(o.a)({},e),{},{coercer:function(n,a){return W(n,t)?e.coercer(r(n,a),a):e.coercer(n,a)}}))}var ae=r(1096),ie=r.n(ae),oe=r(1098),se=r.n(oe),ue=r(1099),ce=r.n(ue),fe=r(1108),le=r(1105),he=["commitment"],de=["encoding"],pe=["commitment"],ve=["commitment"],be=(g.ed25519.utils.randomPrivateKey,function(){var e=g.ed25519.utils.randomPrivateKey(),t=ye(e),r=new Uint8Array(64);return r.set(e),r.set(t,32),{publicKey:t,secretKey:r}}),ye=g.ed25519.getPublicKey;function ge(e){try{return g.ed25519.ExtendedPoint.fromHex(e),!0}catch(t){return!1}}var me,we=function(e,t){return g.ed25519.sign(e,t.slice(0,32))},ke=g.ed25519.verify,xe=function(e){return y.Buffer.isBuffer(e)?e:e instanceof Uint8Array?y.Buffer.from(e.buffer,e.byteOffset,e.byteLength):y.Buffer.from(e)},Oe=function(){function e(t){Object(v.a)(this,e),Object.assign(this,t)}return Object(b.a)(e,[{key:"encode",value:function(){return y.Buffer.from(Object(S.serialize)(Se,this))}}],[{key:"decode",value:function(e){return Object(S.deserialize)(Se,this,e)}},{key:"decodeUnchecked",value:function(e){return Object(S.deserializeUnchecked)(Se,this,e)}}]),e}(),Se=new Map,Ee=32;var Be=1,je=function(e,t){Object(d.a)(n,e);var r=Object(p.a)(n);function n(e){var t;if(Object(v.a)(this,n),(t=r.call(this,{}))._bn=void 0,function(e){return void 0!==e._bn}(e))t._bn=e._bn;else{if("string"===typeof e){var a=x.a.decode(e);if(a.length!=Ee)throw new Error("Invalid public key input");t._bn=new w.a(a)}else t._bn=new w.a(e);if(t._bn.byteLength()>Ee)throw new Error("Invalid public key input")}return t}return Object(b.a)(n,[{key:"equals",value:function(e){return this._bn.eq(e._bn)}},{key:"toBase58",value:function(){return x.a.encode(this.toBytes())}},{key:"toJSON",value:function(){return this.toBase58()}},{key:"toBytes",value:function(){var e=this.toBuffer();return new Uint8Array(e.buffer,e.byteOffset,e.byteLength)}},{key:"toBuffer",value:function(){var e=this._bn.toArrayLike(y.Buffer);if(e.length===Ee)return e;var t=y.Buffer.alloc(32);return e.copy(t,32-e.length),t}},{key:t,get:function(){return"PublicKey(".concat(this.toString(),")")}},{key:"toString",value:function(){return this.toBase58()}}],[{key:"unique",value:function(){var e=new n(Be);return Be+=1,new n(e.toBuffer())}},{key:"createWithSeed",value:function(){var e=Object(h.a)(Object(l.a)().mark((function e(t,r,a){var i,o;return Object(l.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=y.Buffer.concat([t.toBuffer(),y.Buffer.from(r),a.toBuffer()]),o=Object(O.sha256)(i),e.abrupt("return",new n(o));case 3:case"end":return e.stop()}}),e)})));return function(t,r,n){return e.apply(this,arguments)}}()},{key:"createProgramAddressSync",value:function(e,t){var r=y.Buffer.alloc(0);e.forEach((function(e){if(e.length>32)throw new TypeError("Max seed length exceeded");r=y.Buffer.concat([r,xe(e)])})),r=y.Buffer.concat([r,t.toBuffer(),y.Buffer.from("ProgramDerivedAddress")]);var a=Object(O.sha256)(r);if(ge(a))throw new Error("Invalid seeds, address must fall off the curve");return new n(a)}},{key:"createProgramAddress",value:function(){var e=Object(h.a)(Object(l.a)().mark((function e(t,r){return Object(l.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.createProgramAddressSync(t,r));case 1:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"findProgramAddressSync",value:function(e,t){for(var r,n=255;0!=n;){try{var a=e.concat(y.Buffer.from([n]));r=this.createProgramAddressSync(a,t)}catch(i){if(i instanceof TypeError)throw i;n--;continue}return[r,n]}throw new Error("Unable to find a viable program address nonce")}},{key:"findProgramAddress",value:function(){var e=Object(h.a)(Object(l.a)().mark((function e(t,r){return Object(l.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.findProgramAddressSync(t,r));case 1:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"isOnCurve",value:function(e){return ge(new n(e).toBytes())}}]),n}(Oe,Symbol.toStringTag);me=je,je.default=new me("11111111111111111111111111111111"),Se.set(je,{kind:"struct",fields:[["_bn","u256"]]});new je("BPFLoader1111111111111111111111111111111111");var Ie=1232,Ae=function(e){Object(d.a)(r,e);var t=Object(p.a)(r);function r(e){var n;return Object(v.a)(this,r),(n=t.call(this,"Signature ".concat(e," has expired: block height exceeded."))).signature=void 0,n.signature=e,n}return Object(b.a)(r)}(Object(f.a)(Error));Object.defineProperty(Ae.prototype,"name",{value:"TransactionExpiredBlockheightExceededError"});var _e=function(e){Object(d.a)(r,e);var t=Object(p.a)(r);function r(e,n){var a;return Object(v.a)(this,r),(a=t.call(this,"Transaction was not confirmed in ".concat(n.toFixed(2)," seconds. It is ")+"unknown if it succeeded or failed. Check signature "+"".concat(e," using the Solana Explorer or CLI tools."))).signature=void 0,a.signature=e,a}return Object(b.a)(r)}(Object(f.a)(Error));Object.defineProperty(_e.prototype,"name",{value:"TransactionExpiredTimeoutError"});var Pe=function(e){Object(d.a)(r,e);var t=Object(p.a)(r);function r(e){var n;return Object(v.a)(this,r),(n=t.call(this,"Signature ".concat(e," has expired: the nonce is no longer valid."))).signature=void 0,n.signature=e,n}return Object(b.a)(r)}(Object(f.a)(Error));Object.defineProperty(Pe.prototype,"name",{value:"TransactionExpiredNonceInvalidError"});var Te=function(){function e(t,r){Object(v.a)(this,e),this.staticAccountKeys=void 0,this.accountKeysFromLookups=void 0,this.staticAccountKeys=t,this.accountKeysFromLookups=r}return Object(b.a)(e,[{key:"keySegments",value:function(){var e=[this.staticAccountKeys];return this.accountKeysFromLookups&&(e.push(this.accountKeysFromLookups.writable),e.push(this.accountKeysFromLookups.readonly)),e}},{key:"get",value:function(e){var t,r=Object(c.a)(this.keySegments());try{for(r.s();!(t=r.n()).done;){var n=t.value;if(e<n.length)return n[e];e-=n.length}}catch(a){r.e(a)}finally{r.f()}}},{key:"length",get:function(){return this.keySegments().flat().length}},{key:"compileInstructions",value:function(e){if(this.length>256)throw new Error("Account index overflow encountered during compilation");var t=new Map;this.keySegments().flat().forEach((function(e,r){t.set(e.toBase58(),r)}));var r=function(e){var r=t.get(e.toBase58());if(void 0===r)throw new Error("Encountered an unknown instruction account key during compilation");return r};return e.map((function(e){return{programIdIndex:r(e.programId),accountKeyIndexes:e.keys.map((function(e){return r(e.pubkey)})),data:e.data}}))}}]),e}(),Ce=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"publicKey";return E.blob(32,e)},Le=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"string",t=E.struct([E.u32("length"),E.u32("lengthPadding"),E.blob(E.offset(E.u32(),-8),"chars")],e),r=t.decode.bind(t),n=t.encode.bind(t),a=t;return a.decode=function(e,t){return r(e,t).chars.toString()},a.encode=function(e,t,r){var a={chars:y.Buffer.from(e,"utf8")};return n(a,t,r)},a.alloc=function(e){return E.u32().span+E.u32().span+y.Buffer.from(e,"utf8").length},a};function Re(e,t){var r=function e(r){if(r.span>=0)return r.span;if("function"===typeof r.alloc)return r.alloc(t[r.property]);if("count"in r&&"elementLayout"in r){var n=t[r.property];if(Array.isArray(n))return n.length*e(r.elementLayout)}else if("fields"in r)return Re({layout:r},t[r.property]);return 0},n=0;return e.layout.fields.forEach((function(e){n+=r(e)})),n}function Ne(e){for(var t=0,r=0;;){var n=e.shift();if(t|=(127&n)<<7*r,r+=1,0===(128&n))break}return t}function Ue(e,t){for(var r=t;;){var n=127&r;if(0==(r>>=7)){e.push(n);break}n|=128,e.push(n)}}function qe(e,t){if(!e)throw new Error(t||"Assertion failed")}var ze=function(){function e(t,r){Object(v.a)(this,e),this.payer=void 0,this.keyMetaMap=void 0,this.payer=t,this.keyMetaMap=r}return Object(b.a)(e,[{key:"getMessageComponents",value:function(){var e=Object(u.a)(this.keyMetaMap.entries());qe(e.length<=256,"Max static account keys length exceeded");var t=e.filter((function(e){var t=Object(s.a)(e,2)[1];return t.isSigner&&t.isWritable})),r=e.filter((function(e){var t=Object(s.a)(e,2)[1];return t.isSigner&&!t.isWritable})),n=e.filter((function(e){var t=Object(s.a)(e,2)[1];return!t.isSigner&&t.isWritable})),a=e.filter((function(e){var t=Object(s.a)(e,2)[1];return!t.isSigner&&!t.isWritable})),i={numRequiredSignatures:t.length+r.length,numReadonlySignedAccounts:r.length,numReadonlyUnsignedAccounts:a.length};return qe(t.length>0,"Expected at least one writable signer key"),qe(Object(s.a)(t[0],1)[0]===this.payer.toBase58(),"Expected first writable signer key to be the fee payer"),[i,[].concat(Object(u.a)(t.map((function(e){var t=Object(s.a)(e,1)[0];return new je(t)}))),Object(u.a)(r.map((function(e){var t=Object(s.a)(e,1)[0];return new je(t)}))),Object(u.a)(n.map((function(e){var t=Object(s.a)(e,1)[0];return new je(t)}))),Object(u.a)(a.map((function(e){var t=Object(s.a)(e,1)[0];return new je(t)}))))]}},{key:"extractTableLookup",value:function(e){var t=this.drainKeysFoundInLookupTable(e.state.addresses,(function(e){return!e.isSigner&&!e.isInvoked&&e.isWritable})),r=Object(s.a)(t,2),n=r[0],a=r[1],i=this.drainKeysFoundInLookupTable(e.state.addresses,(function(e){return!e.isSigner&&!e.isInvoked&&!e.isWritable})),o=Object(s.a)(i,2),u=o[0],c=o[1];if(0!==n.length||0!==u.length)return[{accountKey:e.key,writableIndexes:n,readonlyIndexes:u},{writable:a,readonly:c}]}},{key:"drainKeysFoundInLookupTable",value:function(e,t){var r,n=this,a=new Array,i=new Array,o=Object(c.a)(this.keyMetaMap.entries());try{var u=function(){var o=Object(s.a)(r.value,2),u=o[0],c=o[1];if(t(c)){var f=new je(u),l=e.findIndex((function(e){return e.equals(f)}));l>=0&&(qe(l<256,"Max lookup table index exceeded"),a.push(l),i.push(f),n.keyMetaMap.delete(u))}};for(o.s();!(r=o.n()).done;)u()}catch(f){o.e(f)}finally{o.f()}return[a,i]}}],[{key:"compile",value:function(t,r){var n=new Map,a=function(e){var t=e.toBase58(),r=n.get(t);return void 0===r&&(r={isSigner:!1,isWritable:!1,isInvoked:!1},n.set(t,r)),r},i=a(r);i.isSigner=!0,i.isWritable=!0;var o,s=Object(c.a)(t);try{for(s.s();!(o=s.n()).done;){var u=o.value;a(u.programId).isInvoked=!0;var f,l=Object(c.a)(u.keys);try{for(l.s();!(f=l.n()).done;){var h=f.value,d=a(h.pubkey);d.isSigner||(d.isSigner=h.isSigner),d.isWritable||(d.isWritable=h.isWritable)}}catch(p){l.e(p)}finally{l.f()}}}catch(p){s.e(p)}finally{s.f()}return new e(r,n)}}]),e}(),We=function(){function e(t){var r=this;Object(v.a)(this,e),this.header=void 0,this.accountKeys=void 0,this.recentBlockhash=void 0,this.instructions=void 0,this.indexToProgramIds=new Map,this.header=t.header,this.accountKeys=t.accountKeys.map((function(e){return new je(e)})),this.recentBlockhash=t.recentBlockhash,this.instructions=t.instructions,this.instructions.forEach((function(e){return r.indexToProgramIds.set(e.programIdIndex,r.accountKeys[e.programIdIndex])}))}return Object(b.a)(e,[{key:"version",get:function(){return"legacy"}},{key:"staticAccountKeys",get:function(){return this.accountKeys}},{key:"compiledInstructions",get:function(){return this.instructions.map((function(e){return{programIdIndex:e.programIdIndex,accountKeyIndexes:e.accounts,data:x.a.decode(e.data)}}))}},{key:"addressTableLookups",get:function(){return[]}},{key:"getAccountKeys",value:function(){return new Te(this.staticAccountKeys)}},{key:"isAccountSigner",value:function(e){return e<this.header.numRequiredSignatures}},{key:"isAccountWritable",value:function(e){var t=this.header.numRequiredSignatures;return e>=this.header.numRequiredSignatures?e-t<this.accountKeys.length-t-this.header.numReadonlyUnsignedAccounts:e<t-this.header.numReadonlySignedAccounts}},{key:"isProgramId",value:function(e){return this.indexToProgramIds.has(e)}},{key:"programIds",value:function(){return Object(u.a)(this.indexToProgramIds.values())}},{key:"nonProgramIds",value:function(){var e=this;return this.accountKeys.filter((function(t,r){return!e.isProgramId(r)}))}},{key:"serialize",value:function(){var e=this.accountKeys.length,t=[];Ue(t,e);var r=this.instructions.map((function(e){var t=e.accounts,r=e.programIdIndex,n=Array.from(x.a.decode(e.data)),a=[];Ue(a,t.length);var i=[];return Ue(i,n.length),{programIdIndex:r,keyIndicesCount:y.Buffer.from(a),keyIndices:t,dataLength:y.Buffer.from(i),data:n}})),n=[];Ue(n,r.length);var a=y.Buffer.alloc(Ie);y.Buffer.from(n).copy(a);var i=n.length;r.forEach((function(e){var t=E.struct([E.u8("programIdIndex"),E.blob(e.keyIndicesCount.length,"keyIndicesCount"),E.seq(E.u8("keyIndex"),e.keyIndices.length,"keyIndices"),E.blob(e.dataLength.length,"dataLength"),E.seq(E.u8("userdatum"),e.data.length,"data")]).encode(e,a,i);i+=t})),a=a.slice(0,i);var o=E.struct([E.blob(1,"numRequiredSignatures"),E.blob(1,"numReadonlySignedAccounts"),E.blob(1,"numReadonlyUnsignedAccounts"),E.blob(t.length,"keyCount"),E.seq(Ce("key"),e,"keys"),Ce("recentBlockhash")]),s={numRequiredSignatures:y.Buffer.from([this.header.numRequiredSignatures]),numReadonlySignedAccounts:y.Buffer.from([this.header.numReadonlySignedAccounts]),numReadonlyUnsignedAccounts:y.Buffer.from([this.header.numReadonlyUnsignedAccounts]),keyCount:y.Buffer.from(t),keys:this.accountKeys.map((function(e){return xe(e.toBytes())})),recentBlockhash:x.a.decode(this.recentBlockhash)},u=y.Buffer.alloc(2048),c=o.encode(s,u);return a.copy(u,c),u.slice(0,c+a.length)}}],[{key:"compile",value:function(t){var r=ze.compile(t.instructions,t.payerKey).getMessageComponents(),n=Object(s.a)(r,2),a=n[0],i=n[1],o=new Te(i).compileInstructions(t.instructions).map((function(e){return{programIdIndex:e.programIdIndex,accounts:e.accountKeyIndexes,data:x.a.encode(e.data)}}));return new e({header:a,accountKeys:i,recentBlockhash:t.recentBlockhash,instructions:o})}},{key:"from",value:function(t){var r=Object(u.a)(t),n=r.shift();if(n!==(127&n))throw new Error("Versioned messages must be deserialized with VersionedMessage.deserialize()");for(var a=r.shift(),i=r.shift(),o=Ne(r),s=[],c=0;c<o;c++){var f=r.slice(0,Ee);r=r.slice(Ee),s.push(new je(y.Buffer.from(f)))}for(var l=r.slice(0,Ee),h=Ne(r=r.slice(Ee)),d=[],p=0;p<h;p++){var v=r.shift(),b=Ne(r),g=r.slice(0,b),m=Ne(r=r.slice(b)),w=r.slice(0,m),k=x.a.encode(y.Buffer.from(w));r=r.slice(m),d.push({programIdIndex:v,accounts:g,data:k})}return new e({header:{numRequiredSignatures:n,numReadonlySignedAccounts:a,numReadonlyUnsignedAccounts:i},recentBlockhash:x.a.encode(y.Buffer.from(l)),accountKeys:s,instructions:d})}}]),e}(),He=function(){function e(t){Object(v.a)(this,e),this.header=void 0,this.staticAccountKeys=void 0,this.recentBlockhash=void 0,this.compiledInstructions=void 0,this.addressTableLookups=void 0,this.header=t.header,this.staticAccountKeys=t.staticAccountKeys,this.recentBlockhash=t.recentBlockhash,this.compiledInstructions=t.compiledInstructions,this.addressTableLookups=t.addressTableLookups}return Object(b.a)(e,[{key:"version",get:function(){return 0}},{key:"numAccountKeysFromLookups",get:function(){var e,t=0,r=Object(c.a)(this.addressTableLookups);try{for(r.s();!(e=r.n()).done;){var n=e.value;t+=n.readonlyIndexes.length+n.writableIndexes.length}}catch(a){r.e(a)}finally{r.f()}return t}},{key:"getAccountKeys",value:function(e){var t;if(e&&"accountKeysFromLookups"in e&&e.accountKeysFromLookups){if(this.numAccountKeysFromLookups!=e.accountKeysFromLookups.writable.length+e.accountKeysFromLookups.readonly.length)throw new Error("Failed to get account keys because of a mismatch in the number of account keys from lookups");t=e.accountKeysFromLookups}else if(e&&"addressLookupTableAccounts"in e&&e.addressLookupTableAccounts)t=this.resolveAddressTableLookups(e.addressLookupTableAccounts);else if(this.addressTableLookups.length>0)throw new Error("Failed to get account keys because address table lookups were not resolved");return new Te(this.staticAccountKeys,t)}},{key:"isAccountSigner",value:function(e){return e<this.header.numRequiredSignatures}},{key:"isAccountWritable",value:function(e){var t=this.header.numRequiredSignatures,r=this.staticAccountKeys.length;return e>=r?e-r<this.addressTableLookups.reduce((function(e,t){return e+t.writableIndexes.length}),0):e>=this.header.numRequiredSignatures?e-t<r-t-this.header.numReadonlyUnsignedAccounts:e<t-this.header.numReadonlySignedAccounts}},{key:"resolveAddressTableLookups",value:function(e){var t,r={writable:[],readonly:[]},n=Object(c.a)(this.addressTableLookups);try{var a=function(){var n=t.value,a=e.find((function(e){return e.key.equals(n.accountKey)}));if(!a)throw new Error("Failed to find address lookup table account for table key ".concat(n.accountKey.toBase58()));var i,o=Object(c.a)(n.writableIndexes);try{for(o.s();!(i=o.n()).done;){var s=i.value;if(!(s<a.state.addresses.length))throw new Error("Failed to find address for index ".concat(s," in address lookup table ").concat(n.accountKey.toBase58()));r.writable.push(a.state.addresses[s])}}catch(h){o.e(h)}finally{o.f()}var u,f=Object(c.a)(n.readonlyIndexes);try{for(f.s();!(u=f.n()).done;){var l=u.value;if(!(l<a.state.addresses.length))throw new Error("Failed to find address for index ".concat(l," in address lookup table ").concat(n.accountKey.toBase58()));r.readonly.push(a.state.addresses[l])}}catch(h){f.e(h)}finally{f.f()}};for(n.s();!(t=n.n()).done;)a()}catch(i){n.e(i)}finally{n.f()}return r}},{key:"serialize",value:function(){var e=Array();Ue(e,this.staticAccountKeys.length);var t=this.serializeInstructions(),r=Array();Ue(r,this.compiledInstructions.length);var n=this.serializeAddressTableLookups(),a=Array();Ue(a,this.addressTableLookups.length);var i=E.struct([E.u8("prefix"),E.struct([E.u8("numRequiredSignatures"),E.u8("numReadonlySignedAccounts"),E.u8("numReadonlyUnsignedAccounts")],"header"),E.blob(e.length,"staticAccountKeysLength"),E.seq(Ce(),this.staticAccountKeys.length,"staticAccountKeys"),Ce("recentBlockhash"),E.blob(r.length,"instructionsLength"),E.blob(t.length,"serializedInstructions"),E.blob(a.length,"addressTableLookupsLength"),E.blob(n.length,"serializedAddressTableLookups")]),o=new Uint8Array(Ie),s=i.encode({prefix:128,header:this.header,staticAccountKeysLength:new Uint8Array(e),staticAccountKeys:this.staticAccountKeys.map((function(e){return e.toBytes()})),recentBlockhash:x.a.decode(this.recentBlockhash),instructionsLength:new Uint8Array(r),serializedInstructions:t,addressTableLookupsLength:new Uint8Array(a),serializedAddressTableLookups:n},o);return o.slice(0,s)}},{key:"serializeInstructions",value:function(){var e,t=0,r=new Uint8Array(Ie),n=Object(c.a)(this.compiledInstructions);try{for(n.s();!(e=n.n()).done;){var a=e.value,i=Array();Ue(i,a.accountKeyIndexes.length);var o=Array();Ue(o,a.data.length),t+=E.struct([E.u8("programIdIndex"),E.blob(i.length,"encodedAccountKeyIndexesLength"),E.seq(E.u8(),a.accountKeyIndexes.length,"accountKeyIndexes"),E.blob(o.length,"encodedDataLength"),E.blob(a.data.length,"data")]).encode({programIdIndex:a.programIdIndex,encodedAccountKeyIndexesLength:new Uint8Array(i),accountKeyIndexes:a.accountKeyIndexes,encodedDataLength:new Uint8Array(o),data:a.data},r,t)}}catch(s){n.e(s)}finally{n.f()}return r.slice(0,t)}},{key:"serializeAddressTableLookups",value:function(){var e,t=0,r=new Uint8Array(Ie),n=Object(c.a)(this.addressTableLookups);try{for(n.s();!(e=n.n()).done;){var a=e.value,i=Array();Ue(i,a.writableIndexes.length);var o=Array();Ue(o,a.readonlyIndexes.length),t+=E.struct([Ce("accountKey"),E.blob(i.length,"encodedWritableIndexesLength"),E.seq(E.u8(),a.writableIndexes.length,"writableIndexes"),E.blob(o.length,"encodedReadonlyIndexesLength"),E.seq(E.u8(),a.readonlyIndexes.length,"readonlyIndexes")]).encode({accountKey:a.accountKey.toBytes(),encodedWritableIndexesLength:new Uint8Array(i),writableIndexes:a.writableIndexes,encodedReadonlyIndexesLength:new Uint8Array(o),readonlyIndexes:a.readonlyIndexes},r,t)}}catch(s){n.e(s)}finally{n.f()}return r.slice(0,t)}}],[{key:"compile",value:function(t){var r,n=ze.compile(t.instructions,t.payerKey),a=new Array,i={writable:new Array,readonly:new Array},o=t.addressLookupTableAccounts||[],f=Object(c.a)(o);try{for(f.s();!(r=f.n()).done;){var l=r.value,h=n.extractTableLookup(l);if(void 0!==h){var d,p,v=Object(s.a)(h,2),b=v[0],y=v[1],g=y.writable,m=y.readonly;a.push(b),(d=i.writable).push.apply(d,Object(u.a)(g)),(p=i.readonly).push.apply(p,Object(u.a)(m))}}}catch(E){f.e(E)}finally{f.f()}var w=n.getMessageComponents(),k=Object(s.a)(w,2),x=k[0],O=k[1],S=new Te(O,i).compileInstructions(t.instructions);return new e({header:x,staticAccountKeys:O,recentBlockhash:t.recentBlockhash,compiledInstructions:S,addressTableLookups:a})}},{key:"deserialize",value:function(t){var r=Object(u.a)(t),n=r.shift(),a=127&n;qe(n!==a,"Expected versioned message but received legacy message");qe(0===a,"Expected versioned message with version 0 but found version ".concat(a));for(var i={numRequiredSignatures:r.shift(),numReadonlySignedAccounts:r.shift(),numReadonlyUnsignedAccounts:r.shift()},o=[],s=Ne(r),c=0;c<s;c++)o.push(new je(r.splice(0,Ee)));for(var f=x.a.encode(r.splice(0,Ee)),l=Ne(r),h=[],d=0;d<l;d++){var p=r.shift(),v=Ne(r),b=r.splice(0,v),y=Ne(r),g=new Uint8Array(r.splice(0,y));h.push({programIdIndex:p,accountKeyIndexes:b,data:g})}for(var m=Ne(r),w=[],k=0;k<m;k++){var O=new je(r.splice(0,Ee)),S=Ne(r),E=r.splice(0,S),B=Ne(r),j=r.splice(0,B);w.push({accountKey:O,writableIndexes:E,readonlyIndexes:j})}return new e({header:i,staticAccountKeys:o,recentBlockhash:f,compiledInstructions:h,addressTableLookups:w})}}]),e}(),Ke=function(e){return e[e.BLOCKHEIGHT_EXCEEDED=0]="BLOCKHEIGHT_EXCEEDED",e[e.PROCESSED=1]="PROCESSED",e[e.TIMED_OUT=2]="TIMED_OUT",e[e.NONCE_INVALID=3]="NONCE_INVALID",e}({}),Me=y.Buffer.alloc(64).fill(0),De=function(){function e(t){Object(v.a)(this,e),this.keys=void 0,this.programId=void 0,this.data=y.Buffer.alloc(0),this.programId=t.programId,this.keys=t.keys,t.data&&(this.data=t.data)}return Object(b.a)(e,[{key:"toJSON",value:function(){return{keys:this.keys.map((function(e){var t=e.pubkey,r=e.isSigner,n=e.isWritable;return{pubkey:t.toJSON(),isSigner:r,isWritable:n}})),programId:this.programId.toJSON(),data:Object(u.a)(this.data)}}}]),e}(),Fe=function(){function e(t){if(Object(v.a)(this,e),this.signatures=[],this.feePayer=void 0,this.instructions=[],this.recentBlockhash=void 0,this.lastValidBlockHeight=void 0,this.nonceInfo=void 0,this.minNonceContextSlot=void 0,this._message=void 0,this._json=void 0,t)if(t.feePayer&&(this.feePayer=t.feePayer),t.signatures&&(this.signatures=t.signatures),Object.prototype.hasOwnProperty.call(t,"nonceInfo")){var r=t.minContextSlot,n=t.nonceInfo;this.minNonceContextSlot=r,this.nonceInfo=n}else if(Object.prototype.hasOwnProperty.call(t,"lastValidBlockHeight")){var a=t.blockhash,i=t.lastValidBlockHeight;this.recentBlockhash=a,this.lastValidBlockHeight=i}else{var o=t.recentBlockhash,s=t.nonceInfo;s&&(this.nonceInfo=s),this.recentBlockhash=o}}return Object(b.a)(e,[{key:"signature",get:function(){return this.signatures.length>0?this.signatures[0].signature:null}},{key:"toJSON",value:function(){return{recentBlockhash:this.recentBlockhash||null,feePayer:this.feePayer?this.feePayer.toJSON():null,nonceInfo:this.nonceInfo?{nonce:this.nonceInfo.nonce,nonceInstruction:this.nonceInfo.nonceInstruction.toJSON()}:null,instructions:this.instructions.map((function(e){return e.toJSON()})),signers:this.signatures.map((function(e){return e.publicKey.toJSON()}))}}},{key:"add",value:function(){for(var e=this,t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];if(0===r.length)throw new Error("No instructions");return r.forEach((function(t){"instructions"in t?e.instructions=e.instructions.concat(t.instructions):"data"in t&&"programId"in t&&"keys"in t?e.instructions.push(t):e.instructions.push(new De(t))})),this}},{key:"compileMessage",value:function(){if(this._message&&JSON.stringify(this.toJSON())===JSON.stringify(this._json))return this._message;var e,t,r;if(this.nonceInfo?(e=this.nonceInfo.nonce,t=this.instructions[0]!=this.nonceInfo.nonceInstruction?[this.nonceInfo.nonceInstruction].concat(Object(u.a)(this.instructions)):this.instructions):(e=this.recentBlockhash,t=this.instructions),!e)throw new Error("Transaction recentBlockhash required");if(t.length<1&&console.warn("No instructions provided"),this.feePayer)r=this.feePayer;else{if(!(this.signatures.length>0&&this.signatures[0].publicKey))throw new Error("Transaction fee payer required");r=this.signatures[0].publicKey}for(var n=0;n<t.length;n++)if(void 0===t[n].programId)throw new Error("Transaction instruction index ".concat(n," has undefined program id"));var a=[],i=[];t.forEach((function(e){e.keys.forEach((function(e){i.push(Object(o.a)({},e))}));var t=e.programId.toString();a.includes(t)||a.push(t)})),a.forEach((function(e){i.push({pubkey:new je(e),isSigner:!1,isWritable:!1})}));var f=[];i.forEach((function(e){var t=e.pubkey.toString(),r=f.findIndex((function(e){return e.pubkey.toString()===t}));r>-1?(f[r].isWritable=f[r].isWritable||e.isWritable,f[r].isSigner=f[r].isSigner||e.isSigner):f.push(e)})),f.sort((function(e,t){if(e.isSigner!==t.isSigner)return e.isSigner?-1:1;if(e.isWritable!==t.isWritable)return e.isWritable?-1:1;return e.pubkey.toBase58().localeCompare(t.pubkey.toBase58(),"en",{localeMatcher:"best fit",usage:"sort",sensitivity:"variant",ignorePunctuation:!1,numeric:!1,caseFirst:"lower"})}));var l=f.findIndex((function(e){return e.pubkey.equals(r)}));if(l>-1){var h=f.splice(l,1),d=Object(s.a)(h,1)[0];d.isSigner=!0,d.isWritable=!0,f.unshift(d)}else f.unshift({pubkey:r,isSigner:!0,isWritable:!0});var p,v=Object(c.a)(this.signatures);try{var b=function(){var e=p.value,t=f.findIndex((function(t){return t.pubkey.equals(e.publicKey)}));if(!(t>-1))throw new Error("unknown signer: ".concat(e.publicKey.toString()));f[t].isSigner||(f[t].isSigner=!0,console.warn("Transaction references a signature that is unnecessary, only the fee payer and instruction signer accounts should sign a transaction. This behavior is deprecated and will throw an error in the next major version release."))};for(v.s();!(p=v.n()).done;)b()}catch(E){v.e(E)}finally{v.f()}var y=0,g=0,m=0,w=[],k=[];f.forEach((function(e){var t=e.pubkey,r=e.isSigner,n=e.isWritable;r?(w.push(t.toString()),y+=1,n||(g+=1)):(k.push(t.toString()),n||(m+=1))}));var O=w.concat(k),S=t.map((function(e){var t=e.data,r=e.programId;return{programIdIndex:O.indexOf(r.toString()),accounts:e.keys.map((function(e){return O.indexOf(e.pubkey.toString())})),data:x.a.encode(t)}}));return S.forEach((function(e){qe(e.programIdIndex>=0),e.accounts.forEach((function(e){return qe(e>=0)}))})),new We({header:{numRequiredSignatures:y,numReadonlySignedAccounts:g,numReadonlyUnsignedAccounts:m},accountKeys:O,recentBlockhash:e,instructions:S})}},{key:"_compile",value:function(){var e=this.compileMessage(),t=e.accountKeys.slice(0,e.header.numRequiredSignatures);if(this.signatures.length===t.length&&this.signatures.every((function(e,r){return t[r].equals(e.publicKey)})))return e;return this.signatures=t.map((function(e){return{signature:null,publicKey:e}})),e}},{key:"serializeMessage",value:function(){return this._compile().serialize()}},{key:"getEstimatedFee",value:function(){var e=Object(h.a)(Object(l.a)().mark((function e(t){return Object(l.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.getFeeForMessage(this.compileMessage());case 2:return e.abrupt("return",e.sent.value);case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"setSigners",value:function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];if(0===t.length)throw new Error("No signers");var n=new Set;this.signatures=t.filter((function(e){var t=e.toString();return!n.has(t)&&(n.add(t),!0)})).map((function(e){return{signature:null,publicKey:e}}))}},{key:"sign",value:function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];if(0===t.length)throw new Error("No signers");for(var n=new Set,a=[],i=0,o=t;i<o.length;i++){var s=o[i],u=s.publicKey.toString();n.has(u)||(n.add(u),a.push(s))}this.signatures=a.map((function(e){return{signature:null,publicKey:e.publicKey}}));var c=this._compile();this._partialSign.apply(this,[c].concat(a))}},{key:"partialSign",value:function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];if(0===t.length)throw new Error("No signers");for(var n=new Set,a=[],i=0,o=t;i<o.length;i++){var s=o[i],u=s.publicKey.toString();n.has(u)||(n.add(u),a.push(s))}var c=this._compile();this._partialSign.apply(this,[c].concat(a))}},{key:"_partialSign",value:function(e){for(var t=this,r=e.serialize(),n=arguments.length,a=new Array(n>1?n-1:0),i=1;i<n;i++)a[i-1]=arguments[i];a.forEach((function(e){var n=we(r,e.secretKey);t._addSignature(e.publicKey,xe(n))}))}},{key:"addSignature",value:function(e,t){this._compile(),this._addSignature(e,t)}},{key:"_addSignature",value:function(e,t){qe(64===t.length);var r=this.signatures.findIndex((function(t){return e.equals(t.publicKey)}));if(r<0)throw new Error("unknown signer: ".concat(e.toString()));this.signatures[r].signature=y.Buffer.from(t)}},{key:"verifySignatures",value:function(e){return this._verifySignatures(this.serializeMessage(),void 0===e||e)}},{key:"_verifySignatures",value:function(e,t){var r,n=Object(c.a)(this.signatures);try{for(n.s();!(r=n.n()).done;){var a=r.value,i=a.signature,o=a.publicKey;if(null===i){if(t)return!1}else if(!ke(i,e,o.toBytes()))return!1}}catch(s){n.e(s)}finally{n.f()}return!0}},{key:"serialize",value:function(e){var t=Object.assign({requireAllSignatures:!0,verifySignatures:!0},e),r=t.requireAllSignatures,n=t.verifySignatures,a=this.serializeMessage();if(n&&!this._verifySignatures(a,r))throw new Error("Signature verification failed");return this._serialize(a)}},{key:"_serialize",value:function(e){var t=this.signatures,r=[];Ue(r,t.length);var n=r.length+64*t.length+e.length,a=y.Buffer.alloc(n);return qe(t.length<256),y.Buffer.from(r).copy(a,0),t.forEach((function(e,t){var n=e.signature;null!==n&&(qe(64===n.length,"signature has invalid length"),y.Buffer.from(n).copy(a,r.length+64*t))})),e.copy(a,r.length+64*t.length),qe(a.length<=Ie,"Transaction too large: ".concat(a.length," > ").concat(Ie)),a}},{key:"keys",get:function(){return qe(1===this.instructions.length),this.instructions[0].keys.map((function(e){return e.pubkey}))}},{key:"programId",get:function(){return qe(1===this.instructions.length),this.instructions[0].programId}},{key:"data",get:function(){return qe(1===this.instructions.length),this.instructions[0].data}}],[{key:"from",value:function(t){for(var r=Object(u.a)(t),n=Ne(r),a=[],i=0;i<n;i++){var o=r.slice(0,64);r=r.slice(64),a.push(x.a.encode(y.Buffer.from(o)))}return e.populate(We.from(r),a)}},{key:"populate",value:function(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=new e;return n.recentBlockhash=t.recentBlockhash,t.header.numRequiredSignatures>0&&(n.feePayer=t.accountKeys[0]),r.forEach((function(e,r){var a={signature:e==x.a.encode(Me)?null:x.a.decode(e),publicKey:t.accountKeys[r]};n.signatures.push(a)})),t.instructions.forEach((function(e){var r=e.accounts.map((function(e){var r=t.accountKeys[e];return{pubkey:r,isSigner:n.signatures.some((function(e){return e.publicKey.toString()===r.toString()}))||t.isAccountSigner(e),isWritable:t.isAccountWritable(e)}}));n.instructions.push(new De({keys:r,programId:t.accountKeys[e.programIdIndex],data:x.a.decode(e.data)}))})),n._message=t,n._json=n.toJSON(),n}}]),e}(),Ve=new je("SysvarC1ock11111111111111111111111111111111"),Ge=(new je("SysvarEpochSchedu1e111111111111111111111111"),new je("Sysvar1nstructions1111111111111111111111111"),new je("SysvarRecentB1ockHashes11111111111111111111")),Ze=new je("SysvarRent111111111111111111111111111111111"),Je=(new je("SysvarRewards111111111111111111111111111111"),new je("SysvarS1otHashes111111111111111111111111111"),new je("SysvarS1otHistory11111111111111111111111111"),new je("SysvarStakeHistory1111111111111111111111111"));function Ye(e,t,r,n){return Xe.apply(this,arguments)}function Xe(){return(Xe=Object(h.a)(Object(l.a)().mark((function e(t,r,n,a){var i,o,s,u,c;return Object(l.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=a&&{skipPreflight:a.skipPreflight,preflightCommitment:a.preflightCommitment||a.commitment,maxRetries:a.maxRetries,minContextSlot:a.minContextSlot},e.next=3,t.sendTransaction(r,n,i);case 3:if(o=e.sent,null==r.recentBlockhash||null==r.lastValidBlockHeight){e.next=10;break}return e.next=7,t.confirmTransaction({abortSignal:null===a||void 0===a?void 0:a.abortSignal,signature:o,blockhash:r.recentBlockhash,lastValidBlockHeight:r.lastValidBlockHeight},a&&a.commitment);case 7:s=e.sent.value,e.next=22;break;case 10:if(null==r.minNonceContextSlot||null==r.nonceInfo){e.next=18;break}return u=r.nonceInfo.nonceInstruction,c=u.keys[0].pubkey,e.next=15,t.confirmTransaction({abortSignal:null===a||void 0===a?void 0:a.abortSignal,minContextSlot:r.minNonceContextSlot,nonceAccountPubkey:c,nonceValue:r.nonceInfo.nonce,signature:o},a&&a.commitment);case 15:s=e.sent.value,e.next=22;break;case 18:return null!=(null===a||void 0===a?void 0:a.abortSignal)&&console.warn("sendAndConfirmTransaction(): A transaction with a deprecated confirmation strategy was supplied along with an `abortSignal`. Only transactions having `lastValidBlockHeight` or a combination of `nonceInfo` and `minNonceContextSlot` are abortable."),e.next=21,t.confirmTransaction(o,a&&a.commitment);case 21:s=e.sent.value;case 22:if(!s.err){e.next=24;break}throw new Error("Transaction ".concat(o," failed (").concat(JSON.stringify(s),")"));case 24:return e.abrupt("return",o);case 25:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function $e(e){return new Promise((function(t){return setTimeout(t,e)}))}function Qe(e,t){var r=e.layout.span>=0?e.layout.span:Re(e,t),n=y.Buffer.alloc(r),a=Object.assign({instruction:e.index},t);return e.layout.encode(a,n),n}var et,tt=E.nu64("lamportsPerSignature"),rt=E.struct([E.u32("version"),E.u32("state"),Ce("authorizedPubkey"),Ce("nonce"),E.struct([tt],"feeCalculator")]),nt=rt.span,at=function(){function e(t){Object(v.a)(this,e),this.authorizedPubkey=void 0,this.nonce=void 0,this.feeCalculator=void 0,this.authorizedPubkey=t.authorizedPubkey,this.nonce=t.nonce,this.feeCalculator=t.feeCalculator}return Object(b.a)(e,null,[{key:"fromAccountData",value:function(t){var r=rt.decode(xe(t),0);return new e({authorizedPubkey:new je(r.authorizedPubkey),nonce:new je(r.nonce).toString(),feeCalculator:r.feeCalculator})}}]),e}(),it=(et=8,function(e){var t=Object(E.blob)(et,e),r=function(e){return{decode:e.decode.bind(e),encode:e.encode.bind(e)}}(t),n=r.encode,a=r.decode,i=t;return i.decode=function(e,t){var r=a(e,t);return Object(B.toBigIntLE)(y.Buffer.from(r))},i.encode=function(e,t,r){var a=Object(B.toBufferLE)(e,et);return n(a,t,r)},i}),ot=Object.freeze({Create:{index:0,layout:E.struct([E.u32("instruction"),E.ns64("lamports"),E.ns64("space"),Ce("programId")])},Assign:{index:1,layout:E.struct([E.u32("instruction"),Ce("programId")])},Transfer:{index:2,layout:E.struct([E.u32("instruction"),it("lamports")])},CreateWithSeed:{index:3,layout:E.struct([E.u32("instruction"),Ce("base"),Le("seed"),E.ns64("lamports"),E.ns64("space"),Ce("programId")])},AdvanceNonceAccount:{index:4,layout:E.struct([E.u32("instruction")])},WithdrawNonceAccount:{index:5,layout:E.struct([E.u32("instruction"),E.ns64("lamports")])},InitializeNonceAccount:{index:6,layout:E.struct([E.u32("instruction"),Ce("authorized")])},AuthorizeNonceAccount:{index:7,layout:E.struct([E.u32("instruction"),Ce("authorized")])},Allocate:{index:8,layout:E.struct([E.u32("instruction"),E.ns64("space")])},AllocateWithSeed:{index:9,layout:E.struct([E.u32("instruction"),Ce("base"),Le("seed"),E.ns64("space"),Ce("programId")])},AssignWithSeed:{index:10,layout:E.struct([E.u32("instruction"),Ce("base"),Le("seed"),Ce("programId")])},TransferWithSeed:{index:11,layout:E.struct([E.u32("instruction"),it("lamports"),Le("seed"),Ce("programId")])},UpgradeNonceAccount:{index:12,layout:E.struct([E.u32("instruction")])}}),st=function(){function e(){Object(v.a)(this,e)}return Object(b.a)(e,null,[{key:"createAccount",value:function(e){var t=Qe(ot.Create,{lamports:e.lamports,space:e.space,programId:xe(e.programId.toBuffer())});return new De({keys:[{pubkey:e.fromPubkey,isSigner:!0,isWritable:!0},{pubkey:e.newAccountPubkey,isSigner:!0,isWritable:!0}],programId:this.programId,data:t})}},{key:"transfer",value:function(e){var t,r;"basePubkey"in e?(t=Qe(ot.TransferWithSeed,{lamports:BigInt(e.lamports),seed:e.seed,programId:xe(e.programId.toBuffer())}),r=[{pubkey:e.fromPubkey,isSigner:!1,isWritable:!0},{pubkey:e.basePubkey,isSigner:!0,isWritable:!1},{pubkey:e.toPubkey,isSigner:!1,isWritable:!0}]):(t=Qe(ot.Transfer,{lamports:BigInt(e.lamports)}),r=[{pubkey:e.fromPubkey,isSigner:!0,isWritable:!0},{pubkey:e.toPubkey,isSigner:!1,isWritable:!0}]);return new De({keys:r,programId:this.programId,data:t})}},{key:"assign",value:function(e){var t,r;"basePubkey"in e?(t=Qe(ot.AssignWithSeed,{base:xe(e.basePubkey.toBuffer()),seed:e.seed,programId:xe(e.programId.toBuffer())}),r=[{pubkey:e.accountPubkey,isSigner:!1,isWritable:!0},{pubkey:e.basePubkey,isSigner:!0,isWritable:!1}]):(t=Qe(ot.Assign,{programId:xe(e.programId.toBuffer())}),r=[{pubkey:e.accountPubkey,isSigner:!0,isWritable:!0}]);return new De({keys:r,programId:this.programId,data:t})}},{key:"createAccountWithSeed",value:function(e){var t=Qe(ot.CreateWithSeed,{base:xe(e.basePubkey.toBuffer()),seed:e.seed,lamports:e.lamports,space:e.space,programId:xe(e.programId.toBuffer())}),r=[{pubkey:e.fromPubkey,isSigner:!0,isWritable:!0},{pubkey:e.newAccountPubkey,isSigner:!1,isWritable:!0}];return e.basePubkey!=e.fromPubkey&&r.push({pubkey:e.basePubkey,isSigner:!0,isWritable:!1}),new De({keys:r,programId:this.programId,data:t})}},{key:"createNonceAccount",value:function(t){var r=new Fe;"basePubkey"in t&&"seed"in t?r.add(e.createAccountWithSeed({fromPubkey:t.fromPubkey,newAccountPubkey:t.noncePubkey,basePubkey:t.basePubkey,seed:t.seed,lamports:t.lamports,space:nt,programId:this.programId})):r.add(e.createAccount({fromPubkey:t.fromPubkey,newAccountPubkey:t.noncePubkey,lamports:t.lamports,space:nt,programId:this.programId}));var n={noncePubkey:t.noncePubkey,authorizedPubkey:t.authorizedPubkey};return r.add(this.nonceInitialize(n)),r}},{key:"nonceInitialize",value:function(e){var t=Qe(ot.InitializeNonceAccount,{authorized:xe(e.authorizedPubkey.toBuffer())}),r={keys:[{pubkey:e.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:Ge,isSigner:!1,isWritable:!1},{pubkey:Ze,isSigner:!1,isWritable:!1}],programId:this.programId,data:t};return new De(r)}},{key:"nonceAdvance",value:function(e){var t=Qe(ot.AdvanceNonceAccount),r={keys:[{pubkey:e.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:Ge,isSigner:!1,isWritable:!1},{pubkey:e.authorizedPubkey,isSigner:!0,isWritable:!1}],programId:this.programId,data:t};return new De(r)}},{key:"nonceWithdraw",value:function(e){var t=Qe(ot.WithdrawNonceAccount,{lamports:e.lamports});return new De({keys:[{pubkey:e.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:e.toPubkey,isSigner:!1,isWritable:!0},{pubkey:Ge,isSigner:!1,isWritable:!1},{pubkey:Ze,isSigner:!1,isWritable:!1},{pubkey:e.authorizedPubkey,isSigner:!0,isWritable:!1}],programId:this.programId,data:t})}},{key:"nonceAuthorize",value:function(e){var t=Qe(ot.AuthorizeNonceAccount,{authorized:xe(e.newAuthorizedPubkey.toBuffer())});return new De({keys:[{pubkey:e.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:e.authorizedPubkey,isSigner:!0,isWritable:!1}],programId:this.programId,data:t})}},{key:"allocate",value:function(e){var t,r;"basePubkey"in e?(t=Qe(ot.AllocateWithSeed,{base:xe(e.basePubkey.toBuffer()),seed:e.seed,space:e.space,programId:xe(e.programId.toBuffer())}),r=[{pubkey:e.accountPubkey,isSigner:!1,isWritable:!0},{pubkey:e.basePubkey,isSigner:!0,isWritable:!1}]):(t=Qe(ot.Allocate,{space:e.space}),r=[{pubkey:e.accountPubkey,isSigner:!0,isWritable:!0}]);return new De({keys:r,programId:this.programId,data:t})}}]),e}();st.programId=new je("11111111111111111111111111111111");var ut=function(){function e(){Object(v.a)(this,e)}return Object(b.a)(e,null,[{key:"getMinNumSignatures",value:function(t){return 2*(Math.ceil(t/e.chunkSize)+1+1)}},{key:"load",value:function(){var t=Object(h.a)(Object(l.a)().mark((function t(r,n,a,i,o){var s,u,c,f,h,d,p,v,b,g,m,w,k,x,O,S,B,j,I;return Object(l.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,r.getMinimumBalanceForRentExemption(o.length);case 2:return s=t.sent,t.next=5,r.getAccountInfo(a.publicKey,"confirmed");case 5:if(u=t.sent,c=null,null===u){t.next=16;break}if(!u.executable){t.next=11;break}return console.error("Program load failed, account is already executable"),t.abrupt("return",!1);case 11:u.data.length!==o.length&&(c=c||new Fe).add(st.allocate({accountPubkey:a.publicKey,space:o.length})),u.owner.equals(i)||(c=c||new Fe).add(st.assign({accountPubkey:a.publicKey,programId:i})),u.lamports<s&&(c=c||new Fe).add(st.transfer({fromPubkey:n.publicKey,toPubkey:a.publicKey,lamports:s-u.lamports})),t.next=17;break;case 16:c=(new Fe).add(st.createAccount({fromPubkey:n.publicKey,newAccountPubkey:a.publicKey,lamports:s>0?s:1,space:o.length,programId:i}));case 17:if(null===c){t.next=20;break}return t.next=20,Ye(r,c,[n,a],{commitment:"confirmed"});case 20:f=E.struct([E.u32("instruction"),E.u32("offset"),E.u32("bytesLength"),E.u32("bytesLengthPadding"),E.seq(E.u8("byte"),E.offset(E.u32(),-8),"bytes")]),h=e.chunkSize,d=0,p=o,v=[];case 25:if(!(p.length>0)){t.next=39;break}if(b=p.slice(0,h),g=y.Buffer.alloc(h+16),f.encode({instruction:0,offset:d,bytes:b,bytesLength:0,bytesLengthPadding:0},g),m=(new Fe).add({keys:[{pubkey:a.publicKey,isSigner:!0,isWritable:!0}],programId:i,data:g}),v.push(Ye(r,m,[n,a],{commitment:"confirmed"})),!r._rpcEndpoint.includes("solana.com")){t.next=35;break}return 4,t.next=35,$e(250);case 35:d+=h,p=p.slice(h),t.next=25;break;case 39:return t.next=41,Promise.all(v);case 41:return w=E.struct([E.u32("instruction")]),k=y.Buffer.alloc(w.span),w.encode({instruction:1},k),x=(new Fe).add({keys:[{pubkey:a.publicKey,isSigner:!0,isWritable:!0},{pubkey:Ze,isSigner:!1,isWritable:!1}],programId:i,data:k}),O="processed",t.next=48,r.sendTransaction(x,[n,a],{preflightCommitment:O});case 48:return S=t.sent,t.next=51,r.confirmTransaction({signature:S,lastValidBlockHeight:x.lastValidBlockHeight,blockhash:x.recentBlockhash},O);case 51:if(B=t.sent,j=B.context,!(I=B.value).err){t.next=56;break}throw new Error("Transaction ".concat(S," failed (").concat(JSON.stringify(I),")"));case 56:return t.prev=57,t.next=60,r.getSlot({commitment:O});case 60:if(!(t.sent>j.slot)){t.next=63;break}return t.abrupt("break",71);case 63:t.next=67;break;case 65:t.prev=65,t.t0=t.catch(57);case 67:return t.next=69,new Promise((function(e){return setTimeout(e,Math.round(200))}));case 69:t.next=56;break;case 71:return t.abrupt("return",!0);case 72:case"end":return t.stop()}}),t,null,[[57,65]])})));return function(e,r,n,a,i){return t.apply(this,arguments)}}()}]),e}();ut.chunkSize=932;new je("BPFLoader2111111111111111111111111111111111");function ct(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var ft=Object.prototype.toString,lt=Object.keys||function(e){var t=[];for(var r in e)t.push(r);return t};function ht(e,t){var r,n,a,i,o,s,u;if(!0===e)return"true";if(!1===e)return"false";switch(typeof e){case"object":if(null===e)return null;if(e.toJSON&&"function"===typeof e.toJSON)return ht(e.toJSON(),t);if("[object Array]"===(u=ft.call(e))){for(a="[",n=e.length-1,r=0;r<n;r++)a+=ht(e[r],!0)+",";return n>-1&&(a+=ht(e[r],!0)),a+"]"}if("[object Object]"===u){for(n=(i=lt(e).sort()).length,a="",r=0;r<n;)void 0!==(s=ht(e[o=i[r]],!1))&&(a&&(a+=","),a+=JSON.stringify(o)+":"+s),r++;return"{"+a+"}"}return JSON.stringify(e);case"function":case"undefined":return t?null:void 0;case"string":return JSON.stringify(e);default:return isFinite(e)?e:null}}var dt=ct((function(e){var t=ht(e,!1);if(void 0!==t)return""+t}));function pt(e){for(var t=0;e>1;)e/=2,t++;return t}var vt=function(){function e(t,r,n,a,i){Object(v.a)(this,e),this.slotsPerEpoch=void 0,this.leaderScheduleSlotOffset=void 0,this.warmup=void 0,this.firstNormalEpoch=void 0,this.firstNormalSlot=void 0,this.slotsPerEpoch=t,this.leaderScheduleSlotOffset=r,this.warmup=n,this.firstNormalEpoch=a,this.firstNormalSlot=i}return Object(b.a)(e,[{key:"getEpoch",value:function(e){return this.getEpochAndSlotIndex(e)[0]}},{key:"getEpochAndSlotIndex",value:function(e){if(e<this.firstNormalSlot){var t=pt(0===(r=e+32+1)?1:(r--,r|=r>>1,r|=r>>2,r|=r>>4,r|=r>>8,r|=r>>16,1+(r|=r>>32)))-pt(32)-1;return[t,e-(this.getSlotsInEpoch(t)-32)]}var r,n=e-this.firstNormalSlot,a=Math.floor(n/this.slotsPerEpoch);return[this.firstNormalEpoch+a,n%this.slotsPerEpoch]}},{key:"getFirstSlotInEpoch",value:function(e){return e<=this.firstNormalEpoch?32*(Math.pow(2,e)-1):(e-this.firstNormalEpoch)*this.slotsPerEpoch+this.firstNormalSlot}},{key:"getLastSlotInEpoch",value:function(e){return this.getFirstSlotInEpoch(e)+this.getSlotsInEpoch(e)-1}},{key:"getSlotsInEpoch",value:function(e){return e<this.firstNormalEpoch?Math.pow(2,e+pt(32)):this.slotsPerEpoch}}]),e}(),bt=function(e){Object(d.a)(r,e);var t=Object(p.a)(r);function r(e,n){var a;return Object(v.a)(this,r),(a=t.call(this,e)).logs=void 0,a.logs=n,a}return Object(b.a)(r)}(Object(f.a)(Error)),yt=function(e){Object(d.a)(r,e);var t=Object(p.a)(r);function r(e,n){var a,i=e.code,o=e.message,s=e.data;return Object(v.a)(this,r),(a=t.call(this,null!=n?"".concat(n,": ").concat(o):o)).code=void 0,a.data=void 0,a.code=i,a.data=s,a.name="SolanaJSONRPCError",a}return Object(b.a)(r)}(Object(f.a)(Error)),gt=globalThis.fetch,mt=function(e){Object(d.a)(r,e);var t=Object(p.a)(r);function r(e,n,a){var i;Object(v.a)(this,r);return(i=t.call(this,(function(e){var t=ce()(e,Object(o.a)({autoconnect:!0,max_reconnects:5,reconnect:!0,reconnect_interval:1e3},n));return i.underlyingSocket="socket"in t?t.socket:t,t}),e,n,a)).underlyingSocket=void 0,i}return Object(b.a)(r,[{key:"call",value:function(){for(var e,t,n=null===(e=this.underlyingSocket)||void 0===e?void 0:e.readyState,o=arguments.length,s=new Array(o),u=0;u<o;u++)s[u]=arguments[u];return 1===n?(t=Object(a.a)(Object(i.a)(r.prototype),"call",this)).call.apply(t,[this].concat(s)):Promise.reject(new Error("Tried to call a JSON-RPC method `"+s[0]+"` but the socket was not `CONNECTING` or `OPEN` (`readyState` was "+n+")"))}},{key:"notify",value:function(){for(var e,t,n=null===(e=this.underlyingSocket)||void 0===e?void 0:e.readyState,o=arguments.length,s=new Array(o),u=0;u<o;u++)s[u]=arguments[u];return 1===n?(t=Object(a.a)(Object(i.a)(r.prototype),"notify",this)).call.apply(t,[this].concat(s)):Promise.reject(new Error("Tried to send a JSON-RPC notification `"+s[0]+"` but the socket was not `CONNECTING` or `OPEN` (`readyState` was "+n+")"))}}]),r}(se.a);var wt=function(){function e(t){Object(v.a)(this,e),this.key=void 0,this.state=void 0,this.key=t.key,this.state=t.state}return Object(b.a)(e,[{key:"isActive",value:function(){var e=BigInt("0xffffffffffffffff");return this.state.deactivationSlot===e}}],[{key:"deserialize",value:function(e){var t=function(e,t){var r;try{r=e.layout.decode(t)}catch(n){throw new Error("invalid instruction; "+n)}if(r.typeIndex!==e.index)throw new Error("invalid account data; account type mismatch ".concat(r.typeIndex," != ").concat(e.index));return r}(kt,e),r=e.length-56;qe(r>=0,"lookup table is invalid"),qe(r%32===0,"lookup table is invalid");var n=r/32,a=E.struct([E.seq(Ce(),n,"addresses")]).decode(e.slice(56)).addresses;return{deactivationSlot:t.deactivationSlot,lastExtendedSlot:t.lastExtendedSlot,lastExtendedSlotStartIndex:t.lastExtendedStartIndex,authority:0!==t.authority.length?new je(t.authority[0]):void 0,addresses:a.map((function(e){return new je(e)}))}}}]),e}(),kt={index:1,layout:E.struct([E.u32("typeIndex"),it("deactivationSlot"),E.nu64("lastExtendedSlot"),E.u8("lastExtendedStartIndex"),E.u8(),E.seq(Ce(),E.offset(E.u8(),-1),"authority")])},xt=/^[^:]+:\/\/([^:[]+|\[[^\]]+\])(:\d+)?(.*)/i;var Ot=ne(F(je),$(),(function(e){return new je(e)})),St=Q([$(),V("base64")]),Et=ne(F(y.Buffer),St,(function(e){return y.Buffer.from(e[0],"base64")}));function Bt(e){var t,r;if("string"===typeof e)t=e;else if(e){t=e.commitment,r=Object(n.a)(e,he)}return{commitment:t,config:r}}function jt(e){return te([ee({jsonrpc:V("2.0"),id:$(),result:e}),ee({jsonrpc:V("2.0"),id:$(),error:ee({code:re(),message:$(),data:Y(K("any",(function(){return!0})))})})])}var It=jt(re());function At(e){return ne(jt(e),It,(function(t){return"error"in t?t:Object(o.a)(Object(o.a)({},t),{},{result:z(t.result,e)})}))}function _t(e){return At(ee({context:ee({slot:J()}),value:e}))}function Pt(e){return ee({context:ee({slot:J()}),value:e})}function Tt(e,t){return 0===e?new He({header:t.header,staticAccountKeys:t.accountKeys.map((function(e){return new je(e)})),recentBlockhash:t.recentBlockhash,compiledInstructions:t.instructions.map((function(e){return{programIdIndex:e.programIdIndex,accountKeyIndexes:e.accounts,data:x.a.decode(e.data)}})),addressTableLookups:t.addressTableLookups}):new We(t)}var Ct=ee({foundation:J(),foundationTerm:J(),initial:J(),taper:J(),terminal:J()}),Lt=At(M(Z(ee({epoch:J(),effectiveSlot:J(),amount:J(),postBalance:J(),commission:Y(Z(J()))})))),Rt=M(ee({slot:J(),prioritizationFee:J()})),Nt=ee({total:J(),validator:J(),foundation:J(),epoch:J()}),Ut=ee({epoch:J(),slotIndex:J(),slotsInEpoch:J(),absoluteSlot:J(),blockHeight:Y(J()),transactionCount:Y(J())}),qt=ee({slotsPerEpoch:J(),leaderScheduleSlotOffset:J(),warmup:D(),firstNormalEpoch:J(),firstNormalSlot:J()}),zt=X($(),M(J())),Wt=Z(te([ee({}),$()])),Ht=ee({err:Wt}),Kt=V("receivedSignature"),Mt=ee({"solana-core":$(),"feature-set":Y(J())}),Dt=_t(ee({err:Z(te([ee({}),$()])),logs:Z(M($())),accounts:Y(Z(M(Z(ee({executable:D(),owner:$(),lamports:J(),data:M($()),rentEpoch:Y(J())}))))),unitsConsumed:Y(J()),returnData:Y(Z(ee({programId:$(),data:Q([$(),V("base64")])})))})),Ft=_t(ee({byIdentity:X($(),M(J())),range:ee({firstSlot:J(),lastSlot:J()})}));var Vt=At(Ct),Gt=At(Nt),Zt=At(Rt),Jt=At(Ut),Yt=At(qt),Xt=At(zt),$t=At(J()),Qt=_t(ee({total:J(),circulating:J(),nonCirculating:J(),nonCirculatingAccounts:M(Ot)})),er=ee({amount:$(),uiAmount:Z(J()),decimals:J(),uiAmountString:Y($())}),tr=_t(M(ee({address:Ot,amount:$(),uiAmount:Z(J()),decimals:J(),uiAmountString:Y($())}))),rr=_t(M(ee({pubkey:Ot,account:ee({executable:D(),owner:Ot,lamports:J(),data:Et,rentEpoch:J()})}))),nr=ee({program:$(),parsed:re(),space:J()}),ar=_t(M(ee({pubkey:Ot,account:ee({executable:D(),owner:Ot,lamports:J(),data:nr,rentEpoch:J()})}))),ir=_t(M(ee({lamports:J(),address:Ot}))),or=ee({executable:D(),owner:Ot,lamports:J(),data:Et,rentEpoch:J()}),sr=ee({pubkey:Ot,account:or}),ur=ne(te([F(y.Buffer),nr]),te([St,nr]),(function(e){return Array.isArray(e)?z(e,Et):e})),cr=ee({executable:D(),owner:Ot,lamports:J(),data:ur,rentEpoch:J()}),fr=ee({pubkey:Ot,account:cr}),lr=ee({state:te([V("active"),V("inactive"),V("activating"),V("deactivating")]),active:J(),inactive:J()}),hr=At(M(ee({signature:$(),slot:J(),err:Wt,memo:Z($()),blockTime:Y(Z(J()))}))),dr=At(M(ee({signature:$(),slot:J(),err:Wt,memo:Z($()),blockTime:Y(Z(J()))}))),pr=ee({subscription:J(),result:Pt(or)}),vr=ee({pubkey:Ot,account:or}),br=ee({subscription:J(),result:Pt(vr)}),yr=ee({parent:J(),slot:J(),root:J()}),gr=ee({subscription:J(),result:yr}),mr=te([ee({type:te([V("firstShredReceived"),V("completed"),V("optimisticConfirmation"),V("root")]),slot:J(),timestamp:J()}),ee({type:V("createdBank"),parent:J(),slot:J(),timestamp:J()}),ee({type:V("frozen"),slot:J(),timestamp:J(),stats:ee({numTransactionEntries:J(),numSuccessfulTransactions:J(),numFailedTransactions:J(),maxTransactionsPerEntry:J()})}),ee({type:V("dead"),slot:J(),timestamp:J(),err:$()})]),wr=ee({subscription:J(),result:mr}),kr=ee({subscription:J(),result:Pt(te([Ht,Kt]))}),xr=ee({subscription:J(),result:J()}),Or=ee({pubkey:$(),gossip:Z($()),tpu:Z($()),rpc:Z($()),version:Z($())}),Sr=ee({votePubkey:$(),nodePubkey:$(),activatedStake:J(),epochVoteAccount:D(),epochCredits:M(Q([J(),J(),J()])),commission:J(),lastVote:J(),rootSlot:Z(J())}),Er=At(ee({current:M(Sr),delinquent:M(Sr)})),Br=te([V("processed"),V("confirmed"),V("finalized")]),jr=ee({slot:J(),confirmations:Z(J()),err:Wt,confirmationStatus:Y(Br)}),Ir=_t(M(Z(jr))),Ar=At(J()),_r=ee({accountKey:Ot,writableIndexes:M(J()),readonlyIndexes:M(J())}),Pr=ee({signatures:M($()),message:ee({accountKeys:M($()),header:ee({numRequiredSignatures:J(),numReadonlySignedAccounts:J(),numReadonlyUnsignedAccounts:J()}),instructions:M(ee({accounts:M(J()),data:$(),programIdIndex:J()})),recentBlockhash:$(),addressTableLookups:Y(M(_r))})}),Tr=ee({pubkey:Ot,signer:D(),writable:D(),source:Y(te([V("transaction"),V("lookupTable")]))}),Cr=ee({accountKeys:M(Tr),signatures:M($())}),Lr=ee({parsed:re(),program:$(),programId:Ot}),Rr=ee({accounts:M(Ot),data:$(),programId:Ot}),Nr=ne(te([Rr,Lr]),te([ee({parsed:re(),program:$(),programId:$()}),ee({accounts:M($()),data:$(),programId:$()})]),(function(e){return z(e,"accounts"in e?Rr:Lr)})),Ur=ee({signatures:M($()),message:ee({accountKeys:M(Tr),instructions:M(Nr),recentBlockhash:$(),addressTableLookups:Y(Z(M(_r)))})}),qr=ee({accountIndex:J(),mint:$(),owner:Y($()),uiTokenAmount:er}),zr=ee({writable:M(Ot),readonly:M(Ot)}),Wr=ee({err:Wt,fee:J(),innerInstructions:Y(Z(M(ee({index:J(),instructions:M(ee({accounts:M(J()),data:$(),programIdIndex:J()}))})))),preBalances:M(J()),postBalances:M(J()),logMessages:Y(Z(M($()))),preTokenBalances:Y(Z(M(qr))),postTokenBalances:Y(Z(M(qr))),loadedAddresses:Y(zr),computeUnitsConsumed:Y(J())}),Hr=ee({err:Wt,fee:J(),innerInstructions:Y(Z(M(ee({index:J(),instructions:M(Nr)})))),preBalances:M(J()),postBalances:M(J()),logMessages:Y(Z(M($()))),preTokenBalances:Y(Z(M(qr))),postTokenBalances:Y(Z(M(qr))),loadedAddresses:Y(zr),computeUnitsConsumed:Y(J())}),Kr=te([V(0),V("legacy")]),Mr=ee({pubkey:$(),lamports:J(),postBalance:Z(J()),rewardType:Z($()),commission:Y(Z(J()))}),Dr=At(Z(ee({blockhash:$(),previousBlockhash:$(),parentSlot:J(),transactions:M(ee({transaction:Pr,meta:Z(Wr),version:Y(Kr)})),rewards:Y(M(Mr)),blockTime:Z(J()),blockHeight:Z(J())}))),Fr=At(Z(ee({blockhash:$(),previousBlockhash:$(),parentSlot:J(),rewards:Y(M(Mr)),blockTime:Z(J()),blockHeight:Z(J())}))),Vr=At(Z(ee({blockhash:$(),previousBlockhash:$(),parentSlot:J(),transactions:M(ee({transaction:Cr,meta:Z(Wr),version:Y(Kr)})),rewards:Y(M(Mr)),blockTime:Z(J()),blockHeight:Z(J())}))),Gr=At(Z(ee({blockhash:$(),previousBlockhash:$(),parentSlot:J(),transactions:M(ee({transaction:Ur,meta:Z(Hr),version:Y(Kr)})),rewards:Y(M(Mr)),blockTime:Z(J()),blockHeight:Z(J())}))),Zr=At(Z(ee({blockhash:$(),previousBlockhash:$(),parentSlot:J(),transactions:M(ee({transaction:Cr,meta:Z(Hr),version:Y(Kr)})),rewards:Y(M(Mr)),blockTime:Z(J()),blockHeight:Z(J())}))),Jr=At(Z(ee({blockhash:$(),previousBlockhash:$(),parentSlot:J(),rewards:Y(M(Mr)),blockTime:Z(J()),blockHeight:Z(J())}))),Yr=At(Z(ee({blockhash:$(),previousBlockhash:$(),parentSlot:J(),transactions:M(ee({transaction:Pr,meta:Z(Wr)})),rewards:Y(M(Mr)),blockTime:Z(J())}))),Xr=At(Z(ee({blockhash:$(),previousBlockhash:$(),parentSlot:J(),signatures:M($()),blockTime:Z(J())}))),$r=At(Z(ee({slot:J(),meta:Wr,blockTime:Y(Z(J())),transaction:Pr,version:Y(Kr)}))),Qr=At(Z(ee({slot:J(),transaction:Ur,meta:Z(Hr),blockTime:Y(Z(J())),version:Y(Kr)}))),en=_t(ee({blockhash:$(),feeCalculator:ee({lamportsPerSignature:J()})})),tn=_t(ee({blockhash:$(),lastValidBlockHeight:J()})),rn=_t(D()),nn=At(M(ee({slot:J(),numTransactions:J(),numSlots:J(),samplePeriodSecs:J()}))),an=_t(Z(ee({feeCalculator:ee({lamportsPerSignature:J()})}))),on=At($()),sn=At($()),un=ee({err:Wt,logs:M($()),signature:$()}),cn=ee({result:Pt(un),subscription:J()}),fn={"solana-client":"js/".concat("0.0.0-development")},ln=function(){function e(t,r){var n,a,i,o,c,f,d=this;Object(v.a)(this,e),this._commitment=void 0,this._confirmTransactionInitialTimeout=void 0,this._rpcEndpoint=void 0,this._rpcWsEndpoint=void 0,this._rpcClient=void 0,this._rpcRequest=void 0,this._rpcBatchRequest=void 0,this._rpcWebSocket=void 0,this._rpcWebSocketConnected=!1,this._rpcWebSocketHeartbeat=null,this._rpcWebSocketIdleTimeout=null,this._rpcWebSocketGeneration=0,this._disableBlockhashCaching=!1,this._pollingBlockhash=!1,this._blockhashInfo={latestBlockhash:null,lastFetch:0,transactionSignatures:[],simulatedSignatures:[]},this._nextClientSubscriptionId=0,this._subscriptionDisposeFunctionsByClientSubscriptionId={},this._subscriptionHashByClientSubscriptionId={},this._subscriptionStateChangeCallbacksByHash={},this._subscriptionCallbacksByServerSubscriptionId={},this._subscriptionsByHash={},this._subscriptionsAutoDisposedByRpc=new Set,this.getBlockHeight=function(){var e={};return function(){var t=Object(h.a)(Object(l.a)().mark((function t(r){var n,a,i,o,s,u;return Object(l.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=Bt(r),i=a.commitment,o=a.config,s=d._buildArgs([],i,void 0,o),u=dt(s),e[u]=null!==(n=e[u])&&void 0!==n?n:Object(h.a)(Object(l.a)().mark((function t(){var r,n;return Object(l.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,d._rpcRequest("getBlockHeight",s);case 3:if(r=t.sent,!("error"in(n=z(r,At(J()))))){t.next=7;break}throw new yt(n.error,"failed to get block height information");case 7:return t.abrupt("return",n.result);case 8:return t.prev=8,delete e[u],t.finish(8);case 11:case"end":return t.stop()}}),t,null,[[0,,8,11]])})))(),t.next=6,e[u];case 6:return t.abrupt("return",t.sent);case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}(),r&&"string"===typeof r?this._commitment=r:r&&(this._commitment=r.commitment,this._confirmTransactionInitialTimeout=r.confirmTransactionInitialTimeout,n=r.wsEndpoint,a=r.httpHeaders,i=r.fetch,o=r.fetchMiddleware,c=r.disableRetryOnRateLimit,f=r.httpAgent),this._rpcEndpoint=function(e){if(!1===/^https?:/.test(e))throw new TypeError("Endpoint URL must start with `http:` or `https:`.");return e}(t),this._rpcWsEndpoint=n||function(e){var t=e.match(xt);if(null==t)throw TypeError("Failed to validate endpoint URL `".concat(e,"`"));var r=Object(s.a)(t,4),n=(r[0],r[1]),a=r[2],i=r[3],o=e.startsWith("https:")?"wss:":"ws:",u=null==a?null:parseInt(a.slice(1),10),c=null==u?"":":".concat(u+1);return"".concat(o,"//").concat(n).concat(c).concat(i)}(t),this._rpcClient=function(e,t,r,n,a,i){var o,s=r||gt;null!=i&&console.warn("You have supplied an `httpAgent` when creating a `Connection` in a browser environment.It has been ignored; `httpAgent` is only used in Node environments."),n&&(o=function(){var e=Object(h.a)(Object(l.a)().mark((function e(t,r){var a;return Object(l.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,new Promise((function(e,a){try{n(t,r,(function(t,r){return e([t,r])}))}catch(i){a(i)}}));case 2:return a=e.sent,e.next=5,s.apply(void 0,Object(u.a)(a));case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}());var c=new ie.a(function(){var r=Object(h.a)(Object(l.a)().mark((function r(n,i){var u,c,f,h,d;return Object(l.a)().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:u={method:"POST",body:n,agent:void 0,headers:Object.assign({"Content-Type":"application/json"},t||{},fn)},r.prev=1,c=5,h=500;case 4:if(!o){r.next=10;break}return r.next=7,o(e,u);case 7:f=r.sent,r.next=13;break;case 10:return r.next=12,s(e,u);case 12:f=r.sent;case 13:if(429===f.status){r.next=15;break}return r.abrupt("break",26);case 15:if(!0!==a){r.next=17;break}return r.abrupt("break",26);case 17:if(0!==(c-=1)){r.next=20;break}return r.abrupt("break",26);case 20:return console.log("Server responded with ".concat(f.status," ").concat(f.statusText,".  Retrying after ").concat(h,"ms delay...")),r.next=23,$e(h);case 23:h*=2;case 24:r.next=4;break;case 26:return r.next=28,f.text();case 28:d=r.sent,f.ok?i(null,d):i(new Error("".concat(f.status," ").concat(f.statusText,": ").concat(d))),r.next=35;break;case 32:r.prev=32,r.t0=r.catch(1),r.t0 instanceof Error&&i(r.t0);case 35:case"end":return r.stop()}}),r,null,[[1,32]])})));return function(e,t){return r.apply(this,arguments)}}(),{});return c}(t,a,i,o,c,f),this._rpcRequest=function(e){return function(t,r){return new Promise((function(n,a){e.request(t,r,(function(e,t){e?a(e):n(t)}))}))}}(this._rpcClient),this._rpcBatchRequest=function(e){return function(t){return new Promise((function(r,n){0===t.length&&r([]);var a=t.map((function(t){return e.request(t.methodName,t.args)}));e.request(a,(function(e,t){e?n(e):r(t)}))}))}}(this._rpcClient),this._rpcWebSocket=new mt(this._rpcWsEndpoint,{autoconnect:!1,max_reconnects:1/0}),this._rpcWebSocket.on("open",this._wsOnOpen.bind(this)),this._rpcWebSocket.on("error",this._wsOnError.bind(this)),this._rpcWebSocket.on("close",this._wsOnClose.bind(this)),this._rpcWebSocket.on("accountNotification",this._wsOnAccountNotification.bind(this)),this._rpcWebSocket.on("programNotification",this._wsOnProgramAccountNotification.bind(this)),this._rpcWebSocket.on("slotNotification",this._wsOnSlotNotification.bind(this)),this._rpcWebSocket.on("slotsUpdatesNotification",this._wsOnSlotUpdatesNotification.bind(this)),this._rpcWebSocket.on("signatureNotification",this._wsOnSignatureNotification.bind(this)),this._rpcWebSocket.on("rootNotification",this._wsOnRootNotification.bind(this)),this._rpcWebSocket.on("logsNotification",this._wsOnLogsNotification.bind(this))}return Object(b.a)(e,[{key:"commitment",get:function(){return this._commitment}},{key:"rpcEndpoint",get:function(){return this._rpcEndpoint}},{key:"getBalanceAndContext",value:function(){var e=Object(h.a)(Object(l.a)().mark((function e(t,r){var n,a,i,o,s,u;return Object(l.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Bt(r),a=n.commitment,i=n.config,o=this._buildArgs([t.toBase58()],a,void 0,i),e.next=4,this._rpcRequest("getBalance",o);case 4:if(s=e.sent,!("error"in(u=z(s,_t(J()))))){e.next=8;break}throw new yt(u.error,"failed to get balance for ".concat(t.toBase58()));case 8:return e.abrupt("return",u.result);case 9:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"getBalance",value:function(){var e=Object(h.a)(Object(l.a)().mark((function e(t,r){return Object(l.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getBalanceAndContext(t,r).then((function(e){return e.value})).catch((function(e){throw new Error("failed to get balance of account "+t.toBase58()+": "+e)}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"getBlockTime",value:function(){var e=Object(h.a)(Object(l.a)().mark((function e(t){var r,n;return Object(l.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._rpcRequest("getBlockTime",[t]);case 2:if(r=e.sent,!("error"in(n=z(r,At(Z(J())))))){e.next=6;break}throw new yt(n.error,"failed to get block time for slot ".concat(t));case 6:return e.abrupt("return",n.result);case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getMinimumLedgerSlot",value:function(){var e=Object(h.a)(Object(l.a)().mark((function e(){var t,r;return Object(l.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._rpcRequest("minimumLedgerSlot",[]);case 2:if(t=e.sent,!("error"in(r=z(t,At(J()))))){e.next=6;break}throw new yt(r.error,"failed to get minimum ledger slot");case 6:return e.abrupt("return",r.result);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getFirstAvailableBlock",value:function(){var e=Object(h.a)(Object(l.a)().mark((function e(){var t,r;return Object(l.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._rpcRequest("getFirstAvailableBlock",[]);case 2:if(t=e.sent,!("error"in(r=z(t,$t)))){e.next=6;break}throw new yt(r.error,"failed to get first available block");case 6:return e.abrupt("return",r.result);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getSupply",value:function(){var e=Object(h.a)(Object(l.a)().mark((function e(t){var r,n,a;return Object(l.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r={},r="string"===typeof t?{commitment:t}:t?Object(o.a)(Object(o.a)({},t),{},{commitment:t&&t.commitment||this.commitment}):{commitment:this.commitment},e.next=4,this._rpcRequest("getSupply",[r]);case 4:if(n=e.sent,!("error"in(a=z(n,Qt)))){e.next=8;break}throw new yt(a.error,"failed to get supply");case 8:return e.abrupt("return",a.result);case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getTokenSupply",value:function(){var e=Object(h.a)(Object(l.a)().mark((function e(t,r){var n,a,i;return Object(l.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this._buildArgs([t.toBase58()],r),e.next=3,this._rpcRequest("getTokenSupply",n);case 3:if(a=e.sent,!("error"in(i=z(a,_t(er))))){e.next=7;break}throw new yt(i.error,"failed to get token supply");case 7:return e.abrupt("return",i.result);case 8:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"getTokenAccountBalance",value:function(){var e=Object(h.a)(Object(l.a)().mark((function e(t,r){var n,a,i;return Object(l.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this._buildArgs([t.toBase58()],r),e.next=3,this._rpcRequest("getTokenAccountBalance",n);case 3:if(a=e.sent,!("error"in(i=z(a,_t(er))))){e.next=7;break}throw new yt(i.error,"failed to get token account balance");case 7:return e.abrupt("return",i.result);case 8:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"getTokenAccountsByOwner",value:function(){var e=Object(h.a)(Object(l.a)().mark((function e(t,r,n){var a,i,o,s,u,c,f;return Object(l.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=Bt(n),i=a.commitment,o=a.config,s=[t.toBase58()],"mint"in r?s.push({mint:r.mint.toBase58()}):s.push({programId:r.programId.toBase58()}),u=this._buildArgs(s,i,"base64",o),e.next=6,this._rpcRequest("getTokenAccountsByOwner",u);case 6:if(c=e.sent,!("error"in(f=z(c,rr)))){e.next=10;break}throw new yt(f.error,"failed to get token accounts owned by account ".concat(t.toBase58()));case 10:return e.abrupt("return",f.result);case 11:case"end":return e.stop()}}),e,this)})));return function(t,r,n){return e.apply(this,arguments)}}()},{key:"getParsedTokenAccountsByOwner",value:function(){var e=Object(h.a)(Object(l.a)().mark((function e(t,r,n){var a,i,o,s;return Object(l.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=[t.toBase58()],"mint"in r?a.push({mint:r.mint.toBase58()}):a.push({programId:r.programId.toBase58()}),i=this._buildArgs(a,n,"jsonParsed"),e.next=5,this._rpcRequest("getTokenAccountsByOwner",i);case 5:if(o=e.sent,!("error"in(s=z(o,ar)))){e.next=9;break}throw new yt(s.error,"failed to get token accounts owned by account ".concat(t.toBase58()));case 9:return e.abrupt("return",s.result);case 10:case"end":return e.stop()}}),e,this)})));return function(t,r,n){return e.apply(this,arguments)}}()},{key:"getLargestAccounts",value:function(){var e=Object(h.a)(Object(l.a)().mark((function e(t){var r,n,a,i;return Object(l.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Object(o.a)(Object(o.a)({},t),{},{commitment:t&&t.commitment||this.commitment}),n=r.filter||r.commitment?[r]:[],e.next=4,this._rpcRequest("getLargestAccounts",n);case 4:if(a=e.sent,!("error"in(i=z(a,ir)))){e.next=8;break}throw new yt(i.error,"failed to get largest accounts");case 8:return e.abrupt("return",i.result);case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getTokenLargestAccounts",value:function(){var e=Object(h.a)(Object(l.a)().mark((function e(t,r){var n,a,i;return Object(l.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this._buildArgs([t.toBase58()],r),e.next=3,this._rpcRequest("getTokenLargestAccounts",n);case 3:if(a=e.sent,!("error"in(i=z(a,tr)))){e.next=7;break}throw new yt(i.error,"failed to get token largest accounts");case 7:return e.abrupt("return",i.result);case 8:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"getAccountInfoAndContext",value:function(){var e=Object(h.a)(Object(l.a)().mark((function e(t,r){var n,a,i,o,s,u;return Object(l.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Bt(r),a=n.commitment,i=n.config,o=this._buildArgs([t.toBase58()],a,"base64",i),e.next=4,this._rpcRequest("getAccountInfo",o);case 4:if(s=e.sent,!("error"in(u=z(s,_t(Z(or)))))){e.next=8;break}throw new yt(u.error,"failed to get info about account ".concat(t.toBase58()));case 8:return e.abrupt("return",u.result);case 9:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"getParsedAccountInfo",value:function(){var e=Object(h.a)(Object(l.a)().mark((function e(t,r){var n,a,i,o,s,u;return Object(l.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Bt(r),a=n.commitment,i=n.config,o=this._buildArgs([t.toBase58()],a,"jsonParsed",i),e.next=4,this._rpcRequest("getAccountInfo",o);case 4:if(s=e.sent,!("error"in(u=z(s,_t(Z(cr)))))){e.next=8;break}throw new yt(u.error,"failed to get info about account ".concat(t.toBase58()));case 8:return e.abrupt("return",u.result);case 9:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"getAccountInfo",value:function(){var e=Object(h.a)(Object(l.a)().mark((function e(t,r){var n;return Object(l.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.getAccountInfoAndContext(t,r);case 3:return n=e.sent,e.abrupt("return",n.value);case 7:throw e.prev=7,e.t0=e.catch(0),new Error("failed to get info about account "+t.toBase58()+": "+e.t0);case 10:case"end":return e.stop()}}),e,this,[[0,7]])})));return function(t,r){return e.apply(this,arguments)}}()},{key:"getMultipleParsedAccounts",value:function(){var e=Object(h.a)(Object(l.a)().mark((function e(t,r){var n,a,i,o,s,u,c;return Object(l.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Bt(r),a=n.commitment,i=n.config,o=t.map((function(e){return e.toBase58()})),s=this._buildArgs([o],a,"jsonParsed",i),e.next=5,this._rpcRequest("getMultipleAccounts",s);case 5:if(u=e.sent,!("error"in(c=z(u,_t(M(Z(cr))))))){e.next=9;break}throw new yt(c.error,"failed to get info for accounts ".concat(o));case 9:return e.abrupt("return",c.result);case 10:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"getMultipleAccountsInfoAndContext",value:function(){var e=Object(h.a)(Object(l.a)().mark((function e(t,r){var n,a,i,o,s,u,c;return Object(l.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Bt(r),a=n.commitment,i=n.config,o=t.map((function(e){return e.toBase58()})),s=this._buildArgs([o],a,"base64",i),e.next=5,this._rpcRequest("getMultipleAccounts",s);case 5:if(u=e.sent,!("error"in(c=z(u,_t(M(Z(or))))))){e.next=9;break}throw new yt(c.error,"failed to get info for accounts ".concat(o));case 9:return e.abrupt("return",c.result);case 10:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"getMultipleAccountsInfo",value:function(){var e=Object(h.a)(Object(l.a)().mark((function e(t,r){var n;return Object(l.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getMultipleAccountsInfoAndContext(t,r);case 2:return n=e.sent,e.abrupt("return",n.value);case 4:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"getStakeActivation",value:function(){var e=Object(h.a)(Object(l.a)().mark((function e(t,r,n){var a,i,s,u,c,f;return Object(l.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=Bt(r),i=a.commitment,s=a.config,u=this._buildArgs([t.toBase58()],i,void 0,Object(o.a)(Object(o.a)({},s),{},{epoch:null!=n?n:null===s||void 0===s?void 0:s.epoch})),e.next=4,this._rpcRequest("getStakeActivation",u);case 4:if(c=e.sent,!("error"in(f=z(c,At(lr))))){e.next=8;break}throw new yt(f.error,"failed to get Stake Activation ".concat(t.toBase58()));case 8:return e.abrupt("return",f.result);case 9:case"end":return e.stop()}}),e,this)})));return function(t,r,n){return e.apply(this,arguments)}}()},{key:"getProgramAccounts",value:function(){var e=Object(h.a)(Object(l.a)().mark((function e(t,r){var a,i,o,s,u,c,f,h,d,p;return Object(l.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=Bt(r),i=a.commitment,o=a.config,u=(s=o||{}).encoding,c=Object(n.a)(s,de),f=this._buildArgs([t.toBase58()],i,u||"base64",c),e.next=5,this._rpcRequest("getProgramAccounts",f);case 5:if(h=e.sent,d=M(sr),!("error"in(p=!0===c.withContext?z(h,_t(d)):z(h,At(d))))){e.next=10;break}throw new yt(p.error,"failed to get accounts owned by program ".concat(t.toBase58()));case 10:return e.abrupt("return",p.result);case 11:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"getParsedProgramAccounts",value:function(){var e=Object(h.a)(Object(l.a)().mark((function e(t,r){var n,a,i,o,s,u;return Object(l.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Bt(r),a=n.commitment,i=n.config,o=this._buildArgs([t.toBase58()],a,"jsonParsed",i),e.next=4,this._rpcRequest("getProgramAccounts",o);case 4:if(s=e.sent,!("error"in(u=z(s,At(M(fr)))))){e.next=8;break}throw new yt(u.error,"failed to get accounts owned by program ".concat(t.toBase58()));case 8:return e.abrupt("return",u.result);case 9:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"confirmTransaction",value:function(){var e=Object(h.a)(Object(l.a)().mark((function e(t,r){var n,a,i,o;return Object(l.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("string"!=typeof t){e.next=4;break}n=t,e.next=8;break;case 4:if(null===(a=(i=t).abortSignal)||void 0===a||!a.aborted){e.next=7;break}return e.abrupt("return",Promise.reject(i.abortSignal.reason));case 7:n=i.signature;case 8:e.prev=8,o=x.a.decode(n),e.next=15;break;case 12:throw e.prev=12,e.t0=e.catch(8),new Error("signature must be base58 encoded: "+n);case 15:if(qe(64===o.length,"signature has invalid length"),"string"!==typeof t){e.next=22;break}return e.next=19,this.confirmTransactionUsingLegacyTimeoutStrategy({commitment:r||this.commitment,signature:n});case 19:return e.abrupt("return",e.sent);case 22:if(!("lastValidBlockHeight"in t)){e.next=28;break}return e.next=25,this.confirmTransactionUsingBlockHeightExceedanceStrategy({commitment:r||this.commitment,strategy:t});case 25:return e.abrupt("return",e.sent);case 28:return e.next=30,this.confirmTransactionUsingDurableNonceStrategy({commitment:r||this.commitment,strategy:t});case 30:return e.abrupt("return",e.sent);case 31:case"end":return e.stop()}}),e,this,[[8,12]])})));return function(t,r){return e.apply(this,arguments)}}()},{key:"getCancellationPromise",value:function(e){return new Promise((function(t,r){null!=e&&(e.aborted?r(e.reason):e.addEventListener("abort",(function(){r(e.reason)})))}))}},{key:"getTransactionConfirmationPromise",value:function(e){var t,r,n=this,a=e.commitment,i=e.signature,o=!1;return{abortConfirmation:function(){r&&(r(),r=void 0),null!=t&&(n.removeSignatureListener(t),t=void 0)},confirmationPromise:new Promise((function(e,s){try{t=n.onSignature(i,(function(r,n){t=void 0;var a={context:n,value:r};e({__type:Ke.PROCESSED,response:a})}),a);var u=new Promise((function(e){null==t?e():r=n._onSubscriptionStateChange(t,(function(t){"subscribed"===t&&e()}))}));Object(h.a)(Object(l.a)().mark((function t(){var r,c,f;return Object(l.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,u;case 2:if(!o){t.next=4;break}return t.abrupt("return");case 4:return t.next=6,n.getSignatureStatus(i);case 6:if(r=t.sent,!o){t.next=9;break}return t.abrupt("return");case 9:if(null!=r){t.next=11;break}return t.abrupt("return");case 11:if(c=r.context,null!=(f=r.value)){t.next=14;break}return t.abrupt("return");case 14:if(null===f||void 0===f||!f.err){t.next=18;break}s(f.err),t.next=29;break;case 18:t.t0=a,t.next="confirmed"===t.t0||"single"===t.t0||"singleGossip"===t.t0?21:"finalized"===t.t0||"max"===t.t0||"root"===t.t0?24:("processed"===t.t0||t.t0,27);break;case 21:if("processed"!==f.confirmationStatus){t.next=23;break}return t.abrupt("return");case 23:return t.abrupt("break",27);case 24:if("processed"!==f.confirmationStatus&&"confirmed"!==f.confirmationStatus){t.next=26;break}return t.abrupt("return");case 26:return t.abrupt("break",27);case 27:o=!0,e({__type:Ke.PROCESSED,response:{context:c,value:f}});case 29:case"end":return t.stop()}}),t)})))()}catch(c){s(c)}}))}}},{key:"confirmTransactionUsingBlockHeightExceedanceStrategy",value:function(){var e=Object(h.a)(Object(l.a)().mark((function e(t){var r,n,a,i,o,s,u,c,f,d,p,v,b,y=this;return Object(l.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.commitment,n=t.strategy,a=n.abortSignal,i=n.lastValidBlockHeight,o=n.signature,s=!1,u=new Promise((function(e){var t=function(){var e=Object(h.a)(Object(l.a)().mark((function e(){var t;return Object(l.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,y.getBlockHeight(r);case 3:return t=e.sent,e.abrupt("return",t);case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",-1);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}();Object(h.a)(Object(l.a)().mark((function r(){var n;return Object(l.a)().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,t();case 2:if(n=r.sent,!s){r.next=5;break}return r.abrupt("return");case 5:if(!(n<=i)){r.next=17;break}return r.next=8,$e(1e3);case 8:if(!s){r.next=10;break}return r.abrupt("return");case 10:return r.next=12,t();case 12:if(n=r.sent,!s){r.next=15;break}return r.abrupt("return");case 15:r.next=5;break;case 17:e({__type:Ke.BLOCKHEIGHT_EXCEEDED});case 18:case"end":return r.stop()}}),r)})))()})),c=this.getTransactionConfirmationPromise({commitment:r,signature:o}),f=c.abortConfirmation,d=c.confirmationPromise,p=this.getCancellationPromise(a),e.prev=5,e.next=8,Promise.race([p,d,u]);case 8:if((b=e.sent).__type!==Ke.PROCESSED){e.next=13;break}v=b.response,e.next=14;break;case 13:throw new Ae(o);case 14:return e.prev=14,s=!0,f(),e.finish(14);case 18:return e.abrupt("return",v);case 19:case"end":return e.stop()}}),e,this,[[5,,14,18]])})));return function(t){return e.apply(this,arguments)}}()},{key:"confirmTransactionUsingDurableNonceStrategy",value:function(){var e=Object(h.a)(Object(l.a)().mark((function e(t){var r,n,a,i,o,s,u,c,f,d,p,v,b,y,g,m,w,k,x,O,S,E=this;return Object(l.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.commitment,n=t.strategy,a=n.abortSignal,i=n.minContextSlot,o=n.nonceAccountPubkey,s=n.nonceValue,u=n.signature,c=!1,f=new Promise((function(e){var t=s,n=null,a=function(){var e=Object(h.a)(Object(l.a)().mark((function e(){var a,s,u;return Object(l.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,E.getNonceAndContext(o,{commitment:r,minContextSlot:i});case 3:return a=e.sent,s=a.context,u=a.value,n=s.slot,e.abrupt("return",null===u||void 0===u?void 0:u.nonce);case 10:return e.prev=10,e.t0=e.catch(0),e.abrupt("return",t);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(){return e.apply(this,arguments)}}();Object(h.a)(Object(l.a)().mark((function r(){return Object(l.a)().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,a();case 2:if(t=r.sent,!c){r.next=5;break}return r.abrupt("return");case 5:if(s===t){r.next=9;break}return e({__type:Ke.NONCE_INVALID,slotInWhichNonceDidAdvance:n}),r.abrupt("return");case 9:return r.next=11,$e(2e3);case 11:if(!c){r.next=13;break}return r.abrupt("return");case 13:return r.next=15,a();case 15:if(t=r.sent,!c){r.next=18;break}return r.abrupt("return");case 18:r.next=5;break;case 20:case"end":return r.stop()}}),r)})))()})),d=this.getTransactionConfirmationPromise({commitment:r,signature:u}),p=d.abortConfirmation,v=d.confirmationPromise,b=this.getCancellationPromise(a),e.prev=5,e.next=8,Promise.race([b,v,f]);case 8:if((g=e.sent).__type!==Ke.PROCESSED){e.next=13;break}y=g.response,e.next=47;break;case 13:return e.next=16,this.getSignatureStatus(u);case 16:if(null!=(x=e.sent)){e.next=19;break}return e.abrupt("break",27);case 19:if(!(x.context.slot<(null!==(k=g.slotInWhichNonceDidAdvance)&&void 0!==k?k:i))){e.next=23;break}return e.next=22,$e(400);case 22:return e.abrupt("continue",13);case 23:return w=x,e.abrupt("break",27);case 27:if(null===(m=w)||void 0===m||!m.value){e.next=46;break}O=r||"finalized",S=w.value.confirmationStatus,e.t0=O,e.next="processed"===e.t0||"recent"===e.t0?33:"confirmed"===e.t0||"single"===e.t0||"singleGossip"===e.t0?36:"finalized"===e.t0||"max"===e.t0||"root"===e.t0?39:42;break;case 33:if("processed"===S||"confirmed"===S||"finalized"===S){e.next=35;break}throw new Pe(u);case 35:case 38:case 41:return e.abrupt("break",43);case 36:if("confirmed"===S||"finalized"===S){e.next=38;break}throw new Pe(u);case 39:if("finalized"===S){e.next=41;break}throw new Pe(u);case 42:case 43:y={context:w.context,value:{err:w.value.err}},e.next=47;break;case 46:throw new Pe(u);case 47:return e.prev=47,c=!0,p(),e.finish(47);case 51:return e.abrupt("return",y);case 52:case"end":return e.stop()}}),e,this,[[5,,47,51]])})));return function(t){return e.apply(this,arguments)}}()},{key:"confirmTransactionUsingLegacyTimeoutStrategy",value:function(){var e=Object(h.a)(Object(l.a)().mark((function e(t){var r,n,a,i,o,s,u,c,f,h=this;return Object(l.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.commitment,n=t.signature,i=new Promise((function(e){var t=h._confirmTransactionInitialTimeout||6e4;switch(r){case"processed":case"recent":case"single":case"confirmed":case"singleGossip":t=h._confirmTransactionInitialTimeout||3e4}a=setTimeout((function(){return e({__type:Ke.TIMED_OUT,timeoutMs:t})}),t)})),o=this.getTransactionConfirmationPromise({commitment:r,signature:n}),s=o.abortConfirmation,u=o.confirmationPromise,e.prev=3,e.next=6,Promise.race([u,i]);case 6:if((f=e.sent).__type!==Ke.PROCESSED){e.next=11;break}c=f.response,e.next=12;break;case 11:throw new _e(n,f.timeoutMs/1e3);case 12:return e.prev=12,clearTimeout(a),s(),e.finish(12);case 16:return e.abrupt("return",c);case 17:case"end":return e.stop()}}),e,this,[[3,,12,16]])})));return function(t){return e.apply(this,arguments)}}()},{key:"getClusterNodes",value:function(){var e=Object(h.a)(Object(l.a)().mark((function e(){var t,r;return Object(l.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._rpcRequest("getClusterNodes",[]);case 2:if(t=e.sent,!("error"in(r=z(t,At(M(Or)))))){e.next=6;break}throw new yt(r.error,"failed to get cluster nodes");case 6:return e.abrupt("return",r.result);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getVoteAccounts",value:function(){var e=Object(h.a)(Object(l.a)().mark((function e(t){var r,n,a;return Object(l.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=this._buildArgs([],t),e.next=3,this._rpcRequest("getVoteAccounts",r);case 3:if(n=e.sent,!("error"in(a=z(n,Er)))){e.next=7;break}throw new yt(a.error,"failed to get vote accounts");case 7:return e.abrupt("return",a.result);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getSlot",value:function(){var e=Object(h.a)(Object(l.a)().mark((function e(t){var r,n,a,i,o,s;return Object(l.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Bt(t),n=r.commitment,a=r.config,i=this._buildArgs([],n,void 0,a),e.next=4,this._rpcRequest("getSlot",i);case 4:if(o=e.sent,!("error"in(s=z(o,At(J()))))){e.next=8;break}throw new yt(s.error,"failed to get slot");case 8:return e.abrupt("return",s.result);case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getSlotLeader",value:function(){var e=Object(h.a)(Object(l.a)().mark((function e(t){var r,n,a,i,o,s;return Object(l.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Bt(t),n=r.commitment,a=r.config,i=this._buildArgs([],n,void 0,a),e.next=4,this._rpcRequest("getSlotLeader",i);case 4:if(o=e.sent,!("error"in(s=z(o,At($()))))){e.next=8;break}throw new yt(s.error,"failed to get slot leader");case 8:return e.abrupt("return",s.result);case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getSlotLeaders",value:function(){var e=Object(h.a)(Object(l.a)().mark((function e(t,r){var n,a,i;return Object(l.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=[t,r],e.next=3,this._rpcRequest("getSlotLeaders",n);case 3:if(a=e.sent,!("error"in(i=z(a,At(M(Ot)))))){e.next=7;break}throw new yt(i.error,"failed to get slot leaders");case 7:return e.abrupt("return",i.result);case 8:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"getSignatureStatus",value:function(){var e=Object(h.a)(Object(l.a)().mark((function e(t,r){var n,a,i,o;return Object(l.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getSignatureStatuses([t],r);case 2:return n=e.sent,a=n.context,qe(1===(i=n.value).length),o=i[0],e.abrupt("return",{context:a,value:o});case 8:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"getSignatureStatuses",value:function(){var e=Object(h.a)(Object(l.a)().mark((function e(t,r){var n,a,i;return Object(l.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=[t],r&&n.push(r),e.next=4,this._rpcRequest("getSignatureStatuses",n);case 4:if(a=e.sent,!("error"in(i=z(a,Ir)))){e.next=8;break}throw new yt(i.error,"failed to get signature status");case 8:return e.abrupt("return",i.result);case 9:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"getTransactionCount",value:function(){var e=Object(h.a)(Object(l.a)().mark((function e(t){var r,n,a,i,o,s;return Object(l.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Bt(t),n=r.commitment,a=r.config,i=this._buildArgs([],n,void 0,a),e.next=4,this._rpcRequest("getTransactionCount",i);case 4:if(o=e.sent,!("error"in(s=z(o,At(J()))))){e.next=8;break}throw new yt(s.error,"failed to get transaction count");case 8:return e.abrupt("return",s.result);case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getTotalSupply",value:function(){var e=Object(h.a)(Object(l.a)().mark((function e(t){var r;return Object(l.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getSupply({commitment:t,excludeNonCirculatingAccountsList:!0});case 2:return r=e.sent,e.abrupt("return",r.value.total);case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getInflationGovernor",value:function(){var e=Object(h.a)(Object(l.a)().mark((function e(t){var r,n,a;return Object(l.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=this._buildArgs([],t),e.next=3,this._rpcRequest("getInflationGovernor",r);case 3:if(n=e.sent,!("error"in(a=z(n,Vt)))){e.next=7;break}throw new yt(a.error,"failed to get inflation");case 7:return e.abrupt("return",a.result);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getInflationReward",value:function(){var e=Object(h.a)(Object(l.a)().mark((function e(t,r,n){var a,i,s,u,c,f;return Object(l.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=Bt(n),i=a.commitment,s=a.config,u=this._buildArgs([t.map((function(e){return e.toBase58()}))],i,void 0,Object(o.a)(Object(o.a)({},s),{},{epoch:null!=r?r:null===s||void 0===s?void 0:s.epoch})),e.next=4,this._rpcRequest("getInflationReward",u);case 4:if(c=e.sent,!("error"in(f=z(c,Lt)))){e.next=8;break}throw new yt(f.error,"failed to get inflation reward");case 8:return e.abrupt("return",f.result);case 9:case"end":return e.stop()}}),e,this)})));return function(t,r,n){return e.apply(this,arguments)}}()},{key:"getInflationRate",value:function(){var e=Object(h.a)(Object(l.a)().mark((function e(){var t,r;return Object(l.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._rpcRequest("getInflationRate",[]);case 2:if(t=e.sent,!("error"in(r=z(t,Gt)))){e.next=6;break}throw new yt(r.error,"failed to get inflation rate");case 6:return e.abrupt("return",r.result);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getEpochInfo",value:function(){var e=Object(h.a)(Object(l.a)().mark((function e(t){var r,n,a,i,o,s;return Object(l.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Bt(t),n=r.commitment,a=r.config,i=this._buildArgs([],n,void 0,a),e.next=4,this._rpcRequest("getEpochInfo",i);case 4:if(o=e.sent,!("error"in(s=z(o,Jt)))){e.next=8;break}throw new yt(s.error,"failed to get epoch info");case 8:return e.abrupt("return",s.result);case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getEpochSchedule",value:function(){var e=Object(h.a)(Object(l.a)().mark((function e(){var t,r,n;return Object(l.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._rpcRequest("getEpochSchedule",[]);case 2:if(t=e.sent,!("error"in(r=z(t,Yt)))){e.next=6;break}throw new yt(r.error,"failed to get epoch schedule");case 6:return n=r.result,e.abrupt("return",new vt(n.slotsPerEpoch,n.leaderScheduleSlotOffset,n.warmup,n.firstNormalEpoch,n.firstNormalSlot));case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getLeaderSchedule",value:function(){var e=Object(h.a)(Object(l.a)().mark((function e(){var t,r;return Object(l.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._rpcRequest("getLeaderSchedule",[]);case 2:if(t=e.sent,!("error"in(r=z(t,Xt)))){e.next=6;break}throw new yt(r.error,"failed to get leader schedule");case 6:return e.abrupt("return",r.result);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getMinimumBalanceForRentExemption",value:function(){var e=Object(h.a)(Object(l.a)().mark((function e(t,r){var n,a,i;return Object(l.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this._buildArgs([t],r),e.next=3,this._rpcRequest("getMinimumBalanceForRentExemption",n);case 3:if(a=e.sent,!("error"in(i=z(a,Ar)))){e.next=8;break}return console.warn("Unable to fetch minimum balance for rent exemption"),e.abrupt("return",0);case 8:return e.abrupt("return",i.result);case 9:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"getRecentBlockhashAndContext",value:function(){var e=Object(h.a)(Object(l.a)().mark((function e(t){var r,n,a;return Object(l.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=this._buildArgs([],t),e.next=3,this._rpcRequest("getRecentBlockhash",r);case 3:if(n=e.sent,!("error"in(a=z(n,en)))){e.next=7;break}throw new yt(a.error,"failed to get recent blockhash");case 7:return e.abrupt("return",a.result);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getRecentPerformanceSamples",value:function(){var e=Object(h.a)(Object(l.a)().mark((function e(t){var r,n;return Object(l.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._rpcRequest("getRecentPerformanceSamples",t?[t]:[]);case 2:if(r=e.sent,!("error"in(n=z(r,nn)))){e.next=6;break}throw new yt(n.error,"failed to get recent performance samples");case 6:return e.abrupt("return",n.result);case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getFeeCalculatorForBlockhash",value:function(){var e=Object(h.a)(Object(l.a)().mark((function e(t,r){var n,a,i,o,s,u;return Object(l.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this._buildArgs([t],r),e.next=3,this._rpcRequest("getFeeCalculatorForBlockhash",n);case 3:if(a=e.sent,!("error"in(i=z(a,an)))){e.next=7;break}throw new yt(i.error,"failed to get fee calculator");case 7:return o=i.result,s=o.context,u=o.value,e.abrupt("return",{context:s,value:null!==u?u.feeCalculator:null});case 9:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"getFeeForMessage",value:function(){var e=Object(h.a)(Object(l.a)().mark((function e(t,r){var n,a,i,o;return Object(l.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=xe(t.serialize()).toString("base64"),a=this._buildArgs([n],r),e.next=4,this._rpcRequest("getFeeForMessage",a);case 4:if(i=e.sent,!("error"in(o=z(i,_t(Z(J())))))){e.next=8;break}throw new yt(o.error,"failed to get fee for message");case 8:if(null!==o.result){e.next=10;break}throw new Error("invalid blockhash");case 10:return e.abrupt("return",o.result);case 11:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"getRecentPrioritizationFees",value:function(){var e=Object(h.a)(Object(l.a)().mark((function e(t){var r,n,a,i,o;return Object(l.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=null===t||void 0===t||null===(r=t.lockedWritableAccounts)||void 0===r?void 0:r.map((function(e){return e.toBase58()})),a=null!==n&&void 0!==n&&n.length?[n]:[],e.next=4,this._rpcRequest("getRecentPrioritizationFees",a);case 4:if(i=e.sent,!("error"in(o=z(i,Zt)))){e.next=8;break}throw new yt(o.error,"failed to get recent prioritization fees");case 8:return e.abrupt("return",o.result);case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getRecentBlockhash",value:function(){var e=Object(h.a)(Object(l.a)().mark((function e(t){var r;return Object(l.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.getRecentBlockhashAndContext(t);case 3:return r=e.sent,e.abrupt("return",r.value);case 7:throw e.prev=7,e.t0=e.catch(0),new Error("failed to get recent blockhash: "+e.t0);case 10:case"end":return e.stop()}}),e,this,[[0,7]])})));return function(t){return e.apply(this,arguments)}}()},{key:"getLatestBlockhash",value:function(){var e=Object(h.a)(Object(l.a)().mark((function e(t){var r;return Object(l.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.getLatestBlockhashAndContext(t);case 3:return r=e.sent,e.abrupt("return",r.value);case 7:throw e.prev=7,e.t0=e.catch(0),new Error("failed to get recent blockhash: "+e.t0);case 10:case"end":return e.stop()}}),e,this,[[0,7]])})));return function(t){return e.apply(this,arguments)}}()},{key:"getLatestBlockhashAndContext",value:function(){var e=Object(h.a)(Object(l.a)().mark((function e(t){var r,n,a,i,o,s;return Object(l.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Bt(t),n=r.commitment,a=r.config,i=this._buildArgs([],n,void 0,a),e.next=4,this._rpcRequest("getLatestBlockhash",i);case 4:if(o=e.sent,!("error"in(s=z(o,tn)))){e.next=8;break}throw new yt(s.error,"failed to get latest blockhash");case 8:return e.abrupt("return",s.result);case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"isBlockhashValid",value:function(){var e=Object(h.a)(Object(l.a)().mark((function e(t,r){var n,a,i,o,s,u;return Object(l.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Bt(r),a=n.commitment,i=n.config,o=this._buildArgs([t],a,void 0,i),e.next=4,this._rpcRequest("isBlockhashValid",o);case 4:if(s=e.sent,!("error"in(u=z(s,rn)))){e.next=8;break}throw new yt(u.error,"failed to determine if the blockhash `"+t+"`is valid");case 8:return e.abrupt("return",u.result);case 9:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"getVersion",value:function(){var e=Object(h.a)(Object(l.a)().mark((function e(){var t,r;return Object(l.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._rpcRequest("getVersion",[]);case 2:if(t=e.sent,!("error"in(r=z(t,At(Mt))))){e.next=6;break}throw new yt(r.error,"failed to get version");case 6:return e.abrupt("return",r.result);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getGenesisHash",value:function(){var e=Object(h.a)(Object(l.a)().mark((function e(){var t,r;return Object(l.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._rpcRequest("getGenesisHash",[]);case 2:if(t=e.sent,!("error"in(r=z(t,At($()))))){e.next=6;break}throw new yt(r.error,"failed to get genesis hash");case 6:return e.abrupt("return",r.result);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getBlock",value:function(){var e=Object(h.a)(Object(l.a)().mark((function e(t,r){var n,a,i,s,u,c,f,h,d;return Object(l.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Bt(r),a=n.commitment,i=n.config,s=this._buildArgsAtLeastConfirmed([t],a,void 0,i),e.next=4,this._rpcRequest("getBlock",s);case 4:u=e.sent,e.prev=5,e.t0=null===i||void 0===i?void 0:i.transactionDetails,e.next="accounts"===e.t0?9:"none"===e.t0?13:17;break;case 9:if(!("error"in(c=z(u,Vr)))){e.next=12;break}throw c.error;case 12:return e.abrupt("return",c.result);case 13:if(!("error"in(f=z(u,Fr)))){e.next=16;break}throw f.error;case 16:return e.abrupt("return",f.result);case 17:if(!("error"in(h=z(u,Dr)))){e.next=20;break}throw h.error;case 20:return d=h.result,e.abrupt("return",d?Object(o.a)(Object(o.a)({},d),{},{transactions:d.transactions.map((function(e){var t=e.transaction,r=e.meta,n=e.version;return{meta:r,transaction:Object(o.a)(Object(o.a)({},t),{},{message:Tt(n,t.message)}),version:n}}))}):null);case 22:e.next=27;break;case 24:throw e.prev=24,e.t1=e.catch(5),new yt(e.t1,"failed to get confirmed block");case 27:case"end":return e.stop()}}),e,this,[[5,24]])})));return function(t,r){return e.apply(this,arguments)}}()},{key:"getParsedBlock",value:function(){var e=Object(h.a)(Object(l.a)().mark((function e(t,r){var n,a,i,o,s,u,c,f;return Object(l.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Bt(r),a=n.commitment,i=n.config,o=this._buildArgsAtLeastConfirmed([t],a,"jsonParsed",i),e.next=4,this._rpcRequest("getBlock",o);case 4:s=e.sent,e.prev=5,e.t0=null===i||void 0===i?void 0:i.transactionDetails,e.next="accounts"===e.t0?9:"none"===e.t0?13:17;break;case 9:if(!("error"in(u=z(s,Zr)))){e.next=12;break}throw u.error;case 12:return e.abrupt("return",u.result);case 13:if(!("error"in(c=z(s,Jr)))){e.next=16;break}throw c.error;case 16:return e.abrupt("return",c.result);case 17:if(!("error"in(f=z(s,Gr)))){e.next=20;break}throw f.error;case 20:return e.abrupt("return",f.result);case 21:e.next=26;break;case 23:throw e.prev=23,e.t1=e.catch(5),new yt(e.t1,"failed to get block");case 26:case"end":return e.stop()}}),e,this,[[5,23]])})));return function(t,r){return e.apply(this,arguments)}}()},{key:"getBlockProduction",value:function(){var e=Object(h.a)(Object(l.a)().mark((function e(t){var r,a,i,o,s,u,c;return Object(l.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"string"===typeof t?a=t:t&&(i=t.commitment,o=Object(n.a)(t,pe),a=i,r=o),s=this._buildArgs([],a,"base64",r),e.next=4,this._rpcRequest("getBlockProduction",s);case 4:if(u=e.sent,!("error"in(c=z(u,Ft)))){e.next=8;break}throw new yt(c.error,"failed to get block production information");case 8:return e.abrupt("return",c.result);case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getTransaction",value:function(){var e=Object(h.a)(Object(l.a)().mark((function e(t,r){var n,a,i,s,u,c,f;return Object(l.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Bt(r),a=n.commitment,i=n.config,s=this._buildArgsAtLeastConfirmed([t],a,void 0,i),e.next=4,this._rpcRequest("getTransaction",s);case 4:if(u=e.sent,!("error"in(c=z(u,$r)))){e.next=8;break}throw new yt(c.error,"failed to get transaction");case 8:if(f=c.result){e.next=11;break}return e.abrupt("return",f);case 11:return e.abrupt("return",Object(o.a)(Object(o.a)({},f),{},{transaction:Object(o.a)(Object(o.a)({},f.transaction),{},{message:Tt(f.version,f.transaction.message)})}));case 12:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"getParsedTransaction",value:function(){var e=Object(h.a)(Object(l.a)().mark((function e(t,r){var n,a,i,o,s,u;return Object(l.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Bt(r),a=n.commitment,i=n.config,o=this._buildArgsAtLeastConfirmed([t],a,"jsonParsed",i),e.next=4,this._rpcRequest("getTransaction",o);case 4:if(s=e.sent,!("error"in(u=z(s,Qr)))){e.next=8;break}throw new yt(u.error,"failed to get transaction");case 8:return e.abrupt("return",u.result);case 9:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"getParsedTransactions",value:function(){var e=Object(h.a)(Object(l.a)().mark((function e(t,r){var n,a,i,o,s,u,c=this;return Object(l.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Bt(r),a=n.commitment,i=n.config,o=t.map((function(e){return{methodName:"getTransaction",args:c._buildArgsAtLeastConfirmed([e],a,"jsonParsed",i)}})),e.next=4,this._rpcBatchRequest(o);case 4:return s=e.sent,u=s.map((function(e){var t=z(e,Qr);if("error"in t)throw new yt(t.error,"failed to get transactions");return t.result})),e.abrupt("return",u);case 7:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"getTransactions",value:function(){var e=Object(h.a)(Object(l.a)().mark((function e(t,r){var n,a,i,s,u,c,f=this;return Object(l.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Bt(r),a=n.commitment,i=n.config,s=t.map((function(e){return{methodName:"getTransaction",args:f._buildArgsAtLeastConfirmed([e],a,void 0,i)}})),e.next=4,this._rpcBatchRequest(s);case 4:return u=e.sent,c=u.map((function(e){var t=z(e,$r);if("error"in t)throw new yt(t.error,"failed to get transactions");var r=t.result;return r?Object(o.a)(Object(o.a)({},r),{},{transaction:Object(o.a)(Object(o.a)({},r.transaction),{},{message:Tt(r.version,r.transaction.message)})}):r})),e.abrupt("return",c);case 7:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"getConfirmedBlock",value:function(){var e=Object(h.a)(Object(l.a)().mark((function e(t,r){var n,a,i,s,u;return Object(l.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this._buildArgsAtLeastConfirmed([t],r),e.next=3,this._rpcRequest("getConfirmedBlock",n);case 3:if(a=e.sent,!("error"in(i=z(a,Yr)))){e.next=7;break}throw new yt(i.error,"failed to get confirmed block");case 7:if(s=i.result){e.next=10;break}throw new Error("Confirmed block "+t+" not found");case 10:return u=Object(o.a)(Object(o.a)({},s),{},{transactions:s.transactions.map((function(e){var t=e.transaction,r=e.meta,n=new We(t.message);return{meta:r,transaction:Object(o.a)(Object(o.a)({},t),{},{message:n})}}))}),e.abrupt("return",Object(o.a)(Object(o.a)({},u),{},{transactions:u.transactions.map((function(e){var t=e.transaction;return{meta:e.meta,transaction:Fe.populate(t.message,t.signatures)}}))}));case 12:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"getBlocks",value:function(){var e=Object(h.a)(Object(l.a)().mark((function e(t,r,n){var a,i,o;return Object(l.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=this._buildArgsAtLeastConfirmed(void 0!==r?[t,r]:[t],n),e.next=3,this._rpcRequest("getBlocks",a);case 3:if(i=e.sent,!("error"in(o=z(i,At(M(J())))))){e.next=7;break}throw new yt(o.error,"failed to get blocks");case 7:return e.abrupt("return",o.result);case 8:case"end":return e.stop()}}),e,this)})));return function(t,r,n){return e.apply(this,arguments)}}()},{key:"getBlockSignatures",value:function(){var e=Object(h.a)(Object(l.a)().mark((function e(t,r){var n,a,i,o;return Object(l.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this._buildArgsAtLeastConfirmed([t],r,void 0,{transactionDetails:"signatures",rewards:!1}),e.next=3,this._rpcRequest("getBlock",n);case 3:if(a=e.sent,!("error"in(i=z(a,Xr)))){e.next=7;break}throw new yt(i.error,"failed to get block");case 7:if(o=i.result){e.next=10;break}throw new Error("Block "+t+" not found");case 10:return e.abrupt("return",o);case 11:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"getConfirmedBlockSignatures",value:function(){var e=Object(h.a)(Object(l.a)().mark((function e(t,r){var n,a,i,o;return Object(l.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this._buildArgsAtLeastConfirmed([t],r,void 0,{transactionDetails:"signatures",rewards:!1}),e.next=3,this._rpcRequest("getConfirmedBlock",n);case 3:if(a=e.sent,!("error"in(i=z(a,Xr)))){e.next=7;break}throw new yt(i.error,"failed to get confirmed block");case 7:if(o=i.result){e.next=10;break}throw new Error("Confirmed block "+t+" not found");case 10:return e.abrupt("return",o);case 11:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"getConfirmedTransaction",value:function(){var e=Object(h.a)(Object(l.a)().mark((function e(t,r){var n,a,i,s,u,c;return Object(l.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this._buildArgsAtLeastConfirmed([t],r),e.next=3,this._rpcRequest("getConfirmedTransaction",n);case 3:if(a=e.sent,!("error"in(i=z(a,$r)))){e.next=7;break}throw new yt(i.error,"failed to get transaction");case 7:if(s=i.result){e.next=10;break}return e.abrupt("return",s);case 10:return u=new We(s.transaction.message),c=s.transaction.signatures,e.abrupt("return",Object(o.a)(Object(o.a)({},s),{},{transaction:Fe.populate(u,c)}));case 13:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"getParsedConfirmedTransaction",value:function(){var e=Object(h.a)(Object(l.a)().mark((function e(t,r){var n,a,i;return Object(l.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this._buildArgsAtLeastConfirmed([t],r,"jsonParsed"),e.next=3,this._rpcRequest("getConfirmedTransaction",n);case 3:if(a=e.sent,!("error"in(i=z(a,Qr)))){e.next=7;break}throw new yt(i.error,"failed to get confirmed transaction");case 7:return e.abrupt("return",i.result);case 8:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"getParsedConfirmedTransactions",value:function(){var e=Object(h.a)(Object(l.a)().mark((function e(t,r){var n,a,i,o=this;return Object(l.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.map((function(e){return{methodName:"getConfirmedTransaction",args:o._buildArgsAtLeastConfirmed([e],r,"jsonParsed")}})),e.next=3,this._rpcBatchRequest(n);case 3:return a=e.sent,i=a.map((function(e){var t=z(e,Qr);if("error"in t)throw new yt(t.error,"failed to get confirmed transactions");return t.result})),e.abrupt("return",i);case 6:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"getConfirmedSignaturesForAddress",value:function(){var e=Object(h.a)(Object(l.a)().mark((function e(t,r,n){var a,i,o,s,u,c;return Object(l.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={},e.next=3,this.getFirstAvailableBlock();case 3:i=e.sent;case 4:if("until"in a){e.next=24;break}if(!(--r<=0||r<i)){e.next=8;break}return e.abrupt("break",24);case 8:return e.prev=8,e.next=11,this.getConfirmedBlockSignatures(r,"finalized");case 11:(o=e.sent).signatures.length>0&&(a.until=o.signatures[o.signatures.length-1].toString()),e.next=22;break;case 15:if(e.prev=15,e.t0=e.catch(8),!(e.t0 instanceof Error&&e.t0.message.includes("skipped"))){e.next=21;break}return e.abrupt("continue",4);case 21:throw e.t0;case 22:e.next=4;break;case 24:return e.next=26,this.getSlot("finalized");case 26:s=e.sent;case 27:if("before"in a){e.next=47;break}if(!(++n>s)){e.next=31;break}return e.abrupt("break",47);case 31:return e.prev=31,e.next=34,this.getConfirmedBlockSignatures(n);case 34:(u=e.sent).signatures.length>0&&(a.before=u.signatures[u.signatures.length-1].toString()),e.next=45;break;case 38:if(e.prev=38,e.t1=e.catch(31),!(e.t1 instanceof Error&&e.t1.message.includes("skipped"))){e.next=44;break}return e.abrupt("continue",27);case 44:throw e.t1;case 45:e.next=27;break;case 47:return e.next=49,this.getConfirmedSignaturesForAddress2(t,a);case 49:return c=e.sent,e.abrupt("return",c.map((function(e){return e.signature})));case 51:case"end":return e.stop()}}),e,this,[[8,15],[31,38]])})));return function(t,r,n){return e.apply(this,arguments)}}()},{key:"getConfirmedSignaturesForAddress2",value:function(){var e=Object(h.a)(Object(l.a)().mark((function e(t,r,n){var a,i,o;return Object(l.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=this._buildArgsAtLeastConfirmed([t.toBase58()],n,void 0,r),e.next=3,this._rpcRequest("getConfirmedSignaturesForAddress2",a);case 3:if(i=e.sent,!("error"in(o=z(i,hr)))){e.next=7;break}throw new yt(o.error,"failed to get confirmed signatures for address");case 7:return e.abrupt("return",o.result);case 8:case"end":return e.stop()}}),e,this)})));return function(t,r,n){return e.apply(this,arguments)}}()},{key:"getSignaturesForAddress",value:function(){var e=Object(h.a)(Object(l.a)().mark((function e(t,r,n){var a,i,o;return Object(l.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=this._buildArgsAtLeastConfirmed([t.toBase58()],n,void 0,r),e.next=3,this._rpcRequest("getSignaturesForAddress",a);case 3:if(i=e.sent,!("error"in(o=z(i,dr)))){e.next=7;break}throw new yt(o.error,"failed to get signatures for address");case 7:return e.abrupt("return",o.result);case 8:case"end":return e.stop()}}),e,this)})));return function(t,r,n){return e.apply(this,arguments)}}()},{key:"getAddressLookupTable",value:function(){var e=Object(h.a)(Object(l.a)().mark((function e(t,r){var n,a,i,o;return Object(l.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getAccountInfoAndContext(t,r);case 2:return n=e.sent,a=n.context,i=n.value,o=null,null!==i&&(o=new wt({key:t,state:wt.deserialize(i.data)})),e.abrupt("return",{context:a,value:o});case 8:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"getNonceAndContext",value:function(){var e=Object(h.a)(Object(l.a)().mark((function e(t,r){var n,a,i,o;return Object(l.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getAccountInfoAndContext(t,r);case 2:return n=e.sent,a=n.context,i=n.value,o=null,null!==i&&(o=at.fromAccountData(i.data)),e.abrupt("return",{context:a,value:o});case 8:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"getNonce",value:function(){var e=Object(h.a)(Object(l.a)().mark((function e(t,r){return Object(l.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getNonceAndContext(t,r).then((function(e){return e.value})).catch((function(e){throw new Error("failed to get nonce for account "+t.toBase58()+": "+e)}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"requestAirdrop",value:function(){var e=Object(h.a)(Object(l.a)().mark((function e(t,r){var n,a;return Object(l.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._rpcRequest("requestAirdrop",[t.toBase58(),r]);case 2:if(n=e.sent,!("error"in(a=z(n,on)))){e.next=6;break}throw new yt(a.error,"airdrop to ".concat(t.toBase58()," failed"));case 6:return e.abrupt("return",a.result);case 7:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"_blockhashWithExpiryBlockHeight",value:function(){var e=Object(h.a)(Object(l.a)().mark((function e(t){var r,n;return Object(l.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=10;break}case 1:if(!this._pollingBlockhash){e.next=6;break}return e.next=4,$e(100);case 4:e.next=1;break;case 6:if(r=Date.now()-this._blockhashInfo.lastFetch,n=r>=3e4,null===this._blockhashInfo.latestBlockhash||n){e.next=10;break}return e.abrupt("return",this._blockhashInfo.latestBlockhash);case 10:return e.next=12,this._pollNewBlockhash();case 12:return e.abrupt("return",e.sent);case 13:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_pollNewBlockhash",value:function(){var e=Object(h.a)(Object(l.a)().mark((function e(){var t,r,n,a,i;return Object(l.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this._pollingBlockhash=!0,e.prev=1,t=Date.now(),r=this._blockhashInfo.latestBlockhash,n=r?r.blockhash:null,a=0;case 6:if(!(a<50)){e.next=18;break}return e.next=9,this.getLatestBlockhash("finalized");case 9:if(i=e.sent,n===i.blockhash){e.next=13;break}return this._blockhashInfo={latestBlockhash:i,lastFetch:Date.now(),transactionSignatures:[],simulatedSignatures:[]},e.abrupt("return",i);case 13:return e.next=15,$e(200);case 15:a++,e.next=6;break;case 18:throw new Error("Unable to obtain a new blockhash after ".concat(Date.now()-t,"ms"));case 19:return e.prev=19,this._pollingBlockhash=!1,e.finish(19);case 22:case"end":return e.stop()}}),e,this,[[1,,19,22]])})));return function(){return e.apply(this,arguments)}}()},{key:"getStakeMinimumDelegation",value:function(){var e=Object(h.a)(Object(l.a)().mark((function e(t){var r,n,a,i,o,s;return Object(l.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Bt(t),n=r.commitment,a=r.config,i=this._buildArgs([],n,"base64",a),e.next=4,this._rpcRequest("getStakeMinimumDelegation",i);case 4:if(o=e.sent,!("error"in(s=z(o,_t(J()))))){e.next=8;break}throw new yt(s.error,"failed to get stake minimum delegation");case 8:return e.abrupt("return",s.result);case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"simulateTransaction",value:function(){var e=Object(h.a)(Object(l.a)().mark((function e(t,r,n){var a,i,o,s,c,f,h,d,p,v,b,g,m,w,k,x,O,S,E,B,j,I,A,_,P,T;return Object(l.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!("message"in t)){e.next=17;break}if(a=t.serialize(),i=y.Buffer.from(a).toString("base64"),!Array.isArray(r)&&void 0===n){e.next=6;break}throw new Error("Invalid arguments");case 6:return(o=r||{}).encoding="base64","commitment"in o||(o.commitment=this.commitment),s=[i,o],e.next=12,this._rpcRequest("simulateTransaction",s);case 12:if(c=e.sent,!("error"in(f=z(c,Dt)))){e.next=16;break}throw new Error("failed to simulate transaction: "+f.error.message);case 16:return e.abrupt("return",f.result);case 17:if(t instanceof Fe?(d=t,(h=new Fe).feePayer=d.feePayer,h.instructions=t.instructions,h.nonceInfo=d.nonceInfo,h.signatures=d.signatures):(h=Fe.populate(t))._message=h._json=void 0,void 0===r||Array.isArray(r)){e.next=20;break}throw new Error("Invalid arguments");case 20:if(p=r,!h.nonceInfo||!p){e.next=25;break}(v=h).sign.apply(v,Object(u.a)(p)),e.next=45;break;case 25:b=this._disableBlockhashCaching;case 26:return e.next=28,this._blockhashWithExpiryBlockHeight(b);case 28:if(m=e.sent,h.lastValidBlockHeight=m.lastValidBlockHeight,h.recentBlockhash=m.blockhash,p){e.next=33;break}return e.abrupt("break",45);case 33:if((g=h).sign.apply(g,Object(u.a)(p)),h.signature){e.next=36;break}throw new Error("!signature");case 36:if(w=h.signature.toString("base64"),this._blockhashInfo.simulatedSignatures.includes(w)||this._blockhashInfo.transactionSignatures.includes(w)){e.next=42;break}return this._blockhashInfo.simulatedSignatures.push(w),e.abrupt("break",45);case 42:b=!0;case 43:e.next=26;break;case 45:return k=h._compile(),x=k.serialize(),O=h._serialize(x),S=O.toString("base64"),E={encoding:"base64",commitment:this.commitment},n&&(B=(Array.isArray(n)?n:k.nonProgramIds()).map((function(e){return e.toBase58()})),E.accounts={encoding:"base64",addresses:B}),p&&(E.sigVerify=!0),j=[S,E],e.next=55,this._rpcRequest("simulateTransaction",j);case 55:if(I=e.sent,!("error"in(A=z(I,Dt)))){e.next=60;break}throw"data"in A.error&&(_=A.error.data.logs)&&Array.isArray(_)&&(T=(P="\n    ")+_.join(P),console.error(A.error.message,T)),new bt("failed to simulate transaction: "+A.error.message,_);case 60:return e.abrupt("return",A.result);case 61:case"end":return e.stop()}}),e,this)})));return function(t,r,n){return e.apply(this,arguments)}}()},{key:"sendTransaction",value:function(){var e=Object(h.a)(Object(l.a)().mark((function e(t,r,n){var a,i,o,s,c,f;return Object(l.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!("version"in t)){e.next=7;break}if(!r||!Array.isArray(r)){e.next=3;break}throw new Error("Invalid arguments");case 3:return a=t.serialize(),e.next=6,this.sendRawTransaction(a,r);case 6:return e.abrupt("return",e.sent);case 7:if(void 0!==r&&Array.isArray(r)){e.next=9;break}throw new Error("Invalid arguments");case 9:if(i=r,!t.nonceInfo){e.next=14;break}t.sign.apply(t,Object(u.a)(i)),e.next=32;break;case 14:o=this._disableBlockhashCaching;case 15:return e.next=17,this._blockhashWithExpiryBlockHeight(o);case 17:if(s=e.sent,t.lastValidBlockHeight=s.lastValidBlockHeight,t.recentBlockhash=s.blockhash,t.sign.apply(t,Object(u.a)(i)),t.signature){e.next=23;break}throw new Error("!signature");case 23:if(c=t.signature.toString("base64"),this._blockhashInfo.transactionSignatures.includes(c)){e.next=29;break}return this._blockhashInfo.transactionSignatures.push(c),e.abrupt("break",32);case 29:o=!0;case 30:e.next=15;break;case 32:return f=t.serialize(),e.next=35,this.sendRawTransaction(f,n);case 35:return e.abrupt("return",e.sent);case 36:case"end":return e.stop()}}),e,this)})));return function(t,r,n){return e.apply(this,arguments)}}()},{key:"sendRawTransaction",value:function(){var e=Object(h.a)(Object(l.a)().mark((function e(t,r){var n,a;return Object(l.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=xe(t).toString("base64"),e.next=3,this.sendEncodedTransaction(n,r);case 3:return a=e.sent,e.abrupt("return",a);case 5:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"sendEncodedTransaction",value:function(){var e=Object(h.a)(Object(l.a)().mark((function e(t,r){var n,a,i,o,s,u,c;return Object(l.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={encoding:"base64"},a=r&&r.skipPreflight,i=r&&r.preflightCommitment||this.commitment,r&&null!=r.maxRetries&&(n.maxRetries=r.maxRetries),r&&null!=r.minContextSlot&&(n.minContextSlot=r.minContextSlot),a&&(n.skipPreflight=a),i&&(n.preflightCommitment=i),o=[t,n],e.next=10,this._rpcRequest("sendTransaction",o);case 10:if(s=e.sent,!("error"in(u=z(s,sn)))){e.next=15;break}throw"data"in u.error&&(c=u.error.data.logs),new bt("failed to send transaction: "+u.error.message,c);case 15:return e.abrupt("return",u.result);case 16:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"_wsOnOpen",value:function(){var e=this;this._rpcWebSocketConnected=!0,this._rpcWebSocketHeartbeat=setInterval((function(){Object(h.a)(Object(l.a)().mark((function t(){return Object(l.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e._rpcWebSocket.notify("ping");case 3:t.next=7;break;case 5:t.prev=5,t.t0=t.catch(0);case 7:case"end":return t.stop()}}),t,null,[[0,5]])})))()}),5e3),this._updateSubscriptions()}},{key:"_wsOnError",value:function(e){this._rpcWebSocketConnected=!1,console.error("ws error:",e.message)}},{key:"_wsOnClose",value:function(e){var t=this;this._rpcWebSocketConnected=!1,this._rpcWebSocketGeneration=(this._rpcWebSocketGeneration+1)%Number.MAX_SAFE_INTEGER,this._rpcWebSocketIdleTimeout&&(clearTimeout(this._rpcWebSocketIdleTimeout),this._rpcWebSocketIdleTimeout=null),this._rpcWebSocketHeartbeat&&(clearInterval(this._rpcWebSocketHeartbeat),this._rpcWebSocketHeartbeat=null),1e3!==e?(this._subscriptionCallbacksByServerSubscriptionId={},Object.entries(this._subscriptionsByHash).forEach((function(e){var r=Object(s.a)(e,2),n=r[0],a=r[1];t._setSubscription(n,Object(o.a)(Object(o.a)({},a),{},{state:"pending"}))}))):this._updateSubscriptions()}},{key:"_setSubscription",value:function(e,t){var r,n=null===(r=this._subscriptionsByHash[e])||void 0===r?void 0:r.state;if(this._subscriptionsByHash[e]=t,n!==t.state){var a=this._subscriptionStateChangeCallbacksByHash[e];a&&a.forEach((function(e){try{e(t.state)}catch(r){}}))}}},{key:"_onSubscriptionStateChange",value:function(e,t){var r,n=this,a=this._subscriptionHashByClientSubscriptionId[e];if(null==a)return function(){};var i=(r=this._subscriptionStateChangeCallbacksByHash)[a]||(r[a]=new Set);return i.add(t),function(){i.delete(t),0===i.size&&delete n._subscriptionStateChangeCallbacksByHash[a]}}},{key:"_updateSubscriptions",value:function(){var e=Object(h.a)(Object(l.a)().mark((function e(){var t,r,n=this;return Object(l.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0!==Object.keys(this._subscriptionsByHash).length){e.next=3;break}return this._rpcWebSocketConnected&&(this._rpcWebSocketConnected=!1,this._rpcWebSocketIdleTimeout=setTimeout((function(){n._rpcWebSocketIdleTimeout=null;try{n._rpcWebSocket.close()}catch(e){e instanceof Error&&console.log("Error when closing socket connection: ".concat(e.message))}}),500)),e.abrupt("return");case 3:if(null!==this._rpcWebSocketIdleTimeout&&(clearTimeout(this._rpcWebSocketIdleTimeout),this._rpcWebSocketIdleTimeout=null,this._rpcWebSocketConnected=!0),this._rpcWebSocketConnected){e.next=7;break}return this._rpcWebSocket.connect(),e.abrupt("return");case 7:return t=this._rpcWebSocketGeneration,r=function(){return t===n._rpcWebSocketGeneration},e.next=11,Promise.all(Object.keys(this._subscriptionsByHash).map(function(){var e=Object(h.a)(Object(l.a)().mark((function e(t){var a;return Object(l.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0!==(a=n._subscriptionsByHash[t])){e.next=3;break}return e.abrupt("return");case 3:e.t0=a.state,e.next="pending"===e.t0||"unsubscribed"===e.t0?6:"subscribed"===e.t0?15:19;break;case 6:if(0!==a.callbacks.size){e.next=12;break}return delete n._subscriptionsByHash[t],"unsubscribed"===a.state&&delete n._subscriptionCallbacksByServerSubscriptionId[a.serverSubscriptionId],e.next=11,n._updateSubscriptions();case 11:return e.abrupt("return");case 12:return e.next=14,Object(h.a)(Object(l.a)().mark((function e(){var i,s,u;return Object(l.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=a.args,s=a.method,e.prev=1,n._setSubscription(t,Object(o.a)(Object(o.a)({},a),{},{state:"subscribing"})),e.next=5,n._rpcWebSocket.call(s,i);case 5:return u=e.sent,n._setSubscription(t,Object(o.a)(Object(o.a)({},a),{},{serverSubscriptionId:u,state:"subscribed"})),n._subscriptionCallbacksByServerSubscriptionId[u]=a.callbacks,e.next=10,n._updateSubscriptions();case 10:e.next=20;break;case 12:if(e.prev=12,e.t0=e.catch(1),e.t0 instanceof Error&&console.error("".concat(s," error for argument"),i,e.t0.message),r()){e.next=17;break}return e.abrupt("return");case 17:return n._setSubscription(t,Object(o.a)(Object(o.a)({},a),{},{state:"pending"})),e.next=20,n._updateSubscriptions();case 20:case"end":return e.stop()}}),e,null,[[1,12]])})))();case 14:case 18:return e.abrupt("break",19);case 15:if(0!==a.callbacks.size){e.next=18;break}return e.next=18,Object(h.a)(Object(l.a)().mark((function e(){var i,s;return Object(l.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=a.serverSubscriptionId,s=a.unsubscribeMethod,!n._subscriptionsAutoDisposedByRpc.has(i)){e.next=5;break}n._subscriptionsAutoDisposedByRpc.delete(i),e.next=21;break;case 5:return n._setSubscription(t,Object(o.a)(Object(o.a)({},a),{},{state:"unsubscribing"})),n._setSubscription(t,Object(o.a)(Object(o.a)({},a),{},{state:"unsubscribing"})),e.prev=7,e.next=10,n._rpcWebSocket.call(s,[i]);case 10:e.next=21;break;case 12:if(e.prev=12,e.t0=e.catch(7),e.t0 instanceof Error&&console.error("".concat(s," error:"),e.t0.message),r()){e.next=17;break}return e.abrupt("return");case 17:return n._setSubscription(t,Object(o.a)(Object(o.a)({},a),{},{state:"subscribed"})),e.next=20,n._updateSubscriptions();case 20:return e.abrupt("return");case 21:return n._setSubscription(t,Object(o.a)(Object(o.a)({},a),{},{state:"unsubscribed"})),e.next=24,n._updateSubscriptions();case 24:case"end":return e.stop()}}),e,null,[[7,12]])})))();case 19:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"_handleServerNotification",value:function(e,t){var r=this._subscriptionCallbacksByServerSubscriptionId[e];void 0!==r&&r.forEach((function(e){try{e.apply(void 0,Object(u.a)(t))}catch(r){console.error(r)}}))}},{key:"_wsOnAccountNotification",value:function(e){var t=z(e,pr),r=t.result,n=t.subscription;this._handleServerNotification(n,[r.value,r.context])}},{key:"_makeSubscription",value:function(e,t){var r=this,n=this._nextClientSubscriptionId++,a=dt([e.method,t],!0),i=this._subscriptionsByHash[a];return void 0===i?this._subscriptionsByHash[a]=Object(o.a)(Object(o.a)({},e),{},{args:t,callbacks:new Set([e.callback]),state:"pending"}):i.callbacks.add(e.callback),this._subscriptionHashByClientSubscriptionId[n]=a,this._subscriptionDisposeFunctionsByClientSubscriptionId[n]=Object(h.a)(Object(l.a)().mark((function t(){var i;return Object(l.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return delete r._subscriptionDisposeFunctionsByClientSubscriptionId[n],delete r._subscriptionHashByClientSubscriptionId[n],qe(void 0!==(i=r._subscriptionsByHash[a]),"Could not find a `Subscription` when tearing down client subscription #".concat(n)),i.callbacks.delete(e.callback),t.next=7,r._updateSubscriptions();case 7:case"end":return t.stop()}}),t)}))),this._updateSubscriptions(),n}},{key:"onAccountChange",value:function(e,t,r){var n=this._buildArgs([e.toBase58()],r||this._commitment||"finalized","base64");return this._makeSubscription({callback:t,method:"accountSubscribe",unsubscribeMethod:"accountUnsubscribe"},n)}},{key:"removeAccountChangeListener",value:function(){var e=Object(h.a)(Object(l.a)().mark((function e(t){return Object(l.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._unsubscribeClientSubscription(t,"account change");case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_wsOnProgramAccountNotification",value:function(e){var t=z(e,br),r=t.result,n=t.subscription;this._handleServerNotification(n,[{accountId:r.value.pubkey,accountInfo:r.value.account},r.context])}},{key:"onProgramAccountChange",value:function(e,t,r,n){var a=this._buildArgs([e.toBase58()],r||this._commitment||"finalized","base64",n?{filters:n}:void 0);return this._makeSubscription({callback:t,method:"programSubscribe",unsubscribeMethod:"programUnsubscribe"},a)}},{key:"removeProgramAccountChangeListener",value:function(){var e=Object(h.a)(Object(l.a)().mark((function e(t){return Object(l.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._unsubscribeClientSubscription(t,"program account change");case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"onLogs",value:function(e,t,r){var n=this._buildArgs(["object"===typeof e?{mentions:[e.toString()]}:e],r||this._commitment||"finalized");return this._makeSubscription({callback:t,method:"logsSubscribe",unsubscribeMethod:"logsUnsubscribe"},n)}},{key:"removeOnLogsListener",value:function(){var e=Object(h.a)(Object(l.a)().mark((function e(t){return Object(l.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._unsubscribeClientSubscription(t,"logs");case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_wsOnLogsNotification",value:function(e){var t=z(e,cn),r=t.result,n=t.subscription;this._handleServerNotification(n,[r.value,r.context])}},{key:"_wsOnSlotNotification",value:function(e){var t=z(e,gr),r=t.result,n=t.subscription;this._handleServerNotification(n,[r])}},{key:"onSlotChange",value:function(e){return this._makeSubscription({callback:e,method:"slotSubscribe",unsubscribeMethod:"slotUnsubscribe"},[])}},{key:"removeSlotChangeListener",value:function(){var e=Object(h.a)(Object(l.a)().mark((function e(t){return Object(l.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._unsubscribeClientSubscription(t,"slot change");case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_wsOnSlotUpdatesNotification",value:function(e){var t=z(e,wr),r=t.result,n=t.subscription;this._handleServerNotification(n,[r])}},{key:"onSlotUpdate",value:function(e){return this._makeSubscription({callback:e,method:"slotsUpdatesSubscribe",unsubscribeMethod:"slotsUpdatesUnsubscribe"},[])}},{key:"removeSlotUpdateListener",value:function(){var e=Object(h.a)(Object(l.a)().mark((function e(t){return Object(l.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._unsubscribeClientSubscription(t,"slot update");case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_unsubscribeClientSubscription",value:function(){var e=Object(h.a)(Object(l.a)().mark((function e(t,r){var n;return Object(l.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(n=this._subscriptionDisposeFunctionsByClientSubscriptionId[t])){e.next=6;break}return e.next=4,n();case 4:e.next=7;break;case 6:console.warn("Ignored unsubscribe request because an active subscription with id "+"`".concat(t,"` for '").concat(r,"' events ")+"could not be found.");case 7:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"_buildArgs",value:function(e,t,r,n){var a=t||this._commitment;if(a||r||n){var i={};r&&(i.encoding=r),a&&(i.commitment=a),n&&(i=Object.assign(i,n)),e.push(i)}return e}},{key:"_buildArgsAtLeastConfirmed",value:function(e,t,r,n){var a=t||this._commitment;if(a&&!["confirmed","finalized"].includes(a))throw new Error("Using Connection with default commitment: `"+this._commitment+"`, but method requires at least `confirmed`");return this._buildArgs(e,t,r,n)}},{key:"_wsOnSignatureNotification",value:function(e){var t=z(e,kr),r=t.result,n=t.subscription;"receivedSignature"!==r.value&&this._subscriptionsAutoDisposedByRpc.add(n),this._handleServerNotification(n,"receivedSignature"===r.value?[{type:"received"},r.context]:[{type:"status",result:r.value},r.context])}},{key:"onSignature",value:function(e,t,r){var n=this,a=this._buildArgs([e],r||this._commitment||"finalized"),i=this._makeSubscription({callback:function(e,r){if("status"===e.type){t(e.result,r);try{n.removeSignatureListener(i)}catch(a){}}},method:"signatureSubscribe",unsubscribeMethod:"signatureUnsubscribe"},a);return i}},{key:"onSignatureWithOptions",value:function(e,t,r){var a=this,i=Object(o.a)(Object(o.a)({},r),{},{commitment:r&&r.commitment||this._commitment||"finalized"}),s=i.commitment,u=Object(n.a)(i,ve),c=this._buildArgs([e],s,void 0,u),f=this._makeSubscription({callback:function(e,r){t(e,r);try{a.removeSignatureListener(f)}catch(n){}},method:"signatureSubscribe",unsubscribeMethod:"signatureUnsubscribe"},c);return f}},{key:"removeSignatureListener",value:function(){var e=Object(h.a)(Object(l.a)().mark((function e(t){return Object(l.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._unsubscribeClientSubscription(t,"signature result");case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_wsOnRootNotification",value:function(e){var t=z(e,xr),r=t.result,n=t.subscription;this._handleServerNotification(n,[r])}},{key:"onRootChange",value:function(e){return this._makeSubscription({callback:e,method:"rootSubscribe",unsubscribeMethod:"rootUnsubscribe"},[])}},{key:"removeRootChangeListener",value:function(){var e=Object(h.a)(Object(l.a)().mark((function e(t){return Object(l.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._unsubscribeClientSubscription(t,"root change");case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}(),hn=function(){function e(t){Object(v.a)(this,e),this._keypair=void 0,this._keypair=null!==t&&void 0!==t?t:be()}return Object(b.a)(e,[{key:"publicKey",get:function(){return new je(this._keypair.publicKey)}},{key:"secretKey",get:function(){return new Uint8Array(this._keypair.secretKey)}}],[{key:"generate",value:function(){return new e(be())}},{key:"fromSecretKey",value:function(t,r){if(64!==t.byteLength)throw new Error("bad secret key size");var n=t.slice(32,64);if(!r||!r.skipValidation)for(var a=t.slice(0,32),i=ye(a),o=0;o<32;o++)if(n[o]!==i[o])throw new Error("provided secretKey is invalid");return new e({publicKey:n,secretKey:t})}},{key:"fromSeed",value:function(t){var r=ye(t),n=new Uint8Array(64);return n.set(t),n.set(r,32),new e({publicKey:r,secretKey:n})}}]),e}(),dn=Object.freeze({CreateLookupTable:{index:0,layout:E.struct([E.u32("instruction"),it("recentSlot"),E.u8("bumpSeed")])},FreezeLookupTable:{index:1,layout:E.struct([E.u32("instruction")])},ExtendLookupTable:{index:2,layout:E.struct([E.u32("instruction"),it(),E.seq(Ce(),E.offset(E.u32(),-8),"addresses")])},DeactivateLookupTable:{index:3,layout:E.struct([E.u32("instruction")])},CloseLookupTable:{index:4,layout:E.struct([E.u32("instruction")])}}),pn=function(){function e(){Object(v.a)(this,e)}return Object(b.a)(e,null,[{key:"createLookupTable",value:function(e){var t=je.findProgramAddressSync([e.authority.toBuffer(),Object(B.toBufferLE)(BigInt(e.recentSlot),8)],this.programId),r=Object(s.a)(t,2),n=r[0],a=r[1],i=Qe(dn.CreateLookupTable,{recentSlot:BigInt(e.recentSlot),bumpSeed:a}),o=[{pubkey:n,isSigner:!1,isWritable:!0},{pubkey:e.authority,isSigner:!0,isWritable:!1},{pubkey:e.payer,isSigner:!0,isWritable:!0},{pubkey:st.programId,isSigner:!1,isWritable:!1}];return[new De({programId:this.programId,keys:o,data:i}),n]}},{key:"freezeLookupTable",value:function(e){var t=Qe(dn.FreezeLookupTable),r=[{pubkey:e.lookupTable,isSigner:!1,isWritable:!0},{pubkey:e.authority,isSigner:!0,isWritable:!1}];return new De({programId:this.programId,keys:r,data:t})}},{key:"extendLookupTable",value:function(e){var t=Qe(dn.ExtendLookupTable,{addresses:e.addresses.map((function(e){return e.toBytes()}))}),r=[{pubkey:e.lookupTable,isSigner:!1,isWritable:!0},{pubkey:e.authority,isSigner:!0,isWritable:!1}];return e.payer&&r.push({pubkey:e.payer,isSigner:!0,isWritable:!0},{pubkey:st.programId,isSigner:!1,isWritable:!1}),new De({programId:this.programId,keys:r,data:t})}},{key:"deactivateLookupTable",value:function(e){var t=Qe(dn.DeactivateLookupTable),r=[{pubkey:e.lookupTable,isSigner:!1,isWritable:!0},{pubkey:e.authority,isSigner:!0,isWritable:!1}];return new De({programId:this.programId,keys:r,data:t})}},{key:"closeLookupTable",value:function(e){var t=Qe(dn.CloseLookupTable),r=[{pubkey:e.lookupTable,isSigner:!1,isWritable:!0},{pubkey:e.authority,isSigner:!0,isWritable:!1},{pubkey:e.recipient,isSigner:!1,isWritable:!0}];return new De({programId:this.programId,keys:r,data:t})}}]),e}();pn.programId=new je("AddressLookupTab1e1111111111111111111111111");var vn=Object.freeze({RequestUnits:{index:0,layout:E.struct([E.u8("instruction"),E.u32("units"),E.u32("additionalFee")])},RequestHeapFrame:{index:1,layout:E.struct([E.u8("instruction"),E.u32("bytes")])},SetComputeUnitLimit:{index:2,layout:E.struct([E.u8("instruction"),E.u32("units")])},SetComputeUnitPrice:{index:3,layout:E.struct([E.u8("instruction"),it("microLamports")])}}),bn=function(){function e(){Object(v.a)(this,e)}return Object(b.a)(e,null,[{key:"requestUnits",value:function(e){var t=Qe(vn.RequestUnits,e);return new De({keys:[],programId:this.programId,data:t})}},{key:"requestHeapFrame",value:function(e){var t=Qe(vn.RequestHeapFrame,e);return new De({keys:[],programId:this.programId,data:t})}},{key:"setComputeUnitLimit",value:function(e){var t=Qe(vn.SetComputeUnitLimit,e);return new De({keys:[],programId:this.programId,data:t})}},{key:"setComputeUnitPrice",value:function(e){var t=Qe(vn.SetComputeUnitPrice,{microLamports:BigInt(e.microLamports)});return new De({keys:[],programId:this.programId,data:t})}}]),e}();bn.programId=new je("ComputeBudget111111111111111111111111111111");var yn=E.struct([E.u8("numSignatures"),E.u8("padding"),E.u16("signatureOffset"),E.u16("signatureInstructionIndex"),E.u16("publicKeyOffset"),E.u16("publicKeyInstructionIndex"),E.u16("messageDataOffset"),E.u16("messageDataSize"),E.u16("messageInstructionIndex")]);(function(){function e(){Object(v.a)(this,e)}return Object(b.a)(e,null,[{key:"createInstructionWithPublicKey",value:function(t){var r=t.publicKey,n=t.message,a=t.signature,i=t.instructionIndex;qe(32===r.length,"Public Key must be ".concat(32," bytes but received ").concat(r.length," bytes")),qe(64===a.length,"Signature must be ".concat(64," bytes but received ").concat(a.length," bytes"));var o=yn.span,s=o+r.length,u=s+a.length,c=y.Buffer.alloc(u+n.length),f=null==i?65535:i;return yn.encode({numSignatures:1,padding:0,signatureOffset:s,signatureInstructionIndex:f,publicKeyOffset:o,publicKeyInstructionIndex:f,messageDataOffset:u,messageDataSize:n.length,messageInstructionIndex:f},c),c.fill(r,o),c.fill(a,s),c.fill(n,u),new De({keys:[],programId:e.programId,data:c})}},{key:"createInstructionWithPrivateKey",value:function(e){var t=e.privateKey,r=e.message,n=e.instructionIndex;qe(64===t.length,"Private key must be ".concat(64," bytes but received ").concat(t.length," bytes"));try{var a=hn.fromSecretKey(t),i=a.publicKey.toBytes(),o=we(r,a.secretKey);return this.createInstructionWithPublicKey({publicKey:i,message:r,signature:o,instructionIndex:n})}catch(s){throw new Error("Error creating instruction; ".concat(s))}}}]),e}()).programId=new je("Ed25519SigVerify111111111111111111111111111");le.secp256k1.utils.isValidPrivateKey;var gn,mn=le.secp256k1.getPublicKey,wn=E.struct([E.u8("numSignatures"),E.u16("signatureOffset"),E.u8("signatureInstructionIndex"),E.u16("ethAddressOffset"),E.u8("ethAddressInstructionIndex"),E.u16("messageDataOffset"),E.u16("messageDataSize"),E.u8("messageInstructionIndex"),E.blob(20,"ethAddress"),E.blob(64,"signature"),E.u8("recoveryId")]);(function(){function e(){Object(v.a)(this,e)}return Object(b.a)(e,null,[{key:"publicKeyToEthAddress",value:function(e){qe(64===e.length,"Public key must be ".concat(64," bytes but received ").concat(e.length," bytes"));try{return y.Buffer.from(Object(fe.keccak_256)(xe(e))).slice(-20)}catch(t){throw new Error("Error constructing Ethereum address: ".concat(t))}}},{key:"createInstructionWithPublicKey",value:function(t){var r=t.publicKey,n=t.message,a=t.signature,i=t.recoveryId,o=t.instructionIndex;return e.createInstructionWithEthAddress({ethAddress:e.publicKeyToEthAddress(r),message:n,signature:a,recoveryId:i,instructionIndex:o})}},{key:"createInstructionWithEthAddress",value:function(t){var r,n=t.ethAddress,a=t.message,i=t.signature,o=t.recoveryId,s=t.instructionIndex,u=void 0===s?0:s;qe(20===(r="string"===typeof n?n.startsWith("0x")?y.Buffer.from(n.substr(2),"hex"):y.Buffer.from(n,"hex"):n).length,"Address must be ".concat(20," bytes but received ").concat(r.length," bytes"));var c=12+r.length,f=c+i.length+1,l=y.Buffer.alloc(wn.span+a.length);return wn.encode({numSignatures:1,signatureOffset:c,signatureInstructionIndex:u,ethAddressOffset:12,ethAddressInstructionIndex:u,messageDataOffset:f,messageDataSize:a.length,messageInstructionIndex:u,signature:xe(i),ethAddress:xe(r),recoveryId:o},l),l.fill(xe(a),wn.span),new De({keys:[],programId:e.programId,data:l})}},{key:"createInstructionWithPrivateKey",value:function(e){var t=e.privateKey,r=e.message,n=e.instructionIndex;qe(32===t.length,"Private key must be ".concat(32," bytes but received ").concat(t.length," bytes"));try{var a=xe(t),i=mn(a,!1).slice(1),o=function(e,t){var r=le.secp256k1.sign(e,t);return[r.toCompactRawBytes(),r.recovery]}(y.Buffer.from(Object(fe.keccak_256)(xe(r))),a),u=Object(s.a)(o,2),c=u[0],f=u[1];return this.createInstructionWithPublicKey({publicKey:i,message:r,signature:c,recoveryId:f,instructionIndex:n})}catch(l){throw new Error("Error creating instruction; ".concat(l))}}}]),e}()).programId=new je("KeccakSecp256k11111111111111111111111111111");var kn=new je("StakeConfig11111111111111111111111111111111"),xn=Object(b.a)((function e(t,r,n){Object(v.a)(this,e),this.unixTimestamp=void 0,this.epoch=void 0,this.custodian=void 0,this.unixTimestamp=t,this.epoch=r,this.custodian=n}));gn=xn,xn.default=new gn(0,0,je.default);var On=Object.freeze({Initialize:{index:0,layout:E.struct([E.u32("instruction"),function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"authorized";return E.struct([Ce("staker"),Ce("withdrawer")],e)}(),function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"lockup";return E.struct([E.ns64("unixTimestamp"),E.ns64("epoch"),Ce("custodian")],e)}()])},Authorize:{index:1,layout:E.struct([E.u32("instruction"),Ce("newAuthorized"),E.u32("stakeAuthorizationType")])},Delegate:{index:2,layout:E.struct([E.u32("instruction")])},Split:{index:3,layout:E.struct([E.u32("instruction"),E.ns64("lamports")])},Withdraw:{index:4,layout:E.struct([E.u32("instruction"),E.ns64("lamports")])},Deactivate:{index:5,layout:E.struct([E.u32("instruction")])},Merge:{index:7,layout:E.struct([E.u32("instruction")])},AuthorizeWithSeed:{index:8,layout:E.struct([E.u32("instruction"),Ce("newAuthorized"),E.u32("stakeAuthorizationType"),Le("authoritySeed"),Ce("authorityOwner")])}}),Sn=(Object.freeze({Staker:{index:0},Withdrawer:{index:1}}),function(){function e(){Object(v.a)(this,e)}return Object(b.a)(e,null,[{key:"initialize",value:function(e){var t=e.stakePubkey,r=e.authorized,n=e.lockup||xn.default,a=Qe(On.Initialize,{authorized:{staker:xe(r.staker.toBuffer()),withdrawer:xe(r.withdrawer.toBuffer())},lockup:{unixTimestamp:n.unixTimestamp,epoch:n.epoch,custodian:xe(n.custodian.toBuffer())}}),i={keys:[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:Ze,isSigner:!1,isWritable:!1}],programId:this.programId,data:a};return new De(i)}},{key:"createAccountWithSeed",value:function(e){var t=new Fe;t.add(st.createAccountWithSeed({fromPubkey:e.fromPubkey,newAccountPubkey:e.stakePubkey,basePubkey:e.basePubkey,seed:e.seed,lamports:e.lamports,space:this.space,programId:this.programId}));var r=e.stakePubkey,n=e.authorized,a=e.lockup;return t.add(this.initialize({stakePubkey:r,authorized:n,lockup:a}))}},{key:"createAccount",value:function(e){var t=new Fe;t.add(st.createAccount({fromPubkey:e.fromPubkey,newAccountPubkey:e.stakePubkey,lamports:e.lamports,space:this.space,programId:this.programId}));var r=e.stakePubkey,n=e.authorized,a=e.lockup;return t.add(this.initialize({stakePubkey:r,authorized:n,lockup:a}))}},{key:"delegate",value:function(e){var t=e.stakePubkey,r=e.authorizedPubkey,n=e.votePubkey,a=Qe(On.Delegate);return(new Fe).add({keys:[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:n,isSigner:!1,isWritable:!1},{pubkey:Ve,isSigner:!1,isWritable:!1},{pubkey:Je,isSigner:!1,isWritable:!1},{pubkey:kn,isSigner:!1,isWritable:!1},{pubkey:r,isSigner:!0,isWritable:!1}],programId:this.programId,data:a})}},{key:"authorize",value:function(e){var t=e.stakePubkey,r=e.authorizedPubkey,n=e.newAuthorizedPubkey,a=e.stakeAuthorizationType,i=e.custodianPubkey,o=Qe(On.Authorize,{newAuthorized:xe(n.toBuffer()),stakeAuthorizationType:a.index}),s=[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:Ve,isSigner:!1,isWritable:!0},{pubkey:r,isSigner:!0,isWritable:!1}];return i&&s.push({pubkey:i,isSigner:!1,isWritable:!1}),(new Fe).add({keys:s,programId:this.programId,data:o})}},{key:"authorizeWithSeed",value:function(e){var t=e.stakePubkey,r=e.authorityBase,n=e.authoritySeed,a=e.authorityOwner,i=e.newAuthorizedPubkey,o=e.stakeAuthorizationType,s=e.custodianPubkey,u=Qe(On.AuthorizeWithSeed,{newAuthorized:xe(i.toBuffer()),stakeAuthorizationType:o.index,authoritySeed:n,authorityOwner:xe(a.toBuffer())}),c=[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:r,isSigner:!0,isWritable:!1},{pubkey:Ve,isSigner:!1,isWritable:!1}];return s&&c.push({pubkey:s,isSigner:!1,isWritable:!1}),(new Fe).add({keys:c,programId:this.programId,data:u})}},{key:"splitInstruction",value:function(e){var t=e.stakePubkey,r=e.authorizedPubkey,n=e.splitStakePubkey,a=e.lamports,i=Qe(On.Split,{lamports:a});return new De({keys:[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:n,isSigner:!1,isWritable:!0},{pubkey:r,isSigner:!0,isWritable:!1}],programId:this.programId,data:i})}},{key:"split",value:function(e){var t=new Fe;return t.add(st.createAccount({fromPubkey:e.authorizedPubkey,newAccountPubkey:e.splitStakePubkey,lamports:0,space:this.space,programId:this.programId})),t.add(this.splitInstruction(e))}},{key:"splitWithSeed",value:function(e){var t=e.stakePubkey,r=e.authorizedPubkey,n=e.splitStakePubkey,a=e.basePubkey,i=e.seed,o=e.lamports,s=new Fe;return s.add(st.allocate({accountPubkey:n,basePubkey:a,seed:i,space:this.space,programId:this.programId})),s.add(this.splitInstruction({stakePubkey:t,authorizedPubkey:r,splitStakePubkey:n,lamports:o}))}},{key:"merge",value:function(e){var t=e.stakePubkey,r=e.sourceStakePubKey,n=e.authorizedPubkey,a=Qe(On.Merge);return(new Fe).add({keys:[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:r,isSigner:!1,isWritable:!0},{pubkey:Ve,isSigner:!1,isWritable:!1},{pubkey:Je,isSigner:!1,isWritable:!1},{pubkey:n,isSigner:!0,isWritable:!1}],programId:this.programId,data:a})}},{key:"withdraw",value:function(e){var t=e.stakePubkey,r=e.authorizedPubkey,n=e.toPubkey,a=e.lamports,i=e.custodianPubkey,o=Qe(On.Withdraw,{lamports:a}),s=[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:n,isSigner:!1,isWritable:!0},{pubkey:Ve,isSigner:!1,isWritable:!1},{pubkey:Je,isSigner:!1,isWritable:!1},{pubkey:r,isSigner:!0,isWritable:!1}];return i&&s.push({pubkey:i,isSigner:!1,isWritable:!1}),(new Fe).add({keys:s,programId:this.programId,data:o})}},{key:"deactivate",value:function(e){var t=e.stakePubkey,r=e.authorizedPubkey,n=Qe(On.Deactivate);return(new Fe).add({keys:[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:Ve,isSigner:!1,isWritable:!1},{pubkey:r,isSigner:!0,isWritable:!1}],programId:this.programId,data:n})}}]),e}());Sn.programId=new je("Stake11111111111111111111111111111111111111"),Sn.space=200;var En=Object.freeze({InitializeAccount:{index:0,layout:E.struct([E.u32("instruction"),function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"voteInit";return E.struct([Ce("nodePubkey"),Ce("authorizedVoter"),Ce("authorizedWithdrawer"),E.u8("commission")],e)}()])},Authorize:{index:1,layout:E.struct([E.u32("instruction"),Ce("newAuthorized"),E.u32("voteAuthorizationType")])},Withdraw:{index:3,layout:E.struct([E.u32("instruction"),E.ns64("lamports")])},AuthorizeWithSeed:{index:10,layout:E.struct([E.u32("instruction"),function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"voteAuthorizeWithSeedArgs";return E.struct([E.u32("voteAuthorizationType"),Ce("currentAuthorityDerivedKeyOwnerPubkey"),Le("currentAuthorityDerivedKeySeed"),Ce("newAuthorized")],e)}()])}}),Bn=(Object.freeze({Voter:{index:0},Withdrawer:{index:1}}),function(){function e(){Object(v.a)(this,e)}return Object(b.a)(e,null,[{key:"initializeAccount",value:function(e){var t=e.votePubkey,r=e.nodePubkey,n=e.voteInit,a=Qe(En.InitializeAccount,{voteInit:{nodePubkey:xe(n.nodePubkey.toBuffer()),authorizedVoter:xe(n.authorizedVoter.toBuffer()),authorizedWithdrawer:xe(n.authorizedWithdrawer.toBuffer()),commission:n.commission}}),i={keys:[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:Ze,isSigner:!1,isWritable:!1},{pubkey:Ve,isSigner:!1,isWritable:!1},{pubkey:r,isSigner:!0,isWritable:!1}],programId:this.programId,data:a};return new De(i)}},{key:"createAccount",value:function(e){var t=new Fe;return t.add(st.createAccount({fromPubkey:e.fromPubkey,newAccountPubkey:e.votePubkey,lamports:e.lamports,space:this.space,programId:this.programId})),t.add(this.initializeAccount({votePubkey:e.votePubkey,nodePubkey:e.voteInit.nodePubkey,voteInit:e.voteInit}))}},{key:"authorize",value:function(e){var t=e.votePubkey,r=e.authorizedPubkey,n=e.newAuthorizedPubkey,a=e.voteAuthorizationType,i=Qe(En.Authorize,{newAuthorized:xe(n.toBuffer()),voteAuthorizationType:a.index}),o=[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:Ve,isSigner:!1,isWritable:!1},{pubkey:r,isSigner:!0,isWritable:!1}];return(new Fe).add({keys:o,programId:this.programId,data:i})}},{key:"authorizeWithSeed",value:function(e){var t=e.currentAuthorityDerivedKeyBasePubkey,r=e.currentAuthorityDerivedKeyOwnerPubkey,n=e.currentAuthorityDerivedKeySeed,a=e.newAuthorizedPubkey,i=e.voteAuthorizationType,o=e.votePubkey,s=Qe(En.AuthorizeWithSeed,{voteAuthorizeWithSeedArgs:{currentAuthorityDerivedKeyOwnerPubkey:xe(r.toBuffer()),currentAuthorityDerivedKeySeed:n,newAuthorized:xe(a.toBuffer()),voteAuthorizationType:i.index}}),u=[{pubkey:o,isSigner:!1,isWritable:!0},{pubkey:Ve,isSigner:!1,isWritable:!1},{pubkey:t,isSigner:!0,isWritable:!1}];return(new Fe).add({keys:u,programId:this.programId,data:s})}},{key:"withdraw",value:function(e){var t=e.votePubkey,r=e.authorizedWithdrawerPubkey,n=e.lamports,a=e.toPubkey,i=Qe(En.Withdraw,{lamports:n}),o=[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:a,isSigner:!1,isWritable:!0},{pubkey:r,isSigner:!0,isWritable:!1}];return(new Fe).add({keys:o,programId:this.programId,data:i})}},{key:"safeWithdraw",value:function(t,r,n){if(t.lamports>r-n)throw new Error("Withdraw will leave vote account with insuffcient funds.");return e.withdraw(t)}}]),e}());Bn.programId=new je("Vote111111111111111111111111111111111111111"),Bn.space=3731;new je("Va1idator1nfo111111111111111111111111111111"),ee({name:$(),website:Y($()),details:Y($()),keybaseUsername:Y($())}),new je("Vote111111111111111111111111111111111111111"),E.struct([Ce("nodePubkey"),Ce("authorizedWithdrawer"),E.u8("commission"),E.nu64(),E.seq(E.struct([E.nu64("slot"),E.u32("confirmationCount")]),E.offset(E.u32(),-8),"votes"),E.u8("rootSlotValid"),E.nu64("rootSlot"),E.nu64(),E.seq(E.struct([E.nu64("epoch"),Ce("authorizedVoter")]),E.offset(E.u32(),-8),"authorizedVoters"),E.struct([E.seq(E.struct([Ce("authorizedPubkey"),E.nu64("epochOfLastAuthorizedSwitch"),E.nu64("targetEpoch")]),32,"buf"),E.nu64("idx"),E.u8("isEmpty")],"priorVoters"),E.nu64(),E.seq(E.struct([E.nu64("epoch"),E.nu64("credits"),E.nu64("prevCredits")]),E.offset(E.u32(),-8),"epochCredits"),E.struct([E.nu64("slot"),E.nu64("timestamp")],"lastTimestamp")])}}]);
//# sourceMappingURL=4.427d6270.chunk.js.map